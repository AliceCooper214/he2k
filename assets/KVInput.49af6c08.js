import{d as K,y as R,r as m,D as S,ao as T,cM as $,z as J,aj as E,J as G,o as y,e as k,c as o,b as l,l as V,g as w,cX as L,U as C,x as F,F as A,f as X,a as Y,ad as Z,bZ as q,b_ as Q,cY as W,T as ee,H as N,c8 as ae,c9 as te,j as f,p as oe,m as ne,_ as se}from"./index.954a2cbc.js";const le=u=>{let c=0;if(typeof u!="object"||!u)return;const e=(x,h=1)=>{Object.values(x).forEach(p=>{typeof p=="object"&&p!==null&&e(p,h+1)}),c=Math.max(c,h)};return e(u),c},U=u=>(oe("data-v-1f14c34e"),u=u(),ne(),u),ue={style:{position:"relative"}},ce=C("KV"),de=C("JSON"),re={class:"title"},ie={style:{display:"flex"}},pe=U(()=>V("div",{class:"label"},"Key:",-1)),ve=U(()=>V("div",{class:"label"},"Value:",-1)),_e={key:1},fe=K({__name:"KVInput",props:{modelValue:null,defaultRow:null,changeProps:null},emits:["update:modelValue","change"],setup(u,{emit:c}){const e=u;te(n=>({ad2a32fa:p.value}));const{t:x}=R(),h=m(),p=m("200px"),g=m(!0);S(()=>g.value,n=>{var t;if(a.length>=3&&(p.value=`${((t=h.value)==null?void 0:t.clientHeight)+10}px`),n){c("change",a,...e.changeProps?e.changeProps:[]);let d;try{d=JSON.parse(v.value)}catch{T.error(x("KVInput.jsonFormat"))}if(le(d)===1){a.length=0;for(const[i,r]of Object.entries(d))a.push({key:i,value:r,index:Date.now()})}}else{const d=a.reduce((i,r)=>r.key?Object.assign(i,{[r.key]:r.value}):i,{});v.value=$(d,{maxLength:10})}});const a=J([{key:"admin",value:"true",index:Date.now()},{key:"user",value:"He3",index:Date.now()},{key:"exp",value:"1666865683",index:Date.now()}]),v=m(e.modelValue);S(()=>v.value,()=>{c("update:modelValue",v.value)});const I=m(-1);function b(){c("change",a,...e.changeProps?e.changeProps:[])}function z(n){const t=a.indexOf(n);t>-1&&(a.splice(t,1),c("change",a,...e.changeProps?e.changeProps:[]))}let O=1;function B(){a.push({key:`key${O}`,value:`value${O++}`,index:Date.now()}),c("change",a,...e.changeProps?e.changeProps:[])}function D(n){I.value=n}return E(()=>{if(e.defaultRow){a.length=0;for(const n of Object.entries(e.defaultRow)){const t={key:n[0],value:n[1],index:Date.now()};a.push(t)}}}),G(()=>{b()}),(n,t)=>{const d=f("a-radio-button"),i=f("a-radio-group"),r=f("a-button"),j=f("a-input"),P=f("a-col"),H=f("a-row");return y(),k("div",ue,[o(i,{value:g.value,"onUpdate:value":t[0]||(t[0]=s=>g.value=s),size:"small",style:{position:"absolute",right:"50px","z-index":"2"}},{default:l(()=>[o(d,{value:!0},{default:l(()=>[ce]),_:1}),o(d,{value:!1},{default:l(()=>[de]),_:1})]),_:1},8,["value"]),g.value?(y(),k("div",{key:0,ref_key:"kvRef",ref:h,class:"kvinput"},[V("div",re,[o(r,{class:"add",size:"small",onClick:B},{default:l(()=>[o(w(L)),C(" "+F(w(x)("jwtGenerator.add")),1)]),_:1})]),o(ee,{name:"anilist",tag:"div"},{default:l(()=>[(y(!0),k(A,null,X(a,(s,M)=>(y(),Y(H,{key:s.index,type:"flex",class:"row",onMouseenter:_=>D(M),onMouseleave:t[1]||(t[1]=_=>D(-1))},{default:l(()=>[o(P,{style:{width:"calc(100% - 40px)"}},{default:l(()=>[V("div",ie,[pe,o(j,{value:s.key,"onUpdate:value":_=>s.key=_,size:"small",placeholder:"key",style:{width:"calc(50%- 50px)"},onChange:b},null,8,["value","onUpdate:value"]),ve,o(j,{value:s.value,"onUpdate:value":_=>s.value=_,size:"small",placeholder:"key",style:{width:"calc(50%- 50px)"},onChange:b},null,8,["value","onUpdate:value"])])]),_:2},1024),o(P,{flex:"40px"},{default:l(()=>[o(Z,{name:"fade"},{default:l(()=>[q(o(r,{size:"small",class:"delete",onClick:_=>z(s)},{default:l(()=>[o(w(W))]),_:2},1032,["onClick"]),[[Q,I.value===M]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onMouseenter"]))),128))]),_:1})],512)):N("",!0),g.value?N("",!0):(y(),k("div",_e,[o(w(ae),{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),"current-language":"JSON",lang:"JSON",theme:"GITHUB_LIGHT",class:"editor"},null,8,["modelValue"])]))])}}}),ge=se(fe,[["__scopeId","data-v-1f14c34e"]]);export{ge as K};
