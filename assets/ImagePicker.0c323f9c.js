import{d as P,r as n,J as I,a9 as $,D as x,Y as B,o as l,e as u,a as E,b as h,l as p,x as m,g as k,cO as V,H as L,$ as y,c as _,cP as N,U as S,c9 as U,j as b,_ as D}from"./index.954a2cbc.js";import{g as w}from"./getBase64.b1142636.js";const F={class:"upload-area"},M={key:0},T={key:1,class:"preview-image"},j=["src"],z=P({__name:"ImagePicker",props:{width:{default:"100%"},height:{default:"100%"},imageHeight:{default:"78vh"},pickHook:null,onLoadHook:{type:Function,default:()=>{}},resetHook:{type:Function,default:()=>{}}},setup(o){const c=o;U(e=>({"1ffa44cb":e.$props.imageHeight}));const a=n(""),g=n(null),r=n(!1),f=()=>{navigator.clipboard.read().then(e=>{e[0].types[0].includes("image")?r.value=!0:r.value=!1})},v=async e=>{var i;let t=(i=e.clipboardData)==null?void 0:i.items[0];if((t==null?void 0:t.kind)=="file"){let s=t.getAsFile();s&&s.size!==0&&(a.value=await w(s))}};I(()=>{f(),document.addEventListener("paste",v,!1)}),$(()=>{document.removeEventListener("paste",v)});const d=n(!1),H=()=>{f(),d.value=!0,setTimeout(()=>{d.value=!1,a.value="",c.resetHook()},500)},C=async e=>(c.pickHook(e),a.value=await w(e),!1);return x(a,async e=>{!e||(await B(),c.onLoadHook(g.value))}),(e,t)=>{const i=b("a-upload-dragger"),s=b("a-button");return l(),u("div",{style:y({width:o.width,height:o.height})},[a.value?(l(),u("div",T,[p("img",{ref_key:"imgEle",ref:g,class:"image",alt:"He3",src:a.value},null,8,j),_(s,{type:"primary",shape:"round",onClick:H},{default:h(()=>[_(k(N),{spin:d.value},null,8,["spin"]),S(m(e.$t("imagePicker.reselect")),1)]),_:1})])):(l(),E(i,{key:0,accept:"image/png,image/jpeg,image/apng,image/avif,image/gif,image/svg+xml,image/webp","max-count":1,"before-upload":C,"show-upload-list":!1,"list-type":"picture",style:y({width:o.width})},{default:h(()=>[p("div",F,[p("p",null,m(e.$t("imagePicker.upload")),1),r.value?(l(),u("p",M," ("+m(k(V)()?e.$t("imagePicker.clipboardMac"):e.$t("imagePicker.clipboardWin"))+") ",1)):L("",!0)])]),_:1},8,["style"]))],4)}}}),J=D(z,[["__scopeId","data-v-e9e2793e"]]);export{J as I};
