var us=Object.defineProperty;var ds=(n,e,t)=>e in n?us(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var M=(n,e,t)=>(ds(n,typeof e!="symbol"?e+"":e,t),t);import{u as hs,c as p,s as ps,w as fs,d as Q,r as C,o as _,a as N,b as m,e as R,f as je,g,C as ms,F as ye,h as vt,A as gs,i as jt,j as k,_ as ne,k as gn,l as b,p as tt,m as nt,n as J,q as se,t as ho,v as de,x as $,y as Ye,z as vn,B as oi,D as re,E as ln,P as _t,G as Zn,H as z,I as wt,J as fe,T as ii,K as te,L as Re,M as mt,N as W,O as si,Q as Ie,S as vs,R as _s,V as ys,U,W as ws,X as xs,Y as Fe,Z as Sn,$ as ai,a0 as bs,a1 as Es,a2 as Cs,a3 as ks,a4 as Ss,a5 as ri,a6 as kt,a7 as _n,a8 as xt,a9 as Tt,aa as cn,ab as $s,ac as Is,ad as yn,ae as Os,af as Te,ag as Ms,ah as po,ai as Xe,aj as li,ak as Eo,al as Ts,am as fo,an as As,ao as he,ap as Ds,aq as Ls,ar as ci,as as Co,at as Rs,au as He,av as Ns,aw as Ps,ax as Fs,ay as Us,az as Bs,aA as zs,aB as Hs,aC as Ws,aD as js,aE as Vs,aF as Ks,aG as Gs,aH as Ys,aI as Xs,aJ as qs,aK as ko,aL as Dn,aM as rt,aN as Zs,aO as Js,aP as Qs,aQ as ea,aR as ta,aS as ui,aT as di,aU as na,aV as oa,aW as ia,aX as hi,aY as pi,aZ as un,a_ as sa,a$ as aa,b0 as ra,b1 as la,b2 as ca,b3 as So,b4 as ua,b5 as da,b6 as ha,b7 as $o,b8 as pa,b9 as fa}from"./index.954a2cbc.js";import{J as St}from"./judgeType.723f505b.js";import{B as Io,H as mo,L as ma}from"./http.2276b1a3.js";import{G as ga,a as va,E as _a,P as ya,b as wa}from"./api.f5801a4e.js";import"./axios.ee048d55.js";var xa=["class","component","viewBox","spin","rotate","tabindex","onClick"];function Zt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.forEach(function(i){fi(n,i,t[i])})}return n}function fi(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ba(n,e){if(n==null)return{};var t=Ea(n,e),o,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)o=s[i],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,o)||(t[o]=n[o]))}return t}function Ea(n,e){if(n==null)return{};var t={},o=Object.keys(n),i,s;for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var $n=function(e,t){var o=t.attrs,i=t.slots,s=Zt({},e,o),a=s.class,r=s.component,l=s.viewBox,c=s.spin,d=s.rotate,u=s.tabindex,h=s.onClick,f=ba(s,xa),v=i.default&&i.default(),x=v&&v.length,y=i.component;hs();var S=fi({anticon:!0},a,a),w={"anticon-spin":c===""||!!c},I=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,T=Zt({},ps,{viewBox:l,class:w,style:I});l||delete T.viewBox;var P=function(){return r?p(r,T,{default:function(){return[v]}}):y?y(T):x?(fs(Boolean(l)||v.length===1&&v[0]&&v[0].type==="use"),p("svg",Zt({},T,{viewBox:l}),[v])):null},O=u;return O===void 0&&h&&(O=-1,f.tabindex=O),p("span",Zt({role:"img"},f,{onClick:h,class:S}),[P()])};$n.props={spin:Boolean,rotate:Number,viewBox:String,ariaLabel:String};$n.inheritAttrs=!1;$n.displayName="Icon";const mi=$n,Ca=Q({__name:"index",emits:["chosenIcon"],setup(n,{emit:e}){const t=C(!1);function o(s){t.value!==s&&(t.value=s)}function i(s){e("chosenIcon",s),o(!1)}return(s,a)=>{const r=k("a-button"),l=k("a-space"),c=k("a-collapse-panel"),d=k("a-collapse"),u=k("a-tab-pane"),h=k("a-tabs"),f=k("a-popover");return _(),N(f,{visible:t.value,"onUpdate:visible":a[0]||(a[0]=v=>t.value=v),trigger:"click"},{content:m(()=>[p(h,{"tab-position":"bottom"},{default:m(()=>[(_(!0),R(ye,null,je(g(gs),(v,x)=>(_(),N(u,{key:x,tab:s.$t(`iconPicker.${x}`),"destroy-inactive-panel":""},{default:m(()=>[p(d,{"destroy-inactive-panel":"",ghost:"",accordion:""},{expandIcon:m(({isActive:y})=>[p(g(ms),{rotate:y?90:0},null,8,["rotate"])]),default:m(()=>[(_(!0),R(ye,null,je(v,(y,S)=>(_(),N(c,{key:S,header:s.$t(`iconPicker.${S}`),style:{"max-width":"200px"}},{default:m(()=>[p(l,{style:{"flex-wrap":"wrap","max-height":"200px",overflow:"auto"}},{default:m(()=>[(_(!0),R(ye,null,je(y,(w,I)=>(_(),N(r,{key:I,shape:"circle",onClick:T=>i(I)},{default:m(()=>[(_(),N(vt(w)))]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1032,["header"]))),128))]),_:2},1024)]),_:2},1032,["tab"]))),128))]),_:1})]),default:m(()=>[jt(s.$slots,"default",{},void 0,!0)]),_:3},8,["visible"])}}}),ka=ne(Ca,[["__scopeId","data-v-df8fe00b"]]),Sa=Q({__name:"Icon",props:{icon:null},setup(n){const t=C(gn(n.icon));return(o,i)=>(_(),N(vt(t.value)))}}),Gt=ne(Sa,[["__scopeId","data-v-3995670d"]]),$a=n=>(tt("data-v-bdd82b99"),n=n(),nt(),n),Ia={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"},Oa=$a(()=>b("g",{id:"canvas"},[b("path",{class:"canvas",d:"M 15 15 H 0 V 0 H 15 Z"})],-1)),Ma={id:"level-1"},Ta=["fill"],Aa=["fill"],Da=["fill"],La=Q({__name:"SideBarIcon",props:{lineColor:{default:"var(--static-text-color)"},bgColor:{default:"var(--primary-bg-color)"},isFill:{type:Boolean,default:!1}},setup(n){return(e,t)=>(_(),R("svg",Ia,[Oa,b("g",Ma,[b("path",{class:"line",fill:n.lineColor,d:"M 13 1 H 2 L 1 2 V 13 L 2 14 H 13 L 14 13 V 2 L 13 1 Z"},null,8,Ta),b("path",{class:"content left",fill:n.bgColor,d:"M 2 2 v 11 h 7 V 2 Z"},null,8,Aa),b("path",{class:"content right",fill:n.isFill?n.lineColor:n.bgColor,d:"M 10 2 v 11 h 3 V 2 Z"},null,8,Da)])]))}}),Ra=ne(La,[["__scopeId","data-v-bdd82b99"]]),gi=n=>(tt("data-v-43486b07"),n=n(),nt(),n),Na={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},Pa=gi(()=>b("g",{id:"canvas"},[b("path",{class:"canvas",d:"M16,0V16H0V0Z"})],-1)),Fa=["transform"],Ua=gi(()=>b("path",{class:"light-default",d:"M14,4.293,14.707,5,8.354,11.354H7.646L1.293,5,2,4.293l6,6Z"},null,-1)),Ba=[Ua];var vi=(n=>(n.right="rotate(-90)",n.left="rotate(90)",n.top="rotate(180)",n.bottom="rotate(0)",n))(vi||{});const za=Q({__name:"RightAngleIcon",props:{type:{default:"right"}},setup(n){return(e,t)=>(_(),R("svg",Na,[Pa,b("g",{id:"level-1",transform:vi[n.type]},Ba,8,Fa)]))}}),Ha=ne(za,[["__scopeId","data-v-43486b07"]]);async function Wa(){const n=await se.getCategoryTree(),e=await ho(),t=[];for(let o=0;o<n.length;o++)t.push(ja(n[o],e));return t}function ja(n,e){const t=de.exports.cloneDeep(n);return e.map(({category:o,id:i})=>{o.map(s=>{s===n.key&&(t.extIds||(t.extIds=[]),t.extIds.push(i))})}),t}function In(n,e){const t=e.find(o=>o.key===n);return t==null?void 0:t.icon}function Va(n){const e=J.find(t=>t.id===n);if(!e)throw new Error("Extension config not found.");return e.category}const _i={HOME:"home"};async function yi(){const e=(await se.getCategoryTree()).filter(t=>!t.disabled);return[{key:_i.HOME,icon:"HomeOutlined"},...e]}async function wi(n){var o;const e=await Wa();if(n==="all"){const i=new Set;return e.map(s=>{var a;return(a=s.extIds)==null?void 0:a.map(r=>i.add(r))}),Array.from(i)}const t=e.find(i=>i.key===n);return t?(o=t.extIds)!=null?o:[]:(console.error("category not found"),[])}const Ka={key:0},Ga={key:1},Ya=Q({__name:"CategoryName",props:{categoryLeaf:null},setup(n){return(e,t)=>n.categoryLeaf.type&&n.categoryLeaf.type==="custom"?(_(),R("span",Ka,$(n.categoryLeaf.name),1)):(_(),R("span",Ga,$(e.$t(`category.${n.categoryLeaf.key}.label`)),1))}});const xi=ne(Ya,[["__scopeId","data-v-de92d2af"]]),Xa=Q({__name:"EditCategory",props:{extId:null},emits:["afterClose"],setup(n,{emit:e}){const t=n,{t:o}=Ye(),i=C(!1);function s(x){x!==i.value&&(i.value=x)}const a=C([]),r=vn({category:null}),l=vn({category:[{required:!0,message:o("curatedCards.editCategory.atLeastOne"),trigger:"change"}]}),{resetFields:c,validate:d,validateInfos:u,mergeValidateInfo:h}=oi(r,l);re(()=>t.extId,async x=>{if(x===null)s(!1),r.category=null;else{s(!0);const y=await se.getCategoryTree();a.value=y.filter(w=>w.key!==_t.STAR&&w.key!==_t.ALL);const S=await se.getCustomExtensionConfig(x);S&&S.category&&S.category.length>0?r.category=S.category:r.category=Va(x)}},{immediate:!0});async function f(){try{if(await d(),!t.extId)throw new Error("extId is null");const x=ln(r).category,y=await se.getCustomExtensionConfig(t.extId);se.setCustomExtensionConfig({...y,id:t.extId,category:x}),s(!1)}catch(x){console.error(x)}}function v(){e("afterClose")}return(x,y)=>{const S=k("a-checkbox"),w=k("a-checkbox-group"),I=k("a-form-item"),T=k("a-form"),P=k("a-modal");return _(),N(P,{visible:i.value,title:x.$t("curatedCards.editCategory.title"),class:"edit-category-wrapper","z-index":2e3,"destroy-on-close":"","after-close":v,onOk:f,onCancel:y[1]||(y[1]=O=>s(!1))},{default:m(()=>[p(T,null,{default:m(()=>[p(I,Zn({required:""},g(u).category),{default:m(()=>[r.category!==null?(_(),N(w,{key:0,value:r.category,"onUpdate:value":y[0]||(y[0]=O=>r.category=O),class:"edit-category-wrap"},{default:m(()=>[(_(!0),R(ye,null,je(a.value,O=>(_(),N(S,{key:O.key,value:O.key},{default:m(()=>[p(xi,{"category-leaf":O},null,8,["category-leaf"])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])):z("",!0)]),_:1},16)]),_:1})]),_:1},8,["visible","title"])}}});const qa=ne(Xa,[["__scopeId","data-v-f10428f7"]]);async function bi(n){const e=await se.getExtIdsOfCategoryLeaf(_t.STAR),t=de.exports.cloneDeep(n);return e.length<=0||n.map((o,i)=>{e.find(a=>a===o.id)!==void 0&&(t[i].isStarred=!0)}),t}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Oo(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,o)}return t}function Ke(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oo(Object(t),!0).forEach(function(o){Za(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Oo(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function dn(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dn=function(e){return typeof e}:dn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(n)}function Za(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qe(){return Qe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Qe.apply(this,arguments)}function Ja(n,e){if(n==null)return{};var t={},o=Object.keys(n),i,s;for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Qa(n,e){if(n==null)return{};var t=Ja(n,e),o,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)o=s[i],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,o)||(t[o]=n[o]))}return t}var er="1.15.0";function Je(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var ot=Je(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Yt=Je(/Edge/i),Mo=Je(/firefox/i),Ut=Je(/safari/i)&&!Je(/chrome/i)&&!Je(/android/i),Ei=Je(/iP(ad|od|hone)/i),Ci=Je(/chrome/i)&&Je(/android/i),ki={capture:!1,passive:!1};function ie(n,e,t){n.addEventListener(e,t,!ot&&ki)}function oe(n,e,t){n.removeEventListener(e,t,!ot&&ki)}function wn(n,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function tr(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Be(n,e,t,o){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&wn(n,e):wn(n,e))||o&&n===t)return n;if(n===t)break}while(n=tr(n))}return null}var To=/\s+/g;function Oe(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var o=(" "+n.className+" ").replace(To," ").replace(" "+e+" "," ");n.className=(o+(t?" "+e:"")).replace(To," ")}}function j(n,e,t){var o=n&&n.style;if(o){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=t+(typeof t=="string"?"":"px")}}function Ot(n,e){var t="";if(typeof n=="string")t=n;else do{var o=j(n,"transform");o&&o!=="none"&&(t=o+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function Si(n,e,t){if(n){var o=n.getElementsByTagName(e),i=0,s=o.length;if(t)for(;i<s;i++)t(o[i],i);return o}return[]}function Ve(){var n=document.scrollingElement;return n||document.documentElement}function _e(n,e,t,o,i){if(!(!n.getBoundingClientRect&&n!==window)){var s,a,r,l,c,d,u;if(n!==window&&n.parentNode&&n!==Ve()?(s=n.getBoundingClientRect(),a=s.top,r=s.left,l=s.bottom,c=s.right,d=s.height,u=s.width):(a=0,r=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!ot))do if(i&&i.getBoundingClientRect&&(j(i,"transform")!=="none"||t&&j(i,"position")!=="static")){var h=i.getBoundingClientRect();a-=h.top+parseInt(j(i,"border-top-width")),r-=h.left+parseInt(j(i,"border-left-width")),l=a+s.height,c=r+s.width;break}while(i=i.parentNode);if(o&&n!==window){var f=Ot(i||n),v=f&&f.a,x=f&&f.d;f&&(a/=x,r/=v,u/=v,d/=x,l=a+d,c=r+u)}return{top:a,left:r,bottom:l,right:c,width:u,height:d}}}function Ao(n,e,t){for(var o=lt(n,!0),i=_e(n)[e];o;){var s=_e(o)[t],a=void 0;if(t==="top"||t==="left"?a=i>=s:a=i<=s,!a)return o;if(o===Ve())break;o=lt(o,!1)}return!1}function Mt(n,e,t,o){for(var i=0,s=0,a=n.children;s<a.length;){if(a[s].style.display!=="none"&&a[s]!==H.ghost&&(o||a[s]!==H.dragged)&&Be(a[s],t.draggable,n,!1)){if(i===e)return a[s];i++}s++}return null}function go(n,e){for(var t=n.lastElementChild;t&&(t===H.ghost||j(t,"display")==="none"||e&&!wn(t,e));)t=t.previousElementSibling;return t||null}function Le(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==H.clone&&(!e||wn(n,e))&&t++;return t}function Do(n){var e=0,t=0,o=Ve();if(n)do{var i=Ot(n),s=i.a,a=i.d;e+=n.scrollLeft*s,t+=n.scrollTop*a}while(n!==o&&(n=n.parentNode));return[e,t]}function nr(n,e){for(var t in n)if(!!n.hasOwnProperty(t)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===n[t][o])return Number(t)}return-1}function lt(n,e){if(!n||!n.getBoundingClientRect)return Ve();var t=n,o=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=j(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Ve();if(o||e)return t;o=!0}}while(t=t.parentNode);return Ve()}function or(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Ln(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Bt;function $i(n,e){return function(){if(!Bt){var t=arguments,o=this;t.length===1?n.call(o,t[0]):n.apply(o,t),Bt=setTimeout(function(){Bt=void 0},e)}}}function ir(){clearTimeout(Bt),Bt=void 0}function Ii(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function Oi(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}var De="Sortable"+new Date().getTime();function sr(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(i){if(!(j(i,"display")==="none"||i===H.ghost)){n.push({target:i,rect:_e(i)});var s=Ke({},n[n.length-1].rect);if(i.thisAnimationDuration){var a=Ot(i,!0);a&&(s.top-=a.f,s.left-=a.e)}i.fromRect=s}})}},addAnimationState:function(o){n.push(o)},removeAnimationState:function(o){n.splice(nr(n,{target:o}),1)},animateAll:function(o){var i=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var s=!1,a=0;n.forEach(function(r){var l=0,c=r.target,d=c.fromRect,u=_e(c),h=c.prevFromRect,f=c.prevToRect,v=r.rect,x=Ot(c,!0);x&&(u.top-=x.f,u.left-=x.e),c.toRect=u,c.thisAnimationDuration&&Ln(h,u)&&!Ln(d,u)&&(v.top-u.top)/(v.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=rr(v,h,f,i.options)),Ln(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=i.options.animation),i.animate(c,v,u,l)),l&&(s=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof o=="function"&&o()},a):typeof o=="function"&&o(),n=[]},animate:function(o,i,s,a){if(a){j(o,"transition",""),j(o,"transform","");var r=Ot(this.el),l=r&&r.a,c=r&&r.d,d=(i.left-s.left)/(l||1),u=(i.top-s.top)/(c||1);o.animatingX=!!d,o.animatingY=!!u,j(o,"transform","translate3d("+d+"px,"+u+"px,0)"),this.forRepaintDummy=ar(o),j(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),j(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){j(o,"transition",""),j(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}function ar(n){return n.offsetWidth}function rr(n,e,t,o){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*o.animation}var bt=[],Rn={initializeByDefault:!0},Xt={mount:function(e){for(var t in Rn)Rn.hasOwnProperty(t)&&!(t in e)&&(e[t]=Rn[t]);bt.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),bt.push(e)},pluginEvent:function(e,t,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var s=e+"Global";bt.forEach(function(a){!t[a.pluginName]||(t[a.pluginName][s]&&t[a.pluginName][s](Ke({sortable:t},o)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](Ke({sortable:t},o)))})},initializePlugins:function(e,t,o,i){bt.forEach(function(r){var l=r.pluginName;if(!(!e.options[l]&&!r.initializeByDefault)){var c=new r(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,Qe(o,c.defaults)}});for(var s in e.options)if(!!e.options.hasOwnProperty(s)){var a=this.modifyOption(e,s,e.options[s]);typeof a<"u"&&(e.options[s]=a)}},getEventProperties:function(e,t){var o={};return bt.forEach(function(i){typeof i.eventProperties=="function"&&Qe(o,i.eventProperties.call(t[i.pluginName],e))}),o},modifyOption:function(e,t,o){var i;return bt.forEach(function(s){!e[s.pluginName]||s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],o))}),i}};function lr(n){var e=n.sortable,t=n.rootEl,o=n.name,i=n.targetEl,s=n.cloneEl,a=n.toEl,r=n.fromEl,l=n.oldIndex,c=n.newIndex,d=n.oldDraggableIndex,u=n.newDraggableIndex,h=n.originalEvent,f=n.putSortable,v=n.extraEventProperties;if(e=e||t&&t[De],!!e){var x,y=e.options,S="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!ot&&!Yt?x=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent(o,!0,!0)),x.to=a||t,x.from=r||t,x.item=i||t,x.clone=s,x.oldIndex=l,x.newIndex=c,x.oldDraggableIndex=d,x.newDraggableIndex=u,x.originalEvent=h,x.pullMode=f?f.lastPutMode:void 0;var w=Ke(Ke({},v),Xt.getEventProperties(o,e));for(var I in w)x[I]=w[I];t&&t.dispatchEvent(x),y[S]&&y[S].call(e,x)}}var cr=["evt"],$e=function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.evt,s=Qa(o,cr);Xt.pluginEvent.bind(H)(e,t,Ke({dragEl:L,parentEl:me,ghostEl:X,rootEl:ue,nextEl:pt,lastDownEl:hn,cloneEl:pe,cloneHidden:at,dragStarted:Nt,putSortable:xe,activeSortable:H.active,originalEvent:i,oldIndex:$t,oldDraggableIndex:zt,newIndex:Me,newDraggableIndex:st,hideGhostForTarget:Di,unhideGhostForTarget:Li,cloneNowHidden:function(){at=!0},cloneNowShown:function(){at=!1},dispatchSortableEvent:function(r){Ce({sortable:t,name:r,originalEvent:i})}},s))};function Ce(n){lr(Ke({putSortable:xe,cloneEl:pe,targetEl:L,rootEl:ue,oldIndex:$t,oldDraggableIndex:zt,newIndex:Me,newDraggableIndex:st},n))}var L,me,X,ue,pt,hn,pe,at,$t,Me,zt,st,Jt,xe,Ct=!1,xn=!1,bn=[],dt,Pe,Nn,Pn,Lo,Ro,Nt,Et,Ht,Wt=!1,Qt=!1,pn,Ee,Fn=[],Jn=!1,En=[],On=typeof document<"u",en=Ei,No=Yt||ot?"cssFloat":"float",ur=On&&!Ci&&!Ei&&"draggable"in document.createElement("div"),Mi=function(){if(!!On){if(ot)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Ti=function(e,t){var o=j(e),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=Mt(e,0,t),a=Mt(e,1,t),r=s&&j(s),l=a&&j(a),c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+_e(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+_e(a).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&r.float&&r.float!=="none"){var u=r.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return s&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||c>=i&&o[No]==="none"||a&&o[No]==="none"&&c+d>i)?"vertical":"horizontal"},dr=function(e,t,o){var i=o?e.left:e.top,s=o?e.right:e.bottom,a=o?e.width:e.height,r=o?t.left:t.top,l=o?t.right:t.bottom,c=o?t.width:t.height;return i===r||s===l||i+a/2===r+c/2},hr=function(e,t){var o;return bn.some(function(i){var s=i[De].options.emptyInsertThreshold;if(!(!s||go(i))){var a=_e(i),r=e>=a.left-s&&e<=a.right+s,l=t>=a.top-s&&t<=a.bottom+s;if(r&&l)return o=i}}),o},Ai=function(e){function t(s,a){return function(r,l,c,d){var u=r.options.group.name&&l.options.group.name&&r.options.group.name===l.options.group.name;if(s==null&&(a||u))return!0;if(s==null||s===!1)return!1;if(a&&s==="clone")return s;if(typeof s=="function")return t(s(r,l,c,d),a)(r,l,c,d);var h=(a?r:l).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var o={},i=e.group;(!i||dn(i)!="object")&&(i={name:i}),o.name=i.name,o.checkPull=t(i.pull,!0),o.checkPut=t(i.put),o.revertClone=i.revertClone,e.group=o},Di=function(){!Mi&&X&&j(X,"display","none")},Li=function(){!Mi&&X&&j(X,"display","")};On&&!Ci&&document.addEventListener("click",function(n){if(xn)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),xn=!1,!1},!0);var ht=function(e){if(L){e=e.touches?e.touches[0]:e;var t=hr(e.clientX,e.clientY);if(t){var o={};for(var i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[De]._onDragOver(o)}}},pr=function(e){L&&L.parentNode[De]._isOutsideThisEl(e.target)};function H(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Qe({},e),n[De]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ti(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,r){a.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:H.supportPointer!==!1&&"PointerEvent"in window&&!Ut,emptyInsertThreshold:5};Xt.initializePlugins(this,n,t);for(var o in t)!(o in e)&&(e[o]=t[o]);Ai(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:ur,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ie(n,"pointerdown",this._onTapStart):(ie(n,"mousedown",this._onTapStart),ie(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(ie(n,"dragover",this),ie(n,"dragenter",this)),bn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qe(this,sr())}H.prototype={constructor:H,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Et=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,L):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var t=this,o=this.el,i=this.options,s=i.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(r||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(xr(o),!L&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ut&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Be(l,i.draggable,o,!1),!(l&&l.animated)&&hn!==l)){if($t=Le(l),zt=Le(l,i.draggable),typeof d=="function"){if(d.call(this,e,l,this)){Ce({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:o,fromEl:o}),$e("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=Be(c,u.trim(),o,!1),u)return Ce({sortable:t,rootEl:u,name:"filter",targetEl:l,fromEl:o,toEl:o}),$e("filter",t,{evt:e}),!0}),d)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Be(c,i.handle,o,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,o){var i=this,s=i.el,a=i.options,r=s.ownerDocument,l;if(o&&!L&&o.parentNode===s){var c=_e(o);if(ue=s,L=o,me=L.parentNode,pt=L.nextSibling,hn=o,Jt=a.group,H.dragged=L,dt={target:L,clientX:(t||e).clientX,clientY:(t||e).clientY},Lo=dt.clientX-c.left,Ro=dt.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,L.style["will-change"]="all",l=function(){if($e("delayEnded",i,{evt:e}),H.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Mo&&i.nativeDraggable&&(L.draggable=!0),i._triggerDragStart(e,t),Ce({sortable:i,name:"choose",originalEvent:e}),Oe(L,a.chosenClass,!0)},a.ignore.split(",").forEach(function(d){Si(L,d.trim(),Un)}),ie(r,"dragover",ht),ie(r,"mousemove",ht),ie(r,"touchmove",ht),ie(r,"mouseup",i._onDrop),ie(r,"touchend",i._onDrop),ie(r,"touchcancel",i._onDrop),Mo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,L.draggable=!0),$e("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Yt||ot))){if(H.eventCanceled){this._onDrop();return}ie(r,"mouseup",i._disableDelayedDrag),ie(r,"touchend",i._disableDelayedDrag),ie(r,"touchcancel",i._disableDelayedDrag),ie(r,"mousemove",i._delayedDragTouchMoveHandler),ie(r,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&ie(r,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){L&&Un(L),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;oe(e,"mouseup",this._disableDelayedDrag),oe(e,"touchend",this._disableDelayedDrag),oe(e,"touchcancel",this._disableDelayedDrag),oe(e,"mousemove",this._delayedDragTouchMoveHandler),oe(e,"touchmove",this._delayedDragTouchMoveHandler),oe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?ie(document,"pointermove",this._onTouchMove):t?ie(document,"touchmove",this._onTouchMove):ie(document,"mousemove",this._onTouchMove):(ie(L,"dragend",this),ie(ue,"dragstart",this._onDragStart));try{document.selection?fn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ct=!1,ue&&L){$e("dragStarted",this,{evt:t}),this.nativeDraggable&&ie(document,"dragover",pr);var o=this.options;!e&&Oe(L,o.dragClass,!1),Oe(L,o.ghostClass,!0),H.active=this,e&&this._appendGhost(),Ce({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Pe){this._lastX=Pe.clientX,this._lastY=Pe.clientY,Di();for(var e=document.elementFromPoint(Pe.clientX,Pe.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Pe.clientX,Pe.clientY),e!==t);)t=e;if(L.parentNode[De]._isOutsideThisEl(e),t)do{if(t[De]){var o=void 0;if(o=t[De]._onDragOver({clientX:Pe.clientX,clientY:Pe.clientY,target:e,rootEl:t}),o&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Li()}},_onTouchMove:function(e){if(dt){var t=this.options,o=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,a=X&&Ot(X,!0),r=X&&a&&a.a,l=X&&a&&a.d,c=en&&Ee&&Do(Ee),d=(s.clientX-dt.clientX+i.x)/(r||1)+(c?c[0]-Fn[0]:0)/(r||1),u=(s.clientY-dt.clientY+i.y)/(l||1)+(c?c[1]-Fn[1]:0)/(l||1);if(!H.active&&!Ct){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(X){a?(a.e+=d-(Nn||0),a.f+=u-(Pn||0)):a={a:1,b:0,c:0,d:1,e:d,f:u};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");j(X,"webkitTransform",h),j(X,"mozTransform",h),j(X,"msTransform",h),j(X,"transform",h),Nn=d,Pn=u,Pe=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!X){var e=this.options.fallbackOnBody?document.body:ue,t=_e(L,!0,en,!0,e),o=this.options;if(en){for(Ee=e;j(Ee,"position")==="static"&&j(Ee,"transform")==="none"&&Ee!==document;)Ee=Ee.parentNode;Ee!==document.body&&Ee!==document.documentElement?(Ee===document&&(Ee=Ve()),t.top+=Ee.scrollTop,t.left+=Ee.scrollLeft):Ee=Ve(),Fn=Do(Ee)}X=L.cloneNode(!0),Oe(X,o.ghostClass,!1),Oe(X,o.fallbackClass,!0),Oe(X,o.dragClass,!0),j(X,"transition",""),j(X,"transform",""),j(X,"box-sizing","border-box"),j(X,"margin",0),j(X,"top",t.top),j(X,"left",t.left),j(X,"width",t.width),j(X,"height",t.height),j(X,"opacity","0.8"),j(X,"position",en?"absolute":"fixed"),j(X,"zIndex","100000"),j(X,"pointerEvents","none"),H.ghost=X,e.appendChild(X),j(X,"transform-origin",Lo/parseInt(X.style.width)*100+"% "+Ro/parseInt(X.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,i=e.dataTransfer,s=o.options;if($e("dragStart",this,{evt:e}),H.eventCanceled){this._onDrop();return}$e("setupClone",this),H.eventCanceled||(pe=Oi(L),pe.removeAttribute("id"),pe.draggable=!1,pe.style["will-change"]="",this._hideClone(),Oe(pe,this.options.chosenClass,!1),H.clone=pe),o.cloneId=fn(function(){$e("clone",o),!H.eventCanceled&&(o.options.removeCloneOnHide||ue.insertBefore(pe,L),o._hideClone(),Ce({sortable:o,name:"clone"}))}),!t&&Oe(L,s.dragClass,!0),t?(xn=!0,o._loopId=setInterval(o._emulateDragOver,50)):(oe(document,"mouseup",o._onDrop),oe(document,"touchend",o._onDrop),oe(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(o,i,L)),ie(document,"drop",o),j(L,"transform","translateZ(0)")),Ct=!0,o._dragStartId=fn(o._dragStarted.bind(o,t,e)),ie(document,"selectstart",o),Nt=!0,Ut&&j(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,o=e.target,i,s,a,r=this.options,l=r.group,c=H.active,d=Jt===l,u=r.sort,h=xe||c,f,v=this,x=!1;if(Jn)return;function y(ke,le){$e(ke,v,Ke({evt:e,isOwner:d,axis:f?"vertical":"horizontal",revert:a,dragRect:i,targetRect:s,canSort:u,fromSortable:h,target:o,completed:w,onMove:function(qt,Tn){return tn(ue,t,L,i,qt,_e(qt),e,Tn)},changed:I},le))}function S(){y("dragOverAnimationCapture"),v.captureAnimationState(),v!==h&&h.captureAnimationState()}function w(ke){return y("dragOverCompleted",{insertion:ke}),ke&&(d?c._hideClone():c._showClone(v),v!==h&&(Oe(L,xe?xe.options.ghostClass:c.options.ghostClass,!1),Oe(L,r.ghostClass,!0)),xe!==v&&v!==H.active?xe=v:v===H.active&&xe&&(xe=null),h===v&&(v._ignoreWhileAnimating=o),v.animateAll(function(){y("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(o===L&&!L.animated||o===t&&!o.animated)&&(Et=null),!r.dragoverBubble&&!e.rootEl&&o!==document&&(L.parentNode[De]._isOutsideThisEl(e.target),!ke&&ht(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),x=!0}function I(){Me=Le(L),st=Le(L,r.draggable),Ce({sortable:v,name:"change",toEl:t,newIndex:Me,newDraggableIndex:st,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=Be(o,r.draggable,t,!0),y("dragOver"),H.eventCanceled)return x;if(L.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||v._ignoreWhileAnimating===o)return w(!1);if(xn=!1,c&&!r.disabled&&(d?u||(a=me!==ue):xe===this||(this.lastPutMode=Jt.checkPull(this,c,L,e))&&l.checkPut(this,c,L,e))){if(f=this._getDirection(e,o)==="vertical",i=_e(L),y("dragOverValid"),H.eventCanceled)return x;if(a)return me=ue,S(),this._hideClone(),y("revert"),H.eventCanceled||(pt?ue.insertBefore(L,pt):ue.appendChild(L)),w(!0);var T=go(t,r.draggable);if(!T||vr(e,f,this)&&!T.animated){if(T===L)return w(!1);if(T&&t===e.target&&(o=T),o&&(s=_e(o)),tn(ue,t,L,i,o,s,e,!!o)!==!1)return S(),T&&T.nextSibling?t.insertBefore(L,T.nextSibling):t.appendChild(L),me=t,I(),w(!0)}else if(T&&gr(e,f,this)){var P=Mt(t,0,r,!0);if(P===L)return w(!1);if(o=P,s=_e(o),tn(ue,t,L,i,o,s,e,!1)!==!1)return S(),t.insertBefore(L,P),me=t,I(),w(!0)}else if(o.parentNode===t){s=_e(o);var O=0,A,D=L.parentNode!==t,E=!dr(L.animated&&L.toRect||i,o.animated&&o.toRect||s,f),K=f?"top":"left",F=Ao(o,"top","top")||Ao(L,"top","top"),Z=F?F.scrollTop:void 0;Et!==o&&(A=s[K],Wt=!1,Qt=!E&&r.invertSwap||D),O=_r(e,o,s,f,E?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,Qt,Et===o);var q;if(O!==0){var ae=Le(L);do ae-=O,q=me.children[ae];while(q&&(j(q,"display")==="none"||q===X))}if(O===0||q===o)return w(!1);Et=o,Ht=O;var B=o.nextElementSibling,G=!1;G=O===1;var we=tn(ue,t,L,i,o,s,e,G);if(we!==!1)return(we===1||we===-1)&&(G=we===1),Jn=!0,setTimeout(mr,30),S(),G&&!B?t.appendChild(L):o.parentNode.insertBefore(L,G?B:o),F&&Ii(F,0,Z-F.scrollTop),me=L.parentNode,A!==void 0&&!Qt&&(pn=Math.abs(A-_e(o)[K])),I(),w(!0)}if(t.contains(L))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){oe(document,"mousemove",this._onTouchMove),oe(document,"touchmove",this._onTouchMove),oe(document,"pointermove",this._onTouchMove),oe(document,"dragover",ht),oe(document,"mousemove",ht),oe(document,"touchmove",ht)},_offUpEvents:function(){var e=this.el.ownerDocument;oe(e,"mouseup",this._onDrop),oe(e,"touchend",this._onDrop),oe(e,"pointerup",this._onDrop),oe(e,"touchcancel",this._onDrop),oe(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;if(Me=Le(L),st=Le(L,o.draggable),$e("drop",this,{evt:e}),me=L&&L.parentNode,Me=Le(L),st=Le(L,o.draggable),H.eventCanceled){this._nulling();return}Ct=!1,Qt=!1,Wt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Qn(this.cloneId),Qn(this._dragStartId),this.nativeDraggable&&(oe(document,"drop",this),oe(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ut&&j(document.body,"user-select",""),j(L,"transform",""),e&&(Nt&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),X&&X.parentNode&&X.parentNode.removeChild(X),(ue===me||xe&&xe.lastPutMode!=="clone")&&pe&&pe.parentNode&&pe.parentNode.removeChild(pe),L&&(this.nativeDraggable&&oe(L,"dragend",this),Un(L),L.style["will-change"]="",Nt&&!Ct&&Oe(L,xe?xe.options.ghostClass:this.options.ghostClass,!1),Oe(L,this.options.chosenClass,!1),Ce({sortable:this,name:"unchoose",toEl:me,newIndex:null,newDraggableIndex:null,originalEvent:e}),ue!==me?(Me>=0&&(Ce({rootEl:me,name:"add",toEl:me,fromEl:ue,originalEvent:e}),Ce({sortable:this,name:"remove",toEl:me,originalEvent:e}),Ce({rootEl:me,name:"sort",toEl:me,fromEl:ue,originalEvent:e}),Ce({sortable:this,name:"sort",toEl:me,originalEvent:e})),xe&&xe.save()):Me!==$t&&Me>=0&&(Ce({sortable:this,name:"update",toEl:me,originalEvent:e}),Ce({sortable:this,name:"sort",toEl:me,originalEvent:e})),H.active&&((Me==null||Me===-1)&&(Me=$t,st=zt),Ce({sortable:this,name:"end",toEl:me,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){$e("nulling",this),ue=L=me=X=pt=pe=hn=at=dt=Pe=Nt=Me=st=$t=zt=Et=Ht=xe=Jt=H.dragged=H.ghost=H.clone=H.active=null,En.forEach(function(e){e.checked=!0}),En.length=Nn=Pn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":L&&(this._onDragOver(e),fr(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,o=this.el.children,i=0,s=o.length,a=this.options;i<s;i++)t=o[i],Be(t,a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||wr(t));return e},sort:function(e,t){var o={},i=this.el;this.toArray().forEach(function(s,a){var r=i.children[a];Be(r,this.options.draggable,i,!1)&&(o[s]=r)},this),t&&this.captureAnimationState(),e.forEach(function(s){o[s]&&(i.removeChild(o[s]),i.appendChild(o[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Be(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(t===void 0)return o[e];var i=Xt.modifyOption(this,e,t);typeof i<"u"?o[e]=i:o[e]=t,e==="group"&&Ai(o)},destroy:function(){$e("destroy",this);var e=this.el;e[De]=null,oe(e,"mousedown",this._onTapStart),oe(e,"touchstart",this._onTapStart),oe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(oe(e,"dragover",this),oe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bn.splice(bn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!at){if($e("hideClone",this),H.eventCanceled)return;j(pe,"display","none"),this.options.removeCloneOnHide&&pe.parentNode&&pe.parentNode.removeChild(pe),at=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(at){if($e("showClone",this),H.eventCanceled)return;L.parentNode==ue&&!this.options.group.revertClone?ue.insertBefore(pe,L):pt?ue.insertBefore(pe,pt):ue.appendChild(pe),this.options.group.revertClone&&this.animate(L,pe),j(pe,"display",""),at=!1}}};function fr(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function tn(n,e,t,o,i,s,a,r){var l,c=n[De],d=c.options.onMove,u;return window.CustomEvent&&!ot&&!Yt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=o,l.related=i||e,l.relatedRect=s||_e(e),l.willInsertAfter=r,l.originalEvent=a,n.dispatchEvent(l),d&&(u=d.call(c,l,a)),u}function Un(n){n.draggable=!1}function mr(){Jn=!1}function gr(n,e,t){var o=_e(Mt(t.el,0,t.options,!0)),i=10;return e?n.clientX<o.left-i||n.clientY<o.top&&n.clientX<o.right:n.clientY<o.top-i||n.clientY<o.bottom&&n.clientX<o.left}function vr(n,e,t){var o=_e(go(t.el,t.options.draggable)),i=10;return e?n.clientX>o.right+i||n.clientX<=o.right&&n.clientY>o.bottom&&n.clientX>=o.left:n.clientX>o.right&&n.clientY>o.top||n.clientX<=o.right&&n.clientY>o.bottom+i}function _r(n,e,t,o,i,s,a,r){var l=o?n.clientY:n.clientX,c=o?t.height:t.width,d=o?t.top:t.left,u=o?t.bottom:t.right,h=!1;if(!a){if(r&&pn<c*i){if(!Wt&&(Ht===1?l>d+c*s/2:l<u-c*s/2)&&(Wt=!0),Wt)h=!0;else if(Ht===1?l<d+pn:l>u-pn)return-Ht}else if(l>d+c*(1-i)/2&&l<u-c*(1-i)/2)return yr(e)}return h=h||a,h&&(l<d+c*s/2||l>u-c*s/2)?l>d+c/2?1:-1:0}function yr(n){return Le(L)<Le(n)?1:-1}function wr(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,o=0;t--;)o+=e.charCodeAt(t);return o.toString(36)}function xr(n){En.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var o=e[t];o.checked&&En.push(o)}}function fn(n){return setTimeout(n,0)}function Qn(n){return clearTimeout(n)}On&&ie(document,"touchmove",function(n){(H.active||Ct)&&n.cancelable&&n.preventDefault()});H.utils={on:ie,off:oe,css:j,find:Si,is:function(e,t){return!!Be(e,t,e,!1)},extend:or,throttle:$i,closest:Be,toggleClass:Oe,clone:Oi,index:Le,nextTick:fn,cancelNextTick:Qn,detectDirection:Ti,getChild:Mt};H.get=function(n){return n[De]};H.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(H.utils=Ke(Ke({},H.utils),o.utils)),Xt.mount(o)})};H.create=function(n,e){return new H(n,e)};H.version=er;var ge=[],Pt,eo,to=!1,Bn,zn,Cn,Ft;function br(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var o=t.originalEvent;this.sortable.nativeDraggable?ie(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ie(document,"pointermove",this._handleFallbackAutoScroll):o.touches?ie(document,"touchmove",this._handleFallbackAutoScroll):ie(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var o=t.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?oe(document,"dragover",this._handleAutoScroll):(oe(document,"pointermove",this._handleFallbackAutoScroll),oe(document,"touchmove",this._handleFallbackAutoScroll),oe(document,"mousemove",this._handleFallbackAutoScroll)),Po(),mn(),ir()},nulling:function(){Cn=eo=Pt=to=Ft=Bn=zn=null,ge.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,o){var i=this,s=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(s,a);if(Cn=t,o||this.options.forceAutoScrollFallback||Yt||ot||Ut){Hn(t,this.options,r,o);var l=lt(r,!0);to&&(!Ft||s!==Bn||a!==zn)&&(Ft&&Po(),Ft=setInterval(function(){var c=lt(document.elementFromPoint(s,a),!0);c!==l&&(l=c,mn()),Hn(t,i.options,c,o)},10),Bn=s,zn=a)}else{if(!this.options.bubbleScroll||lt(r,!0)===Ve()){mn();return}Hn(t,this.options,lt(r,!1),!1)}}},Qe(n,{pluginName:"scroll",initializeByDefault:!0})}function mn(){ge.forEach(function(n){clearInterval(n.pid)}),ge=[]}function Po(){clearInterval(Ft)}var Hn=$i(function(n,e,t,o){if(!!e.scroll){var i=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,a=e.scrollSensitivity,r=e.scrollSpeed,l=Ve(),c=!1,d;eo!==t&&(eo=t,mn(),Pt=e.scroll,d=e.scrollFn,Pt===!0&&(Pt=lt(t,!0)));var u=0,h=Pt;do{var f=h,v=_e(f),x=v.top,y=v.bottom,S=v.left,w=v.right,I=v.width,T=v.height,P=void 0,O=void 0,A=f.scrollWidth,D=f.scrollHeight,E=j(f),K=f.scrollLeft,F=f.scrollTop;f===l?(P=I<A&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),O=T<D&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(P=I<A&&(E.overflowX==="auto"||E.overflowX==="scroll"),O=T<D&&(E.overflowY==="auto"||E.overflowY==="scroll"));var Z=P&&(Math.abs(w-i)<=a&&K+I<A)-(Math.abs(S-i)<=a&&!!K),q=O&&(Math.abs(y-s)<=a&&F+T<D)-(Math.abs(x-s)<=a&&!!F);if(!ge[u])for(var ae=0;ae<=u;ae++)ge[ae]||(ge[ae]={});(ge[u].vx!=Z||ge[u].vy!=q||ge[u].el!==f)&&(ge[u].el=f,ge[u].vx=Z,ge[u].vy=q,clearInterval(ge[u].pid),(Z!=0||q!=0)&&(c=!0,ge[u].pid=setInterval(function(){o&&this.layer===0&&H.active._onTouchMove(Cn);var B=ge[this.layer].vy?ge[this.layer].vy*r:0,G=ge[this.layer].vx?ge[this.layer].vx*r:0;typeof d=="function"&&d.call(H.dragged.parentNode[De],G,B,n,Cn,ge[this.layer].el)!=="continue"||Ii(ge[this.layer].el,G,B)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&h!==l&&(h=lt(h,!1)));to=c}},30),Ri=function(e){var t=e.originalEvent,o=e.putSortable,i=e.dragEl,s=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(!!t){var c=o||s;r();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(a("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function vo(){}vo.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=Mt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:Ri};Qe(vo,{pluginName:"revertOnSpill"});function _o(){}_o.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable,i=o||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Ri};Qe(_o,{pluginName:"removeOnSpill"});H.mount(new br);H.mount(_o,vo);const Er=["id","value","onClick"],Cr={class:"icon"},kr={class:"info"},Sr={class:"name"},$r={class:"operation"},Ir=Q({__name:"index",props:{originExtIds:null,hasOpeningExtension:{type:Boolean},currentCategory:null},emits:["openExtension","starExtension"],setup(n,{expose:e,emit:t}){const o=n,i=C(null);async function s(w,I){t("openExtension",w),i.value=w,!(I!=null&&I.silentReport)&&(r(w),Re.capture("OpenExtension",{extensionId:w,from:"curatedCards"}))}const a=wt();re(()=>a.path,async w=>{w.includes("extension")||(i.value=null)});const r=async w=>{const I=await mt(w);!I||(W.sendGAEvent({category:"Extension",action:"open_extension",eventLabel:I.id,eventValue:1}),W.sendGAPageView(I.id))},l=C([]),c=C(null);re(()=>o.originExtIds,async w=>{if(!w||w.length<=0){c.value=[];return}const I=await si(w);if(c.value=await bi(I),o.currentCategory){const T=await se.getExtIdsOfCategoryLeaf(o.currentCategory);if(T.length<=0)return;const P=[];for(let A=0;A<T.length;A++){const D=c.value.find(E=>E.id===T[A]);D&&P.push(D)}const O=c.value.filter(A=>!T.includes(A.id));c.value=[...P,...O]}},{immediate:!0}),re(i,async(w,I)=>{if(w!==null&&I==null){await d();const T=l.value.find(P=>P.getAttribute("value")===w);T==null||T.scrollIntoView({block:"center"})}});const d=()=>new Promise(w=>{const I=setInterval(()=>{c.value&&c.value.length>0&&l.value&&l.value.length>0&&l.value.length===c.value.length&&(clearInterval(I),w(!0))},100)}),u=async w=>{if(!c.value)throw console.error("hydratedExtConfigs.value is null"),new Error("hydratedExtConfigs.value is null");const I=c.value.findIndex(T=>T.id===w);if(I>=0){const T=!c.value[I].isStarred;T?(await se.favoriteExtension(w),o.currentCategory&&f(w),W.sendGAEvent({category:"Extension",action:"Star Extension",eventLabel:w,eventValue:1}),Re.capture("StarExtension",{extensionsId:w})):(se.unFavoriteExtension(w),W.sendGAEvent({category:"Extension",action:"Cancel Star Extension",eventLabel:w,eventValue:1}),Re.capture("CancelStarExtension",{extensionsId:w})),c.value[I].isStarred=T,t("starExtension",w,T)}},h=C(!1);async function f(w){if(!c.value)throw console.error("hydratedExtConfigs.value is null"),new Error("hydratedExtConfigs.value is null");h.value=!0,await Fe();const I=c.value.findIndex(T=>T.id===w);if(I>0){const[T]=c.value.splice(I,1);await Fe(),c.value.splice(0,0,T);const P=c.value.map(A=>A.id);se.setExtIdsOfCategoryLeaf({key:o.currentCategory,nextExtIds:P}),await Fe(),h.value=!1;const O=l.value.find(A=>A.getAttribute("value")===w);O==null||O.scrollIntoView({block:"center"})}}const v=C(null);function x(w){v.value=w}function y(){v.value=null}fe(()=>{if(!o.currentCategory)return;const w=document.getElementById("extension-curated-cards-wrapper");w!=null&&new H(w,{animation:150,dragClass:"sortable-drag",handle:".card-wrapper",sort:!0,onEnd:I=>{const{newIndex:T,oldIndex:P}=I;if(T===void 0||P===void 0||T===P||c.value===null)return;const[O]=c.value.splice(P,1);c.value.splice(T,0,O);const A=c.value.map(D=>D.id);se.setExtIdsOfCategoryLeaf({key:o.currentCategory,nextExtIds:A})}})});const S=C(null);return se.getCategoryTree().then(w=>{S.value=w}),e({openExtension:s}),(w,I)=>{const T=k("a-button"),P=k("a-menu-item"),O=k("a-menu"),A=k("a-dropdown");return _(),R("div",{id:"extension-curated-cards-wrapper",class:te({"extension-curated-cards-wrapper":!0,active:i.value!==null})},[p(ii,{name:"list",css:h.value},{default:m(()=>[(_(!0),R(ye,null,je(c.value,(D,E)=>(_(),R("div",{key:D.id},[b("div",{id:D.id,ref_for:!0,ref_key:"cardEleRefs",ref:l,value:D.id,class:te({"card-wrapper":!0,active:i.value!==null&&D.id===i.value}),onClick:K=>s(D.id)},[b("div",Cr,[S.value?(_(),N(g(Gt),{key:0,icon:g(In)(D.category[0],S.value)},null,8,["icon"])):z("",!0)]),b("div",kr,[b("div",Sr,$(w.$t(`extension.${D.id}.name`)),1)]),b("div",$r,[p(T,{type:"text",class:"star",shape:"circle",onClick:Ie(K=>u(D.id),["stop"])},{icon:m(()=>[D.isStarred?(_(),N(g(vs),{key:0})):(_(),N(g(_s),{key:1}))]),_:2},1032,["onClick"]),o.hasOpeningExtension?z("",!0):(_(),N(A,{key:0},{overlay:m(()=>[p(O,null,{default:m(()=>[o.currentCategory&&E!==0?(_(),N(P,{key:0,onClick:K=>f(D.id)},{default:m(()=>[p(g(ys)),U(" "+$(w.$t("curatedCards.settings.upToTop")),1)]),_:2},1032,["onClick"])):z("",!0),p(P,{onClick:K=>x(D.id)},{default:m(()=>[p(g(ws)),U(" "+$(w.$t("curatedCards.settings.editCategory")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:m(()=>[p(T,{size:"small",type:"text",shape:"circle"},{default:m(()=>[p(g(xs),{class:"handle"})]),_:1})]),_:2},1024))])],10,Er)]))),128))]),_:1},8,["css"]),p(qa,{"ext-id":v.value,onAfterClose:y},null,8,["ext-id"])],2)}}});const It=ne(Ir,[["__scopeId","data-v-742027e1"]]),Or={class:"categorized-extensions-wrapper"},Mr=Q({__name:"index",props:{currentCategory:{default:"all"},specificActiveExtensionId:null},setup(n){const e=n;Sn();const t=wt(),o=C([]),i=C(!1),s=l=>{i.value!==l&&(i.value=l)};re(()=>t.path,a,{immediate:!0});function a(){t.path.includes("extension")?s(!0):s(!1)}re(()=>e.currentCategory,async l=>{o.value=await wi(l),de.exports.isEmpty(o.value)&&e.specificActiveExtensionId&&(o.value=[e.specificActiveExtensionId]),a()},{immediate:!0});const r=C();return re(()=>e.specificActiveExtensionId,async l=>{var c;l&&(await Fe(),(c=r.value)==null||c.openExtension(l,{silentReport:!0}))},{immediate:!0}),(l,c)=>(_(),R("div",Or,[p(It,{ref_key:"curatedCardsRef",ref:r,"origin-ext-ids":o.value,class:te(["extensions-card"]),"has-opening-extension":i.value,"current-category":n.currentCategory,onOpenExtension:c[0]||(c[0]=d=>l.$emit("openExtension",d))},null,8,["origin-ext-ids","has-opening-extension","current-category"])]))}});const Tr=ne(Mr,[["__scopeId","data-v-6d19105e"]]),Ar=Q({__name:"TabLikeHeader",props:{titleColor:null,bottomLineColor:null},setup(n){const e=n;return(t,o)=>{var i;return _(),R("div",{class:"tab-like-header-wrapper",style:ai({color:`${(i=e.titleColor)!=null?i:"var(--opposite-color)"}`})},[b("div",null,[jt(t.$slots,"icon",{},void 0,!0),jt(t.$slots,"default",{},void 0,!0)])],4)}}});const nn=ne(Ar,[["__scopeId","data-v-52c11c4f"]]);function et(n){return Array.isArray?Array.isArray(n):Fi(n)==="[object Array]"}const Dr=1/0;function Lr(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-Dr?"-0":e}function Rr(n){return n==null?"":Lr(n)}function We(n){return typeof n=="string"}function Ni(n){return typeof n=="number"}function Nr(n){return n===!0||n===!1||Pr(n)&&Fi(n)=="[object Boolean]"}function Pi(n){return typeof n=="object"}function Pr(n){return Pi(n)&&n!==null}function Ae(n){return n!=null}function Wn(n){return!n.trim().length}function Fi(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Fr="Incorrect 'index' type",Ur=n=>`Invalid value for key ${n}`,Br=n=>`Pattern length exceeds max of ${n}.`,zr=n=>`Missing ${n} property in key`,Hr=n=>`Property 'weight' in key '${n}' must be a positive integer`,Fo=Object.prototype.hasOwnProperty;class Wr{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(o=>{let i=Ui(o);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(o=>{o.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ui(n){let e=null,t=null,o=null,i=1,s=null;if(We(n)||et(n))o=n,e=Uo(n),t=no(n);else{if(!Fo.call(n,"name"))throw new Error(zr("name"));const a=n.name;if(o=a,Fo.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(Hr(a));e=Uo(a),t=no(a),s=n.getFn}return{path:e,id:t,weight:i,src:o,getFn:s}}function Uo(n){return et(n)?n:n.split(".")}function no(n){return et(n)?n.join("."):n}function jr(n,e){let t=[],o=!1;const i=(s,a,r)=>{if(!!Ae(s))if(!a[r])t.push(s);else{let l=a[r];const c=s[l];if(!Ae(c))return;if(r===a.length-1&&(We(c)||Ni(c)||Nr(c)))t.push(Rr(c));else if(et(c)){o=!0;for(let d=0,u=c.length;d<u;d+=1)i(c[d],a,r+1)}else a.length&&i(c,a,r+1)}};return i(n,We(e)?e.split("."):e,0),o?t:t[0]}const Vr={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Kr={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},Gr={location:0,threshold:.6,distance:100},Yr={useExtendedSearch:!1,getFn:jr,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Y={...Kr,...Vr,...Gr,...Yr};const Xr=/[^ ]+/g;function qr(n=1,e=3){const t=new Map,o=Math.pow(10,e);return{get(i){const s=i.match(Xr).length;if(t.has(s))return t.get(s);const a=1/Math.pow(s,.5*n),r=parseFloat(Math.round(a*o)/o);return t.set(s,r),r},clear(){t.clear()}}}class yo{constructor({getFn:e=Y.getFn,fieldNormWeight:t=Y.fieldNormWeight}={}){this.norm=qr(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,o)=>{this._keysMap[t.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,We(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();We(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,o=this.size();t<o;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Ae(e)||Wn(e))return;let o={v:e,i:t,n:this.norm.get(e)};this.records.push(o)}_addObject(e,t){let o={i:t,$:{}};this.keys.forEach((i,s)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(!!Ae(a)){if(et(a)){let r=[];const l=[{nestedArrIndex:-1,value:a}];for(;l.length;){const{nestedArrIndex:c,value:d}=l.pop();if(!!Ae(d))if(We(d)&&!Wn(d)){let u={v:d,i:c,n:this.norm.get(d)};r.push(u)}else et(d)&&d.forEach((u,h)=>{l.push({nestedArrIndex:h,value:u})})}o.$[s]=r}else if(We(a)&&!Wn(a)){let r={v:a,n:this.norm.get(a)};o.$[s]=r}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function Bi(n,e,{getFn:t=Y.getFn,fieldNormWeight:o=Y.fieldNormWeight}={}){const i=new yo({getFn:t,fieldNormWeight:o});return i.setKeys(n.map(Ui)),i.setSources(e),i.create(),i}function Zr(n,{getFn:e=Y.getFn,fieldNormWeight:t=Y.fieldNormWeight}={}){const{keys:o,records:i}=n,s=new yo({getFn:e,fieldNormWeight:t});return s.setKeys(o),s.setIndexRecords(i),s}function on(n,{errors:e=0,currentLocation:t=0,expectedLocation:o=0,distance:i=Y.distance,ignoreLocation:s=Y.ignoreLocation}={}){const a=e/n.length;if(s)return a;const r=Math.abs(o-t);return i?a+r/i:r?1:a}function Jr(n=[],e=Y.minMatchCharLength){let t=[],o=-1,i=-1,s=0;for(let a=n.length;s<a;s+=1){let r=n[s];r&&o===-1?o=s:!r&&o!==-1&&(i=s-1,i-o+1>=e&&t.push([o,i]),o=-1)}return n[s-1]&&s-o>=e&&t.push([o,s-1]),t}const ft=32;function Qr(n,e,t,{location:o=Y.location,distance:i=Y.distance,threshold:s=Y.threshold,findAllMatches:a=Y.findAllMatches,minMatchCharLength:r=Y.minMatchCharLength,includeMatches:l=Y.includeMatches,ignoreLocation:c=Y.ignoreLocation}={}){if(e.length>ft)throw new Error(Br(ft));const d=e.length,u=n.length,h=Math.max(0,Math.min(o,u));let f=s,v=h;const x=r>1||l,y=x?Array(u):[];let S;for(;(S=n.indexOf(e,v))>-1;){let A=on(e,{currentLocation:S,expectedLocation:h,distance:i,ignoreLocation:c});if(f=Math.min(A,f),v=S+d,x){let D=0;for(;D<d;)y[S+D]=1,D+=1}}v=-1;let w=[],I=1,T=d+u;const P=1<<d-1;for(let A=0;A<d;A+=1){let D=0,E=T;for(;D<E;)on(e,{errors:A,currentLocation:h+E,expectedLocation:h,distance:i,ignoreLocation:c})<=f?D=E:T=E,E=Math.floor((T-D)/2+D);T=E;let K=Math.max(1,h-E+1),F=a?u:Math.min(h+E,u)+d,Z=Array(F+2);Z[F+1]=(1<<A)-1;for(let ae=F;ae>=K;ae-=1){let B=ae-1,G=t[n.charAt(B)];if(x&&(y[B]=+!!G),Z[ae]=(Z[ae+1]<<1|1)&G,A&&(Z[ae]|=(w[ae+1]|w[ae])<<1|1|w[ae+1]),Z[ae]&P&&(I=on(e,{errors:A,currentLocation:B,expectedLocation:h,distance:i,ignoreLocation:c}),I<=f)){if(f=I,v=B,v<=h)break;K=Math.max(1,2*h-v)}}if(on(e,{errors:A+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:c})>f)break;w=Z}const O={isMatch:v>=0,score:Math.max(.001,I)};if(x){const A=Jr(y,r);A.length?l&&(O.indices=A):O.isMatch=!1}return O}function el(n){let e={};for(let t=0,o=n.length;t<o;t+=1){const i=n.charAt(t);e[i]=(e[i]||0)|1<<o-t-1}return e}class zi{constructor(e,{location:t=Y.location,threshold:o=Y.threshold,distance:i=Y.distance,includeMatches:s=Y.includeMatches,findAllMatches:a=Y.findAllMatches,minMatchCharLength:r=Y.minMatchCharLength,isCaseSensitive:l=Y.isCaseSensitive,ignoreLocation:c=Y.ignoreLocation}={}){if(this.options={location:t,threshold:o,distance:i,includeMatches:s,findAllMatches:a,minMatchCharLength:r,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(h,f)=>{this.chunks.push({pattern:h,alphabet:el(h),startIndex:f})},u=this.pattern.length;if(u>ft){let h=0;const f=u%ft,v=u-f;for(;h<v;)d(this.pattern.substr(h,ft),h),h+=ft;if(f){const x=u-ft;d(this.pattern.substr(x),x)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:o}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let v={isMatch:!0,score:0};return o&&(v.indices=[[0,e.length-1]]),v}const{location:i,distance:s,threshold:a,findAllMatches:r,minMatchCharLength:l,ignoreLocation:c}=this.options;let d=[],u=0,h=!1;this.chunks.forEach(({pattern:v,alphabet:x,startIndex:y})=>{const{isMatch:S,score:w,indices:I}=Qr(e,v,x,{location:i+y,distance:s,threshold:a,findAllMatches:r,minMatchCharLength:l,includeMatches:o,ignoreLocation:c});S&&(h=!0),u+=w,S&&I&&(d=[...d,...I])});let f={isMatch:h,score:h?u/this.chunks.length:1};return h&&o&&(f.indices=d),f}}class ut{constructor(e){this.pattern=e}static isMultiMatch(e){return Bo(e,this.multiRegex)}static isSingleMatch(e){return Bo(e,this.singleRegex)}search(){}}function Bo(n,e){const t=n.match(e);return t?t[1]:null}class tl extends ut{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class nl extends ut{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const o=e.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,e.length-1]}}}class ol extends ut{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class il extends ut{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class sl extends ut{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class al extends ut{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Hi extends ut{constructor(e,{location:t=Y.location,threshold:o=Y.threshold,distance:i=Y.distance,includeMatches:s=Y.includeMatches,findAllMatches:a=Y.findAllMatches,minMatchCharLength:r=Y.minMatchCharLength,isCaseSensitive:l=Y.isCaseSensitive,ignoreLocation:c=Y.ignoreLocation}={}){super(e),this._bitapSearch=new zi(e,{location:t,threshold:o,distance:i,includeMatches:s,findAllMatches:a,minMatchCharLength:r,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Wi extends ut{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,o;const i=[],s=this.pattern.length;for(;(o=e.indexOf(this.pattern,t))>-1;)t=o+s,i.push([o,t-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const oo=[tl,Wi,ol,il,al,sl,nl,Hi],zo=oo.length,rl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ll="|";function cl(n,e={}){return n.split(ll).map(t=>{let o=t.trim().split(rl).filter(s=>s&&!!s.trim()),i=[];for(let s=0,a=o.length;s<a;s+=1){const r=o[s];let l=!1,c=-1;for(;!l&&++c<zo;){const d=oo[c];let u=d.isMultiMatch(r);u&&(i.push(new d(u,e)),l=!0)}if(!l)for(c=-1;++c<zo;){const d=oo[c];let u=d.isSingleMatch(r);if(u){i.push(new d(u,e));break}}}return i})}const ul=new Set([Hi.type,Wi.type]);class dl{constructor(e,{isCaseSensitive:t=Y.isCaseSensitive,includeMatches:o=Y.includeMatches,minMatchCharLength:i=Y.minMatchCharLength,ignoreLocation:s=Y.ignoreLocation,findAllMatches:a=Y.findAllMatches,location:r=Y.location,threshold:l=Y.threshold,distance:c=Y.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:o,minMatchCharLength:i,findAllMatches:a,ignoreLocation:s,location:r,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=cl(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let s=0,a=[],r=0;for(let l=0,c=t.length;l<c;l+=1){const d=t[l];a.length=0,s=0;for(let u=0,h=d.length;u<h;u+=1){const f=d[u],{isMatch:v,indices:x,score:y}=f.search(e);if(v){if(s+=1,r+=y,o){const S=f.constructor.type;ul.has(S)?a=[...a,...x]:a.push(x)}}else{r=0,s=0,a.length=0;break}}if(s){let u={isMatch:!0,score:r/s};return o&&(u.indices=a),u}}return{isMatch:!1,score:1}}}const io=[];function hl(...n){io.push(...n)}function so(n,e){for(let t=0,o=io.length;t<o;t+=1){let i=io[t];if(i.condition(n,e))return new i(n,e)}return new zi(n,e)}const kn={AND:"$and",OR:"$or"},ao={PATH:"$path",PATTERN:"$val"},ro=n=>!!(n[kn.AND]||n[kn.OR]),pl=n=>!!n[ao.PATH],fl=n=>!et(n)&&Pi(n)&&!ro(n),Ho=n=>({[kn.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function ji(n,e,{auto:t=!0}={}){const o=i=>{let s=Object.keys(i);const a=pl(i);if(!a&&s.length>1&&!ro(i))return o(Ho(i));if(fl(i)){const l=a?i[ao.PATH]:s[0],c=a?i[ao.PATTERN]:i[l];if(!We(c))throw new Error(Ur(l));const d={keyId:no(l),pattern:c};return t&&(d.searcher=so(c,e)),d}let r={children:[],operator:s[0]};return s.forEach(l=>{const c=i[l];et(c)&&c.forEach(d=>{r.children.push(o(d))})}),r};return ro(n)||(n=Ho(n)),o(n)}function ml(n,{ignoreFieldNorm:e=Y.ignoreFieldNorm}){n.forEach(t=>{let o=1;t.matches.forEach(({key:i,norm:s,score:a})=>{const r=i?i.weight:null;o*=Math.pow(a===0&&r?Number.EPSILON:a,(r||1)*(e?1:s))}),t.score=o})}function gl(n,e){const t=n.matches;e.matches=[],Ae(t)&&t.forEach(o=>{if(!Ae(o.indices)||!o.indices.length)return;const{indices:i,value:s}=o;let a={indices:i,value:s};o.key&&(a.key=o.key.src),o.idx>-1&&(a.refIndex=o.idx),e.matches.push(a)})}function vl(n,e){e.score=n.score}function _l(n,e,{includeMatches:t=Y.includeMatches,includeScore:o=Y.includeScore}={}){const i=[];return t&&i.push(gl),o&&i.push(vl),n.map(s=>{const{idx:a}=s,r={item:e[a],refIndex:a};return i.length&&i.forEach(l=>{l(s,r)}),r})}class At{constructor(e,t={},o){this.options={...Y,...t},this.options.useExtendedSearch,this._keyStore=new Wr(this.options.keys),this.setCollection(e,o)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof yo))throw new Error(Fr);this._myIndex=t||Bi(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!Ae(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let o=0,i=this._docs.length;o<i;o+=1){const s=this._docs[o];e(s,o)&&(this.removeAt(o),o-=1,i-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:o,includeScore:i,shouldSort:s,sortFn:a,ignoreFieldNorm:r}=this.options;let l=We(e)?We(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ml(l,{ignoreFieldNorm:r}),s&&l.sort(a),Ni(t)&&t>-1&&(l=l.slice(0,t)),_l(l,this._docs,{includeMatches:o,includeScore:i})}_searchStringList(e){const t=so(e,this.options),{records:o}=this._myIndex,i=[];return o.forEach(({v:s,i:a,n:r})=>{if(!Ae(s))return;const{isMatch:l,score:c,indices:d}=t.searchIn(s);l&&i.push({item:s,idx:a,matches:[{score:c,value:s,norm:r,indices:d}]})}),i}_searchLogical(e){const t=ji(e,this.options),o=(r,l,c)=>{if(!r.children){const{keyId:u,searcher:h}=r,f=this._findMatches({key:this._keyStore.get(u),value:this._myIndex.getValueForItemAtKeyId(l,u),searcher:h});return f&&f.length?[{idx:c,item:l,matches:f}]:[]}const d=[];for(let u=0,h=r.children.length;u<h;u+=1){const f=r.children[u],v=o(f,l,c);if(v.length)d.push(...v);else if(r.operator===kn.AND)return[]}return d},i=this._myIndex.records,s={},a=[];return i.forEach(({$:r,i:l})=>{if(Ae(r)){let c=o(t,r,l);c.length&&(s[l]||(s[l]={idx:l,item:r,matches:[]},a.push(s[l])),c.forEach(({matches:d})=>{s[l].matches.push(...d)}))}}),a}_searchObjectList(e){const t=so(e,this.options),{keys:o,records:i}=this._myIndex,s=[];return i.forEach(({$:a,i:r})=>{if(!Ae(a))return;let l=[];o.forEach((c,d)=>{l.push(...this._findMatches({key:c,value:a[d],searcher:t}))}),l.length&&s.push({idx:r,item:a,matches:l})}),s}_findMatches({key:e,value:t,searcher:o}){if(!Ae(t))return[];let i=[];if(et(t))t.forEach(({v:s,i:a,n:r})=>{if(!Ae(s))return;const{isMatch:l,score:c,indices:d}=o.searchIn(s);l&&i.push({score:c,key:e,value:s,idx:a,norm:r,indices:d})});else{const{v:s,n:a}=t,{isMatch:r,score:l,indices:c}=o.searchIn(s);r&&i.push({score:l,key:e,value:s,norm:a,indices:c})}return i}}At.version="6.6.2";At.createIndex=Bi;At.parseIndex=Zr;At.config=Y;At.parseQuery=ji;hl(dl);class yl{constructor(){M(this,"lastClipboard","");M(this,"updateTime",0);M(this,"guessLangList",[]);M(this,"init",async()=>{setInterval(async()=>{this.updateClipboard()},500)});M(this,"updateClipboard",async()=>{try{const e=await W.readTextFromClipboard();if(e!==""&&e!==this.lastClipboard){const t=await W.guessLang(e);this.updateTime=Date.now(),this.lastClipboard=e,this.guessLangList=t}}catch{console.error("\u83B7\u53D6\u526A\u5207\u677F\u5F02\u5E38")}});this.init()}async updateLastClipboard(){await this.updateClipboard()}getLastClipboard(){return this.lastClipboard}getLastClipboardLangList(){return this.guessLangList}getUpdateTime(){return this.updateTime}isUpdateTimeLessThanMin(e){return Date.now()-this.getUpdateTime()<e*6e4}isEmpty(){return this.lastClipboard===""}isLengthExceedsMegabyteSize(e){return this.lastClipboard.length>e<<20}}const ct=new yl,Dt=0,yt=1e3;function wl(n,e){var t;return bs(((t=n.match(/^[1-5][0-9]{2}$/))==null?void 0:t[0])||"")&&e.id==="http-code"?yt:Dt}function xl(n,e){return Es(n||"")&&e.id==="port-cheat-sheet"?yt:Dt}function bl(n,e){var t;return Cs(((t=n.match(/^\.[2-8a-z]{0,7}/))==null?void 0:t[0])||"")&&e.id==="mime-type-cheat-sheet"?yt:Dt}function El(n,e){const t=Number(n==null?void 0:n.match(/[0-9]{1,6}/))||0,o=(n==null?void 0:n.search(/\d/))||0,i=n==null?void 0:n.slice(o+(t==null?void 0:t.toString().length));return ks(i)&&e.id==="unit-conversion"?yt:Dt}function Cl(n,e){return Ss(n||"")&&e.id==="chmod-calculator"?yt:Dt}function kl(n,e){switch(n=n.trim().toLowerCase(),n){case"diff":if(e.id==="text-diff")return yt;break;case"yaml":case"yml":if(e.id==="yaml-to-pretty")return yt;break}return Dt}const Sl=[wl,bl,xl,El,Cl,kl],Wo=new Map([["aes256",[["aes-encryption",1e3],["aes-decryption",900]]],["aes192",[["aes-encryption",1e3],["aes-decryption",900]]],["aes128",[["aes-encryption",1e3],["aes-decryption",900]]]]),$l=new Map([["json",[["json-to-pretty",1e3],["json-to-yaml",900],["json-diff",800],["json-to-minify",700],["json-to-merge",600]]],["yaml",[["yaml-to-pretty",1e3],["yaml-to-json",900],["yaml-diff",800],["yaml-viewer",700],["yaml-to-minify",600]]]]);class Il{constructor(){M(this,"originExtensions",[]);M(this,"originExtensionsMap",new Map);M(this,"extensions",[])}async create(){this.originExtensions=await ho();const e=_n();return this.originExtensions.forEach(t=>{this.originExtensionsMap.set(t.id,t);const o=de.exports.get(xt,[e,"extension",t.id,"name"]),i=de.exports.get(xt,["en","extension",t.id,"name"]),s=de.exports.get(xt,[e,"extension",t.id,"keywords"]),a=de.exports.get(xt,["en","extension",t.id,"keywords"]),r=de.exports.get(xt,[e,t.id,"description"]),l=de.exports.get(xt,["en",t.id,"description"]),c={id:t.id,name:{current:o||"",en:i||""},description:{current:r||"",en:l||""},keywords:{current:Array.isArray(s)?s:[],en:Array.isArray(a)?a:[]},grade:0};this.extensions.push(c)}),this}}class Vi extends Il{constructor(){super(...arguments);M(this,"searchValue","");M(this,"rawValue","");M(this,"searchMap",new Map)}setSearchValue(t){return this.rawValue=t,this.searchValue=t.toLocaleLowerCase(),t.split(" ").forEach(o=>this.searchMap.set(o,"")),this}isSkipSearch(){return this.searchValue===""&&this.searchMap.size===0}hookFn(){return this.extensions.forEach(t=>{Sl.forEach(o=>{const i=o(this.rawValue,de.exports.cloneDeep(t));i>0&&Ue(t,i)})}),this}matchWeightsMap(){if(!Wo.has(this.searchValue))return this;const t=Wo.get(this.searchValue);if(Array.isArray(t)){const o=new Map;t.forEach(i=>{o.set(i[0],i[1])}),this.extensions.forEach(i=>{const s=o.get(i.id);s&&Ue(i,s)})}return this}matchName(){if(this.isSkipSearch())return this;const t=this.searchValue.split(" ")[0];return this.extensions.forEach(o=>{const i=o.name[kt.EN].toLocaleLowerCase(),s=o.name.current.toLocaleLowerCase();this.searchValue===i||this.searchValue===s?Ue(o,100):i.startsWith(this.searchValue)||s.startsWith(this.searchValue)?Ue(o,this.searchValue.length*2):(i.startsWith(t)||s.startsWith(t))&&Ue(o,t.length*2)}),this}matchKeyword(){return this.isSkipSearch()?this:(this.extensions.forEach(t=>{const o=new Map;t.keywords[kt.EN].forEach((s,a)=>o.set(s.toLocaleLowerCase(),a));const i=t.keywords.current;Array.isArray(i)&&t.keywords.current.forEach((s,a)=>{o.has(s)||o.set(s.toLocaleLowerCase(),a)}),this.searchMap.forEach((s,a)=>{const r=o.get(a);if(r!==void 0&&r<100)Ue(t,500-r*5);else{let l=0;o.forEach((c,d)=>{d.startsWith(a)?l<a.length&&c<100&&(l=a.length*5+(400-c*4)):d.includes(a)&&l<a.length&&c<100&&(l=a.length*2+(300-c*3))}),l>0&&Ue(t,l)}})}),this)}fuzzMatchExtensions(){if(this.isSkipSearch())return this;const t=this.extensions,o={includeScore:!0,threshold:.4,keys:[{name:"name",weight:10,getFn:r=>[r.name[kt.EN],r.name.current]},{name:"keywords",weight:6,getFn:r=>[r.keywords[kt.EN],r.keywords.current]},{name:"id",weight:3}]},s=new At(t,o).search(this.searchValue),a=s.length;return s.forEach((r,l)=>{const c=r.item;Ue(c,a-l)}),this}done(){const t=this.extensions.filter(i=>i.grade>0).sort((i,s)=>s.grade-i.grade),o=new Array(t.length);for(let i=0;i<o.length;i++)o[i]=this.originExtensionsMap.get(t[i].id);return o}}async function Ol(n){return typeof n!="string"||n===""?[]:(n=n.trim(),n.length===0?[]:(await new Vi().create()).setSearchValue(n).hookFn().matchWeightsMap().matchName().matchKeyword().fuzzMatchExtensions().done())}function Ue(n,e){n.grade===void 0?n.grade=e:n.grade+=e}class Ml extends Vi{constructor(){super(...arguments);M(this,"idMap",new Map)}setMap(t,o){return this.searchMap=t,this.idMap=o,this}doneAll(){let t=this.extensions.filter(i=>i.grade>0).sort((i,s)=>s.grade-i.grade);t.forEach(i=>{i.matchBy!=="id"&&(i.matchBy="key")}),t=t.splice(0,4);const o=[];return t.forEach(i=>{const s=this.originExtensionsMap.get(i.id);s&&i.matchBy&&o.push({extension:s,matchBy:i.matchBy})}),o}matchWeightsMap(){return this.searchMap.forEach((t,o)=>{const i=$l.get(o);if(Array.isArray(i)){const s=new Map;i.forEach(a=>{s.set(a[0],a[1])}),this.extensions.forEach(a=>{const r=s.get(a.id);r&&Ue(a,r)})}}),this}matchID(){return this.extensions.forEach(t=>{this.idMap.has(t.id)&&(t.matchBy="id",Ue(t,1<<20))}),this}preFilter(){return this.searchMap.has("json")&&(this.extensions=this.extensions.filter(t=>this.searchMap.has("json")&&!this.searchMap.has("yaml")&&t.name[kt.EN].toLocaleLowerCase().startsWith("yaml")?!1:!(!this.searchMap.has("json")&&this.searchMap.has("yaml")&&t.name[kt.EN].toLocaleLowerCase().startsWith("json")))),this}}let jn={dateCategorizer:new ri(""),extensions:[]};async function wo(){const n=new ri(""),e={dateCategorizer:n,extensions:[]};if(ct.isEmpty()||!ct.isUpdateTimeLessThanMin(1)||ct.isLengthExceedsMegabyteSize(1))return e;const t=ct.getLastClipboard();if(jn.dateCategorizer.getRaw()===t)return jn;await n.setRaw(t).analyzeCategory();const o=await new Ml().create();return o.setMap(n.getSearchKeyMap(),n.getSearchIDMap()),e.extensions=o.preFilter().matchWeightsMap().matchID().matchKeyword().doneAll(),jn=e,e}var V=(n=>(n.RECENTLY_USED="Recently Used",n.MOST_USED="Most Used",n.RECOMMENDED="Recommended",n.STARRED="Starred",n))(V||{});async function ee(n,e){const t=[];let o=null;switch(e){case"Recently Used":o=await se.getRecentlyUsedExtensionStateList(12);break;case"Most Used":o=await se.getMostUsedExtensionStateList(12);break;case"Recommended":return(await wo()).extensions.map(a=>a.extension);case"Starred":return(await se.getExtIdsOfCategoryLeaf(_t.STAR)).map(a=>{const r=n.find(l=>l.id===a);r!==void 0&&t.push(de.exports.cloneDeep(r))}),t}return o==null||o.map(i=>{const s=n.find(a=>a.id===i.id);s!==void 0&&t.push(de.exports.cloneDeep(s))}),t}const Tl={class:te(["home-extensions-wrapper"])},Al={key:0,class:te({"personal-extensions-wrap":!0})},Dl={key:0,id:"recommendedExtensions",class:"home-section"},Ll={key:1,class:"home-section"},Rl={key:2,class:"home-section"},Nl={key:1,class:"starred-extensions-wrap home-section"},Pl=Q({__name:"index",setup(n){const{t:e}=Ye(),t=Sn(),o=wt(),i=C(null),s=C(null);ee(J,V.RECENTLY_USED).then(x=>{s.value=x.map(y=>y.id)});const a=C(null);ee(J,V.MOST_USED).then(x=>{a.value=x.map(y=>y.id)});const r=C(null);ee(J,V.RECOMMENDED).then(x=>{r.value=x.map(y=>y.id)});const l=C(null);ee(J,V.STARRED).then(x=>{l.value=x.map(y=>y.id)}),re(()=>o.path,()=>{o.path.includes("extension")?i.value=o.path.split("/")[2]:i.value=null},{immediate:!0});const c=(x,y)=>{if(d.value!==null)switch(d.value){case V.RECENTLY_USED:ee(J,V.RECENTLY_USED).then(S=>{s.value=S.map(w=>w.id)});break;case V.MOST_USED:ee(J,V.MOST_USED).then(S=>{a.value=S.map(w=>w.id)});break;case V.STARRED:i.value!==null&&i.value===x&&f(),ee(J,V.STARRED).then(S=>{l.value=S.map(w=>w.id)});break}else ee(J,V.STARRED).then(S=>{l.value=S.map(w=>w.id)}),ee(J,V.RECENTLY_USED).then(S=>{s.value=S.map(w=>w.id)}),ee(J,V.MOST_USED).then(S=>{a.value=S.map(w=>w.id)}),ee(J,V.RECOMMENDED).then(S=>{r.value=S.map(w=>w.id)})},d=C(null),u=C(!1),h=x=>{u.value!==x&&(u.value=x)},f=()=>{i.value=null,d.value=null,h(!1),ee(J,V.STARRED).then(x=>{l.value=x.map(y=>y.id)}),ee(J,V.RECENTLY_USED).then(x=>{s.value=x.map(y=>y.id)}),ee(J,V.MOST_USED).then(x=>{a.value=x.map(y=>y.id)}),ee(J,V.RECOMMENDED).then(x=>{r.value=x.map(y=>y.id)}),t.push("/")};let v=null;return re(i,x=>{x!==null?v&&(clearInterval(v),v=null):v=setInterval(()=>{ee(J,V.RECOMMENDED).then(y=>{y.length>0&&(r.value=y.map(S=>S.id))})},1e3)},{immediate:!0}),Tt(()=>{v&&clearTimeout(v)}),(x,y)=>{const S=k("a-empty");return _(),R("div",Tl,[s.value!==null||a.value!==null||r.value!==null?(_(),R("div",Al,[r.value!==null&&r.value.length>0?(_(),R("div",Dl,[p(nn,null,{default:m(()=>[U($(g(e)("homeExtensions.recommended")),1)]),_:1}),p(It,{"origin-ext-ids":r.value,class:te(["recommended-used-wrap","curated-cards"]),"has-opening-extension":!1,onOpenExtension:y[0]||(y[0]=w=>x.$emit("openExtension",w,{home:g(V).RECOMMENDED})),onStarExtension:c},null,8,["origin-ext-ids"])])):z("",!0),s.value!==null?(_(),R("div",Ll,[p(nn,null,{default:m(()=>[U($(g(e)("homeExtensions.recently-used")),1)]),_:1}),s.value.length>0?(_(),N(It,{key:0,"origin-ext-ids":s.value,class:te(["recently-used-wrap","curated-cards"]),"active-id":i.value==null?void 0:i.value,"has-opening-extension":!1,onOpenExtension:y[1]||(y[1]=w=>x.$emit("openExtension",w,{home:g(V).RECENTLY_USED})),onStarExtension:c},null,8,["origin-ext-ids","active-id"])):(_(),N(S,{key:1,image:g(cn).PRESENTED_IMAGE_SIMPLE,class:"empty"},{description:m(()=>[b("div",null,$(x.$t("homeExtensions.recentlyUsedEmpty")),1)]),_:1},8,["image"]))])):z("",!0),a.value!==null?(_(),R("div",Rl,[p(nn,{class:"header"},{default:m(()=>[U($(g(e)("homeExtensions.most-used")),1)]),_:1}),a.value.length!==null&&a.value.length>0?(_(),N(It,{key:0,"origin-ext-ids":a.value,class:te(["most-used-wrap","curated-cards"]),"active-id":i.value==null?void 0:i.value,"has-opening-extension":!1,onOpenExtension:y[2]||(y[2]=w=>x.$emit("openExtension",w,{home:g(V).MOST_USED})),onStarExtension:c},null,8,["origin-ext-ids","active-id"])):(_(),N(S,{key:1,image:g(cn).PRESENTED_IMAGE_SIMPLE,class:"empty"},{description:m(()=>[b("div",null,$(x.$t("homeExtensions.mostUsedEmpty")),1)]),_:1},8,["image"]))])):z("",!0)])):z("",!0),l.value!==null?(_(),R("div",Nl,[p(nn,null,{default:m(()=>[U($(g(e)("homeExtensions.star")),1)]),_:1}),l.value.length>0?(_(),N(It,{key:0,"origin-ext-ids":l.value,class:te(["starred-used-wrap","curated-cards"]),"active-id":i.value==null?void 0:i.value,"has-opening-extension":!1,onOpenExtension:y[3]||(y[3]=w=>x.$emit("openExtension",w,{home:g(V).STARRED})),onStarExtension:c},null,8,["origin-ext-ids","active-id"])):(_(),N(S,{key:1,image:g(cn).PRESENTED_IMAGE_SIMPLE,class:"empty"},{description:m(()=>[b("div",null,$(x.$t("homeExtensions.starEmpty")),1)]),_:1},8,["image"]))])):z("",!0)])}}});const Fl=ne(Pl,[["__scopeId","data-v-4d1e5943"]]),xo="current_active_extension";function Ul(n){localStorage.setItem(xo,n)}function Bl(){return localStorage.getItem(xo)}function zl(){localStorage.removeItem(xo)}const Hl={set:Ul,get:Bl,remove:zl},Wl=n=>(tt("data-v-224b4f47"),n=n(),nt(),n),jl={class:"active-extension-wrapper"},Vl={class:"operation"},Kl={class:"title"},Gl={class:"name"},Yl=Wl(()=>b("span",{class:"desc"},null,-1)),Xl={class:"alert"},ql={id:"extensionError"},Zl={class:"extension-region"},Jl=Q({__name:"index",emits:["closeExtension"],setup(n){const e=wt(),t=$s(),o=C(),i=C(""),s=C(new St(""));re(()=>e.path,async()=>{var r;if(i.value="",e.path.includes("extension")){s.value=new St((r=ct.getLastClipboard())!=null?r:"",ct.getLastClipboardLangList());const l=de.exports.last(e.path.split("/")),c=await mt(l);c&&(o.value=c,se.refreshExtensionUseState(c==null?void 0:c.id),Hl.set(c==null?void 0:c.id))}else o.value=null},{immediate:!0});function a(r){setTimeout(()=>{i.value=r||Te("home.clipboardAutoFill"),setTimeout(()=>{i.value=""},4e3)},100)}return Is(r=>{if(!Ms()){const l=document.getElementById("extensionError");l.style.display="block",po()||setTimeout(()=>{location.href=location.href.split("#")[0]},3e3)}}),(r,l)=>{var f,v;const c=k("a-skeleton-input"),d=k("a-button"),u=k("a-spin"),h=k("router-view");return _(),R("div",jl,[b("div",Vl,[b("div",Kl,[b("div",Gl,[g(t).$state.loading||!((f=o.value)!=null&&f.id)?(_(),N(c,{key:0,style:{width:"200px"},size:"small",active:""})):(_(),R(ye,{key:1},[U($(r.$t(`extension.${(v=o.value)==null?void 0:v.id}.name`)),1)],64))]),Yl]),p(yn,{name:"alert"},{default:m(()=>[b("div",Xl,[i.value?(_(),N(d,{key:0,class:"aha",size:"small"},{default:m(()=>[p(g(Os),{circled:""}),U(" "+$(i.value),1)]),_:1})):z("",!0)])]),_:1}),jt(r.$slots,"option",{},void 0,!0),jt(r.$slots,"collapse",{},void 0,!0)]),b("div",ql,$(r.$t("home.extensionError")),1),b("div",Zl,[g(t).$state.loading?(_(),N(u,{key:0,delay:100,spinning:"",class:"spinning",size:"large"})):z("",!0),o.value?(_(),N(h,{key:1},{default:m(({Component:x,route:y})=>[p(yn,{name:"route"},{default:m(()=>[(_(),N(vt(x),{key:y.path,"clipboard-value":s.value,class:"extension-wrapper",onAcceptClipboardCb:a},null,40,["clipboard-value"]))]),_:2},1024)]),_:1})):z("",!0)])])}}});const Ql=ne(Jl,[["__scopeId","data-v-224b4f47"]]),ec=["id"],tc={class:"name"},nc={key:1,style:{display:"inline","padding-left":"15px"}},oc=Q({__name:"CuratedItem",props:{hydratedExtConfig:null,isActive:{type:Boolean},collectOption:null},emits:["openExtension"],setup(n,{expose:e,emit:t}){async function o(a,r){t("openExtension",a),!(r!=null&&r.silentReport)&&(i(a),Re.capture("OpenExtension",{extensionId:a,from:"curatedCards"}))}const i=async a=>{const r=await mt(a);!r||(W.sendGAEvent({category:"Extension",action:"open_extension",eventLabel:r.id,eventValue:1}),W.sendGAPageView(r.id))},s=C(null);return se.getCategoryTree().then(a=>{s.value=a}),e({openExtension:o}),(a,r)=>(_(),R("div",{id:n.hydratedExtConfig.id,class:te({"card-wrapper":!0,active:n.isActive}),onClick:r[0]||(r[0]=l=>o(n.hydratedExtConfig.id))},[b("div",tc,[s.value?(_(),N(g(Gt),{key:0,icon:g(In)(n.hydratedExtConfig.category[0],s.value)},null,8,["icon"])):(_(),R("div",nc)),U(" "+$(a.$t(`extension.${n.hydratedExtConfig.id}.name`)),1)])],10,ec))}});const jo=ne(oc,[["__scopeId","data-v-d49a286c"]]),ic=["value"],sc=Q({__name:"index",props:{originExtIds:null,currentExtId:null,currentCategory:null,collectible:{type:Boolean}},emits:["openExtension","starExtension"],setup(n,{emit:e}){const t=n,o=C([]),i=C(),s=C(null);re(()=>t.originExtIds,async u=>{if(!u||u.length<=0){s.value=[];return}const h=await si(u);if(s.value=await bi(h),t.currentCategory){const f=await se.getExtIdsOfCategoryLeaf(t.currentCategory);if(f.length<=0)return;const v=[];for(let y=0;y<f.length;y++){const S=s.value.find(w=>w.id===f[y]);S&&v.push(S)}const x=s.value.filter(y=>!f.includes(y.id));s.value=[...v,...x]}r(t.currentExtId)},{immediate:!0});const a=()=>new Promise(u=>{const h=setInterval(()=>{s.value&&s.value.length>0&&o.value&&o.value.length>0&&o.value.length===s.value.length&&s.value.find(f=>f.id===o.value[0].getAttribute("value"))&&(clearInterval(h),u(!0))},100)}),r=u=>{const h=o.value.find(f=>f.getAttribute("value")===u);h==null||h.scrollIntoView({block:"center"})};re(()=>t.currentExtId,async(u,h)=>{u!==h&&(await a(),r(u))},{immediate:!0});const l=async u=>{if(!s.value)throw console.error("hydratedExtConfigs.value is null"),new Error("hydratedExtConfigs.value is null");const h=s.value.findIndex(f=>f.id===u);if(h>=0){const f=!s.value[h].isStarred;f?(await se.favoriteExtension(u),t.currentCategory&&d(u),W.sendGAEvent({category:"Extension",action:"Star Extension",eventLabel:u,eventValue:1}),Re.capture("StarExtension",{extensionsId:u})):(se.unFavoriteExtension(u),W.sendGAEvent({category:"Extension",action:"Cancel Star Extension",eventLabel:u,eventValue:1}),Re.capture("CancelStarExtension",{extensionsId:u})),s.value[h].isStarred=f,e("starExtension",u,f)}},c=C(!1);async function d(u){if(!s.value)throw console.error("hydratedExtConfigs.value is null"),new Error("hydratedExtConfigs.value is null");c.value=!0,await Fe();const h=s.value.findIndex(f=>f.id===u);if(h>0){const[f]=s.value.splice(h,1);await Fe(),s.value.splice(0,0,f);const v=s.value.map(y=>y.id);se.setExtIdsOfCategoryLeaf({key:t.currentCategory,nextExtIds:v}),await Fe(),c.value=!1;const x=o.value.find(y=>y.getAttribute("value")===u);x==null||x.scrollIntoView({block:"center"})}}return fe(()=>{if(!t.currentCategory)return;const u=i.value;u!=null&&new H(u,{animation:150,dragClass:"sortable-drag",handle:".card-wrapper",sort:!0,onEnd:h=>{const{newIndex:f,oldIndex:v}=h;if(f===void 0||v===void 0||f===v||s.value===null)return;const[x]=s.value.splice(v,1);s.value.splice(f,0,x);const y=s.value.map(S=>S.id);se.setExtIdsOfCategoryLeaf({key:t.currentCategory,nextExtIds:y})}})}),(u,h)=>(_(),R("div",{id:"extension-curated-cards-wrapper",ref_key:"cardListRef",ref:i,class:"extension-curated-cards-wrapper"},[p(ii,{name:"list",css:c.value},{default:m(()=>[(_(!0),R(ye,null,je(s.value,f=>(_(),R("div",{key:f.id},[n.collectible?(_(),R("div",{key:0,ref_for:!0,ref_key:"cardEleRefs",ref:o,"class-name":"card-wrapper",value:f.id},[p(jo,{"hydrated-ext-config":f,"is-active":f.id===n.currentExtId,"collect-option":{starExtension:l,isStarred:f.isStarred||!1},onOpenExtension:h[0]||(h[0]=v=>u.$emit("openExtension",v))},null,8,["hydrated-ext-config","is-active","collect-option"])],8,ic)):(_(),N(jo,{key:1,"hydrated-ext-config":f,"is-active":f.id===n.currentExtId,onOpenExtension:h[1]||(h[1]=v=>u.$emit("openExtension",v))},null,8,["hydrated-ext-config","is-active"]))]))),128))]),_:1},8,["css"])],512))}});const Vo=ne(sc,[["__scopeId","data-v-5d3c4e89"]]),ac={class:"extension-view"},rc={class:"title"},lc={class:"content"},cc={class:"title"},uc={class:"content"},dc={class:"title"},hc={style:{"margin-left":"4px"}},pc={class:"content"},fc=Q({__name:"index",props:{currentCategory:{default:"all"},homeExtType:null},emits:["openExtension"],setup(n,{emit:e}){const t=n,{t:o}=Ye(),i=wt(),s=Xe(),a=C(),r=C(),l=C(""),c=C(),d=C(),u=C(!1),h=C(Boolean(window.innerWidth>900)),f=C(["context","info","related"]),v=w=>{e("openExtension",w,{related:!0})},x=()=>{s.$patch({isInfoCollapsed:!s.isInfoCollapsed,userSetInfoFlag:!0}),fo.emit("resize")},y=()=>{var T;const{currentCategory:w,homeExtType:I}=t;if(a.value){const P=a.value.filter(O=>O.key===t.currentCategory)[0];if(P!=null&&P.icon)r.value=P.icon;else{u.value=!0;return}}w==="home"&&I?l.value=o(`homeExtensions.${I.toLowerCase().replace(" ","-").replace("starred","star")}`):w.split("_")[0]==="custom"?l.value=(T=a.value)==null?void 0:T.filter(P=>P.key===t.currentCategory)[0].name:l.value=o(`category.${w}.label`),u.value&&(u.value=!1)};function S(){window.innerWidth>900?h.value=!0:h.value=!1,s.userSetInfoFlag||(window.innerWidth>900?s.isInfoCollapsed&&s.$patch({isInfoCollapsed:!1}):s.isInfoCollapsed||s.$patch({isInfoCollapsed:!0}))}return re(()=>i.path,async(w,I)=>{if(w===I)return;const T=i.path.split("/");T[1]==="extension"&&(c.value=J.find(P=>P.id===T[2]))},{immediate:!0}),re(()=>t.currentCategory,async(w,I)=>{var T;if(w!==I){switch(r.value="",t.currentCategory){case"home":if(t.homeExtType){ee(J,t.homeExtType||V.MOST_USED).then(P=>{d.value=P.map(O=>O.id)});break}case"star":{ee(J,V.STARRED).then(P=>{d.value=P.map(O=>O.id)});break}default:d.value=await wi(t.currentCategory||((T=c.value)==null?void 0:T.category[0])||"");break}a.value&&y()}},{immediate:!0}),re(()=>t.homeExtType,(w,I)=>{w!==I&&t.currentCategory==="home"&&(ee(J,t.homeExtType||V.MOST_USED).then(T=>{d.value=T.map(P=>P.id)}),y())}),re(h,()=>{s.$patch({userSetInfoFlag:!1})}),fe(()=>{window.addEventListener("resize",S),yi().then(w=>{a.value=w,y()})}),Tt(()=>{window.removeEventListener("resize",S)}),li(()=>{S()}),(w,I)=>{const T=k("a-button"),P=k("a-collapse-panel"),O=k("a-typography-text"),A=k("a-space"),D=k("a-collapse");return _(),R("div",ac,[b("div",{class:te({"extension-section":!0,collapsed:g(s).isInfoCollapsed})},[p(Ql,{class:"active-extension-wrap"},{collapse:m(()=>[p(T,{style:{width:"18px",height:"18px"},type:"text",size:"small",onClick:x},{icon:m(()=>[p(g(Ra),{width:"18px","is-fill":!g(s).isInfoCollapsed},null,8,["is-fill"])]),_:1})]),_:1})],2),b("div",{class:te({"right-bar":!0,collapsed:g(s).isInfoCollapsed})},[c.value?(_(),N(D,{key:0,activeKey:f.value,"onUpdate:activeKey":I[1]||(I[1]=E=>f.value=E),ghost:"","open-animation":{},"expand-icon-position":"right"},{expandIcon:m(({isActive:E})=>[p(g(Ha),{type:E?"bottom":"right"},null,8,["type"])]),default:m(()=>{var E,K;return[n.currentCategory&&!u.value?(_(),N(P,{id:"context-extensions",key:"context",class:"info-card"},{header:m(()=>[b("div",rc,[r.value?(_(),N(g(Gt),{key:0,icon:r.value},null,8,["icon"])):(_(),N(g(Eo),{key:1,style:{opacity:0}})),U(" "+$(l.value),1)])]),default:m(()=>{var F;return[b("div",lc,[p(Vo,{"current-ext-id":(F=c.value)==null?void 0:F.id,"origin-ext-ids":d.value||[],class:te(["extensions-card","active-extension"]),collectible:!0,"current-category":n.currentCategory,onOpenExtension:I[0]||(I[0]=Z=>w.$emit("openExtension",Z))},null,8,["current-ext-id","origin-ext-ids","current-category"])])]}),_:1})):z("",!0),((E=c.value)==null?void 0:E.related_extensions)&&((K=c.value)==null?void 0:K.related_extensions.length)>0?(_(),N(P,{id:"related-extensions",key:"related",class:"info-card"},{header:m(()=>[b("div",cc,[p(g(Ts)),U(" "+$(g(o)("extensionsView.related")),1)])]),default:m(()=>{var F;return[b("div",uc,[p(Vo,{"origin-ext-ids":(F=c.value)==null?void 0:F.related_extensions,class:te(["extensions-card","active-extension"]),onOpenExtension:v},null,8,["origin-ext-ids"])])]}),_:1})):z("",!0),(_(),N(P,{id:"extension-info",key:"info",class:"info-card"},{header:m(()=>[b("div",dc,[p(g(Eo)),b("span",hc,$(g(o)("extensionsView.details")),1)])]),default:m(()=>[b("div",pc,[p(A,{direction:"vertical"},{default:m(()=>{var F,Z;return[p(O,{type:"secondary"},{default:m(()=>{var q;return[U($(w.$t(`extension.${(q=c.value)==null?void 0:q.id}.description`)),1)]}),_:1}),p(O,{type:"secondary"},{default:m(()=>{var q;return[U($(g(o)("extensionsView.label.category"))+" "+$(u.value?"\u65E0":(q=c.value)==null?void 0:q.category.map(ae=>w.$t(`category.${ae}.label`)).join(",")),1)]}),_:1}),(F=c.value)!=null&&F.stage?(_(),N(O,{key:0,type:"secondary"},{default:m(()=>{var q;return[U($(g(o)("extensionsView.label.stage"))+" "+$((q=c.value)==null?void 0:q.stage),1)]}),_:1})):z("",!0),p(O,{type:"secondary"},{default:m(()=>{var q;return[U($(g(o)("extensionsView.label.author"))+" "+$(((q=c.value)==null?void 0:q.author)||"He3"),1)]}),_:1}),(Z=c.value)!=null&&Z.released?(_(),N(O,{key:1,type:"secondary"},{default:m(()=>{var q;return[U($(g(o)("extensionsView.label.releaseTime"))+" "+$((q=c.value)==null?void 0:q.released),1)]}),_:1})):z("",!0)]}),_:1})])]),_:1}))]}),_:1},8,["activeKey"])):z("",!0)],2)])}}});const mc=ne(fc,[["__scopeId","data-v-a415bb3a"]]),lo={16:"Shift",18:"Option",17:"Ctrl",91:"Command"};As()||(lo[18]="Alt",lo[91]="Win");const qe=lo,Ki={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9"},gc=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Gi={};let Ko=65;gc.forEach(n=>{Gi[Ko]=n,Ko++});const Yi=Gi,Xi={};let Go=112;for(let n=1;n<=12;n++)Xi[Go]="F"+n,Go++;const bo=Xi,qi={189:"-",187:"=",219:"[",220:"\\",221:"]",186:";",222:"'",188:",",190:".",191:"/",192:"`",32:"Space"},Lt={...qi,...Yi,...bo,...Ki,...qe};function Yo(n){const e={...qi,...Yi,...Ki};return Boolean(e[n])}function vc(n,e){if(n.length===0){he.error(Te("preferences.err1"));return}if(n.length===1&&!bo[n[0]]){he.error(Te("preferences.err2"));return}if(n.length===2){if(Yo([n[0]])&&Yo([n[1]])){he.error(Te("preferences.err3")+"Command\u3001Ctrl\u3001Shift\u3001Option");return}if(qe[n[0]]&&qe[n[1]]){he.error(Te("preferences.err4"));return}}if(n.length===3){if(de.exports.compact([qe[n[0]],qe[n[1]],qe[n[2]]]).length<2){he.error(Te("preferences.err6")+"Command\u3001Ctrl\u3001Shift\u3001Option");return}if(qe[n[0]]&&qe[n[1]]&&qe[n[2]]){he.error(Te("preferences.err4"));return}}e()}function Zi(){Ds.confirm({title:Te("preferences.confirmTitle"),content:Te("preferences.confirmContent"),okText:Te("preferences.reloadNow"),cancelText:Te("preferences.reloadLater"),class:"preferences-reload-modal",onOk(){return new Promise(()=>{location.reload()})},okButtonProps:{id:"preferences-reload-modal-ok-btn"},onCancel(){}})}const _c={class:"preferences-general-wrapper"},yc={class:"changeShortCut"},wc={key:1},xc={key:2},bc={key:3},Ec={class:"autoFocus"},Cc=Q({__name:"index",setup(n){const e=C(_n()),t=C(!1),o=C([18,32]),i=C([]),s=C(),a=C(!1),r=C(Ls()),l=C(null),c=C(ci()),{t:d}=Ye();Xe();function u(D){l.value=D,W.changeShortcut(D?ln(o.value):[])}function h(D){W.setAutoStart(D)}function f(){zs(r.value)}function v(D){Hs(D),Zi()}fe(()=>{W.getShortCut().then(D=>{de.exports.isEmpty(D)?l.value=!1:(l.value=!0,o.value=[...D])}),W.isAutoStart().then(D=>{a.value=D})});const x=Co(()=>{let D="";return o.value.map((E,K)=>{Lt[E]&&(D+=Lt[E]+" + ")}),D.slice(0,D.length-2)}),y=Co(()=>{let D="";return i.value.map((E,K)=>{Lt[E]&&(D+=Lt[E]+" + ")}),D.slice(0,D.length-2)}),S=C(!1),w=()=>{S.value=!0},I=()=>{S.value=!1};function T(D){let E=D.keyCode;if(E===13){S.value||A();return}if(E===8){i.value.pop();return}if(!i.value.includes(E)&&!!Lt[E]){if(bo[E]){i.value=[E];return}i.value.length===3&&i.value.shift(),i.value.push(E)}}function P(){t.value=!0,Fe(()=>{var D;(D=s==null?void 0:s.value)==null||D.focus()})}function O(){t.value=!1}function A(){vc(ln(i.value),async()=>{o.value=i.value,t.value=!1,await W.changeShortcut(l.value?ln(o.value):[])?he.success(d("preferences.err")):t.value=!1})}return(D,E)=>{const K=k("a-select"),F=k("a-form-item"),Z=k("a-switch"),q=k("a-col"),ae=k("a-input"),B=k("a-button"),G=k("a-row"),we=k("a-radio-group"),ke=k("a-form");return _(),R("div",_c,[p(ke,{"label-col":{span:8},"wrapper-col":{span:14},style:{"min-width":"500px"}},{default:m(()=>[p(F,{label:g(d)("preferences.language")},{default:m(()=>[p(K,{value:e.value,"onUpdate:value":E[0]||(E[0]=le=>e.value=le),options:g(Rs),onChange:v},null,8,["value","options"])]),_:1},8,["label"]),p(F,{label:g(d)("preferences.shortcut")},{default:m(()=>[p(Z,{id:"setShortCut",checked:l.value,"onUpdate:checked":E[1]||(E[1]=le=>l.value=le),disabled:t.value,onChange:u,size:"small"},null,8,["checked","disabled"])]),_:1},8,["label"]),l.value?(_(),N(G,{key:0,class:"changeShortCutWrapper"},{default:m(()=>[p(q,{span:"8"}),p(q,{span:"14",class:"col"},{default:m(()=>[b("div",yc,[t.value?(_(),N(ae,{key:0,ref_key:"inputRef",ref:s,class:"shortCut",value:g(y),onKeydown:[T,He(Ie(g(de.exports.noop),["prevent"]),["left"]),He(Ie(g(de.exports.noop),["prevent"]),["right"]),He(Ie(g(de.exports.noop),["prevent"]),["up"]),He(Ie(g(de.exports.noop),["prevent"]),["down"])],onCompositionstart:w,onCompositionend:I},null,8,["value","onKeydown"])):(_(),R("span",wc,$(g(x)),1)),t.value?(_(),R("div",bc,[p(B,{shape:"circle",class:"rightBtn",onClick:O},{icon:m(()=>[p(g(Ps))]),_:1}),p(B,{id:"confirm-change-hotkey-button",shape:"circle",class:"rightBtn",type:"primary",onClick:A},{icon:m(()=>[p(g(Fs))]),_:1})])):(_(),R("div",xc,[p(B,{id:"change-hotkey-button",shape:"circle",class:"rightBtn",onClick:P},{icon:m(()=>[p(g(Ns))]),_:1})]))])]),_:1}),p(q,{span:"8"}),p(q,{span:"14",class:"col",style:{"margin-top":"10px"}},{default:m(()=>[b("div",Ec,[b("span",null,$(g(d)("preferences.shortcutAutoFocus")),1),p(Z,{checked:c.value,"onUpdate:checked":E[2]||(E[2]=le=>c.value=le),onChange:E[3]||(E[3]=le=>g(Us)(le)),size:"small"},null,8,["checked"])])]),_:1})]),_:1})):z("",!0),p(F,{label:g(d)("preferences.autostart")},{default:m(()=>[p(Z,{checked:a.value,"onUpdate:checked":E[4]||(E[4]=le=>a.value=le),onChange:h,size:"small"},null,8,["checked"])]),_:1},8,["label"]),p(F,{label:g(d)("preferences.theme")},{default:m(()=>[p(we,{value:r.value,"onUpdate:value":E[5]||(E[5]=le=>r.value=le),options:g(Bs),onChange:f},null,8,["value","options"])]),_:1},8,["label"])]),_:1})])}}});const kc=ne(Cc,[["__scopeId","data-v-1950e937"]]),Sc={class:"preferences-categories-wrapper"},$c={key:0,class:"modification-hint"},Ic={key:1},Oc=Q({__name:"index",setup(n){const{t:e}=Ye(),t=C(null);let o;fe(()=>{se.getCategoryTree().then(E=>{o=JSON.parse(JSON.stringify(E)),t.value=E}).catch(E=>{console.error(E),t.value=[]})});const i=C(!1);re(()=>t,(E,K)=>{i.value=!a(E.value,o)},{deep:!0});const s=E=>E.map(K=>(Object.keys(K).forEach(F=>{K[F]===!1&&F==="disabled"&&delete K[F]}),K)),a=(E,K)=>JSON.stringify(s(E))===JSON.stringify(s(K)),r=C(!1);async function l(){r.value=!0,t.value=await se.getPresetCategoryTree(),r.value=!1}const c=[{title:"",key:"drag",width:50},{title:e("preferencesCategories.name"),dataIndex:"key",key:"key",align:"center"},{title:e("preferencesCategories.icon"),dataIndex:"icon",key:"icon",align:"center"},{title:e("preferencesCategories.enabled"),key:"enabled",align:"center"},{title:e("preferencesCategories.action"),key:"action",align:"center"}],d=C(!1),u=E=>{E!==d.value&&(d.value=E)},h=C("add"),f=vn({key:"",name:"",icon:""}),v=vn({name:[{required:!0,message:e("preferencesCategories.form.name")}],icon:[{required:!0,message:e("preferencesCategories.form.icon")}]}),{resetFields:x,validate:y,validateInfos:S}=oi(f,v);function w(){y().then(E=>{switch(h.value){case"add":t.value.push({key:"custom_"+Date.now(),icon:E.icon,name:E.name,type:"custom"});break;case"edit":const K=t.value.findIndex(F=>F.key===f.key);if(K===-1){he.error(e("preferencesCategories.noExist"));return}t.value[K]={...t.value[K],icon:E.icon,name:E.name,type:"custom"};break}u(!1),x()}).catch(E=>{})}function I(E){if(!t.value.find(F=>F.key===E)){he.error(e("preferencesCategories.noExist"));return}t.value=t.value.filter(F=>F.key!==E)}function T(){u(!1),x()}function P(E,K){const F=t.value.findIndex(Z=>Z.key===K);if(F<0){he.error(e("preferencesCategories.noExist"));return}t.value[F].disabled=!E}function O(E,K){if(h.value=E,u(!0),E==="edit"&&K){const F=t.value.find(Z=>Z.key===K);if(!F){he.error(e("preferencesCategories.noExist"));return}f.icon=F.icon,f.key=F.key,F.type&&F.type==="custom"?f.name=F.name:f.name=e(`category.${F.key}.label`)}}function A(E){f.icon=E}fe(()=>{const E=document.querySelector("#category-table tbody");E!==null&&new H(E,{animation:150,handle:".handle",ghostClass:"blue-background-class",sort:!0,onEnd:K=>{const{newIndex:F,oldIndex:Z}=K;if(F===void 0||Z===void 0||F===Z)return;const q=F-1,ae=Z-1,[B]=t.value.splice(ae,1);t.value.splice(q,0,B)}})});async function D(){try{await se.updateCategoryTree(de.exports.cloneDeep(t.value)),Zi()}catch(E){console.error(E),he.error(e("preferencesCategories.form.error.update"))}}return(E,K)=>{const F=k("a-button"),Z=k("a-popconfirm"),q=k("a-space"),ae=k("a-row"),B=k("a-switch"),G=k("a-divider"),we=k("a-table"),ke=k("a-input"),le=k("a-form-item"),Se=k("a-card"),qt=k("a-form"),Tn=k("a-modal"),cs=k("a-spin");return _(),N(cs,{spinning:r.value,delay:100},{default:m(()=>[b("div",Sc,[p(ae,null,{default:m(()=>[p(q,{style:{"margin-bottom":"10px"}},{default:m(()=>[p(F,{id:"add-categories",type:"primary",onClick:K[0]||(K[0]=it=>O("add"))},{default:m(()=>[U($(E.$t("common.add")),1)]),_:1}),p(Z,{title:E.$t("preferencesCategories.reset.title"),"ok-text":E.$t("common.confirm"),"ok-button-props":{id:"preferences-categories-reset-ok-btn"},"cancel-text":E.$t("common.cancel"),onConfirm:l},{default:m(()=>[p(F,{id:"reset-catagories-button",danger:""},{default:m(()=>[U($(E.$t("common.reset")),1)]),_:1})]),_:1},8,["title","ok-text","cancel-text"])]),_:1}),p(q,{class:"apply-space"},{default:m(()=>[i.value?(_(),R("div",$c,$(E.$t("common.modified")),1)):z("",!0),p(F,{id:"apply-categories-button",type:"primary",onClick:D},{default:m(()=>[U($(E.$t("common.apply")),1)]),_:1})]),_:1})]),_:1}),p(we,{id:"category-table",columns:c,"data-source":t.value,pagination:{pageSize:999,hideOnSinglePage:!0},scroll:{y:"calc(100vh - 280px)"}},{bodyCell:m(({column:it,record:Ne})=>[it.key==="drag"?(_(),N(g(Ws),{key:0,style:{cursor:"grab"},class:"handle"})):z("",!0),it.key==="key"?(_(),R("p",Ic,$(!Ne.type||Ne.type==="preset"?E.$t(`category.${Ne.key}.label`):Ne.name),1)):it.key==="icon"?(_(),N(vt(g(gn)(Ne.icon)),{key:2})):it.key==="enabled"?(_(),N(B,{key:3,checked:!Ne.disabled,onClick:An=>P(An,Ne.key)},null,8,["checked","onClick"])):it.key==="action"?(_(),R(ye,{key:4},[p(F,{type:"link",size:"small",onClick:An=>O("edit",Ne.key)},{default:m(()=>[U($(E.$t("common.edit")),1)]),_:2},1032,["onClick"]),Ne.key!==g(_t).STAR&&Ne.key!==g(_t).ALL?(_(),R(ye,{key:0},[p(G,{type:"vertical"}),p(Z,{title:E.$t("preferencesCategories.del.title"),"ok-text":E.$t("common.confirm"),"cancel-text":E.$t("common.cancel"),"ok-button-props":{id:"preferences-categories-ok-btn"},onConfirm:An=>I(Ne.key)},{default:m(()=>[p(F,{type:"link",size:"small",danger:""},{default:m(()=>[U($(E.$t("common.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):z("",!0)],64)):z("",!0)]),_:1},8,["data-source","scroll"]),p(Tn,{title:E.$t(`common.${h.value}`)+E.$t("preferences.category"),visible:d.value,"destroy-on-close":"","ok-button-props":{id:"preferences-categories-modal-ok-btn"},onOk:w,onCancel:T},{default:m(()=>[p(qt,null,{default:m(()=>[p(le,Zn({label:E.$t("preferencesCategories.name"),"has-feedback":"",name:"name",required:""},g(S).name),{default:m(()=>[p(ke,{value:f.name,"onUpdate:value":K[1]||(K[1]=it=>f.name=it)},null,8,["value"])]),_:1},16,["label"]),p(le,Zn({label:E.$t("preferencesCategories.icon"),required:"","has-feedback":"",name:"icon"},g(S).icon),{default:m(()=>[p(q,null,{default:m(()=>[p(Se,{class:"preview-icon"},{default:m(()=>[(_(),N(vt(g(gn)(f.icon))))]),_:1}),p(g(ka),{onChosenIcon:A},{default:m(()=>[p(F,{id:"chosen-icon-button"},{default:m(()=>[U($(E.$t("common.select")),1)]),_:1})]),_:1})]),_:1})]),_:1},16,["label"])]),_:1})]),_:1},8,["title","visible"])])]),_:1},8,["spinning"])}}});const Mc=ne(Oc,[["__scopeId","data-v-3d3a37a9"]]),Ji=n=>(tt("data-v-69b0299f"),n=n(),nt(),n),Tc={class:"login-wrapper"},Ac=Ji(()=>b("div",{class:"desc"},"Login By Github",-1)),Dc=Ji(()=>b("div",{class:"desc"},"Login By Google",-1)),Lc={class:"login-by-email"},Rc=Q({__name:"index",props:{visible:{type:Boolean}},emits:["modalShow"],setup(n,{emit:e}){const{t}=Ye(),o=C({email:""});function i(){W.openBrowser(`${Io}${ga}`)}function s(){W.openBrowser(`${Io}${va}`)}const a=l=>{let{email:c}=l;mo.post(_a,{email:c}).then(d=>{he.success(t("home.login.sendEmailSuccess"))})};function r(l){}return(l,c)=>{const d=k("a-divider"),u=k("a-input"),h=k("a-form-item"),f=k("a-button"),v=k("a-form"),x=k("a-modal");return _(),N(x,{visible:l.$props.visible,"onUpdate:visible":c[1]||(c[1]=y=>l.$props.visible=y),title:l.$t("home.login.loginTitle"),onCancel:c[2]||(c[2]=y=>l.$emit("modalShow"))},{default:m(()=>[b("div",Tc,[b("div",{class:"github-login",onClick:s},[p(g(js),{style:{"font-size":"30px"},class:"icon"}),Ac]),b("div",{class:"google-login",onClick:i},[p(g(Vs),{style:{"font-size":"30px"},class:"icon"}),Dc]),p(d,null,{default:m(()=>[U($(l.$t("home.login.loginByEmail")),1)]),_:1}),b("div",Lc,[p(v,{model:o.value,name:"basic","label-col":{span:6},"wrapper-col":{span:20},autocomplete:"off",onFinish:a,onFinishFailed:r},{default:m(()=>[p(h,{label:"Email",name:"email",rules:[{required:!0,message:l.$t("home.login.inputEmail")},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:l.$t("home.login.inputCurrentEmail")}]},{default:m(()=>[p(u,{value:o.value.email,"onUpdate:value":c[0]||(c[0]=y=>o.value.email=y)},null,8,["value"])]),_:1},8,["rules"]),p(h,{"wrapper-col":{offset:6,span:20}},{default:m(()=>[p(f,{type:"primary","html-type":"submit"},{default:m(()=>[U($(l.$t("home.login.emailSubmit")),1)]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1},8,["visible","title"])}}});const Nc=ne(Rc,[["__scopeId","data-v-69b0299f"]]),Pc={class:"account-wrapper"},Fc={class:"login-btn"},Uc=Q({__name:"index",setup(n){const e=Xe(),t=C(""),o=C(""),i=C(!1),s=C(!1),a=C(!1),r=C(!1);fe(()=>{e.nickname.length>0&&(t.value=e.nickname,o.value=e.nickname),e.$subscribe((h,f)=>{if(h.type==="patch object"){const v=f.nickname;v.length>0&&(t.value=v,o.value=v)}},{detached:!1})});async function l(){if(o.value===t.value||o.value.length===0){s.value=!1,o.value=t.value,he.warn("\u4FEE\u6539\u5931\u8D25");return}mo.patch(ya,{nickname:o.value}).then(h=>{he.success("\u4FEE\u6539\u6210\u529F"),e.$patch({nickname:o.value}),t.value=o.value}).catch(h=>{o.value=t.value,he.error(h)}),s.value=!1}function c(){e.$patch({token:"",nickname:"",email:""}),W.deleteLoginToken(),a.value=!1,o.value="",t.value="",he.success("\u9000\u51FA\u767B\u5F55\u6210\u529F")}function d(){W.openBrowser(ma)}function u(){o.value=t.value}return(h,f)=>{const v=k("a-form-item"),x=k("a-switch"),y=k("a-button"),S=k("a-form"),w=k("a-modal");return _(),R("div",Pc,[p(S,{"label-col":{span:8},"wrapper-col":{span:14},style:{"min-width":"500px"}},{default:m(()=>[g(e).token?(_(),N(v,{key:0,label:h.$t("account.user")},{default:m(()=>[U($(o.value),1)]),_:1},8,["label"])):z("",!0),g(e).token?(_(),N(v,{key:1,label:h.$t("account.settingSync")},{default:m(()=>[p(x,{checked:i.value,"onUpdate:checked":f[0]||(f[0]=I=>i.value=I),"checked-children":h.$t("account.open"),"un-checked-children":h.$t("account.close"),disabled:!g(e).token},null,8,["checked","checked-children","un-checked-children","disabled"])]),_:1},8,["label"])):z("",!0),b("div",Fc,[g(e).token?(_(),N(y,{key:0,onClick:f[1]||(f[1]=()=>{a.value=!0}),danger:"",size:"large"},{default:m(()=>[U($(h.$t("home.login.logout")),1)]),_:1})):z("",!0),g(e).token?z("",!0):(_(),N(y,{key:1,onClick:d,type:"primary",size:"large"},{default:m(()=>[U($(h.$t("home.login.loginTitle")),1)]),_:1}))])]),_:1}),p(w,{visible:s.value,"onUpdate:visible":f[2]||(f[2]=I=>s.value=I),title:h.$t("account.changNickname"),onOk:l,onCancel:u},{default:m(()=>[b("p",null,$(h.$t("account.changeNicknameConfirm"))+" "+$(o.value),1)]),_:1},8,["visible","title"]),p(w,{visible:a.value,"onUpdate:visible":f[3]||(f[3]=I=>a.value=I),title:h.$t("home.login.logout"),onOk:c},{default:m(()=>[b("p",null,$(h.$t("account.logoutConfirm")),1)]),_:1},8,["visible","title"]),g(e).token?z("",!0):(_(),N(Nc,{key:0,onModalShow:f[4]||(f[4]=()=>r.value=!1),visible:r.value},null,8,["visible"]))])}}});const Bc=ne(Uc,[["__scopeId","data-v-a01b1ed9"]]);function zc(){se.clearCache(),window.localStorage.clear(),window.sessionStorage.clear()}const Hc={class:"preferences-advanced-wrapper"},Wc={class:"window"},jc={style:{width:"200px"}},Vc=Q({__name:"index",setup(n){const{t:e}=Ye(),t=C(null);fe(()=>{se.getWindowsSettings().then(i=>{t.value={rememberPosition:i.position,rememberSize:i.size}}).catch(i=>{console.error(i),he.error(e("preferencesAdvanced.window.error.failFetch"))})}),re(t,async(i,s)=>{if(!(i!==null&&s===null)){if(t.value===null){he.error(e("preferencesAdvanced.window.error.failSave")),console.error("window.value is null");return}se.setWindowsSettings({position:t.value.rememberPosition,size:t.value.rememberSize})}},{deep:!0});function o(){try{zc(),location.reload(),he.success(e("preferencesAdvanced.cache.success"))}catch{he.error(e("preferences.err5"))}}return(i,s)=>{const a=k("a-checkbox"),r=k("a-form-item"),l=k("a-button"),c=k("a-popconfirm"),d=k("a-form");return _(),R("div",Hc,[p(d,{"label-col":{span:8},"wrapper-col":{span:14},style:{"min-width":"500px"}},{default:m(()=>[p(r,{label:i.$t("preferencesAdvanced.window.title")},{default:m(()=>[b("div",Wc,[t.value===null?(_(),R(ye,{key:0},[],64)):(_(),R(ye,{key:1},[p(a,{checked:t.value.rememberPosition,"onUpdate:checked":s[0]||(s[0]=u=>t.value.rememberPosition=u)},{default:m(()=>[U($(i.$t("preferencesAdvanced.window.position.remember")),1)]),_:1},8,["checked"]),p(a,{checked:t.value.rememberSize,"onUpdate:checked":s[1]||(s[1]=u=>t.value.rememberSize=u),style:{"margin-left":"0"}},{default:m(()=>[U($(i.$t("preferencesAdvanced.window.size.remember")),1)]),_:1},8,["checked"])],64))])]),_:1},8,["label"]),p(r,{label:i.$t("preferencesAdvanced.cache.clear")},{default:m(()=>[p(c,{"ok-text":i.$t("common.confirm"),"cancel-text":i.$t("common.cancel")},{title:m(()=>[b("div",jc,$(i.$t("preferencesAdvanced.cache.confirm")),1)]),icon:m(()=>[p(g(Ks),{style:{color:"red"}})]),okButton:m(()=>[p(l,{id:"reset-factory-confirm-button",type:"primary",size:"small",danger:"",onClick:o},{default:m(()=>[U($(i.$t("common.confirm")),1)]),_:1})]),default:m(()=>[p(l,{id:"reset-factory",type:"dashed",danger:""},{default:m(()=>[U($(i.$t("preferencesAdvanced.cache.desc")),1)]),_:1})]),_:1},8,["ok-text","cancel-text"])]),_:1},8,["label"])]),_:1})])}}});const Kc=ne(Vc,[["__scopeId","data-v-3a40449f"]]),Gc={class:"wrapper"},Yc={id:"preferences-tab-general"},Xc={id:"preferences-tab-category"},qc={id:"preferences-tab-account"},Zc={id:"preferences-tab-advanced"},Jc=Q({__name:"index",props:{activeKey:null},setup(n){const e=n,t=C("1");return fe(()=>{e.activeKey&&(t.value=e.activeKey)}),(o,i)=>{const s=k("a-tab-pane"),a=k("a-tabs");return _(),R("div",Gc,[p(a,{activeKey:t.value,"onUpdate:activeKey":i[0]||(i[0]=r=>t.value=r),"tab-bar-gutter":"12",class:"tab",type:"card"},{default:m(()=>[p(s,{key:"1"},{tab:m(()=>[b("span",Yc,[p(g(Gs)),U(" "+$(o.$t("preferences.general")),1)])]),default:m(()=>[p(kc,{ref:"generalRef"},null,512)]),_:1}),p(s,{key:"2"},{tab:m(()=>[b("span",Xc,[p(g(Ys)),U(" "+$(o.$t("preferences.category")),1)])]),default:m(()=>[p(Mc,{ref:"categoriesRef"},null,512)]),_:1}),g(po)()?(_(),N(s,{key:"5"},{tab:m(()=>[b("span",qc,[p(g(Xs)),U(" "+$(o.$t("preferences.account")),1)])]),default:m(()=>[p(Bc,{ref:"accountRef"},null,512)]),_:1})):z("",!0),p(s,{key:"6"},{tab:m(()=>[b("span",Zc,[p(g(qs)),U(" "+$(o.$t("preferences.advanced")),1)])]),default:m(()=>[p(Kc,{ref:"advancedRef"},null,512)]),_:1})]),_:1},8,["activeKey"])])}}});const Qc=ne(Jc,[["__scopeId","data-v-5caa379f"]]),Qi=""+new URL("../logo.png",import.meta.url).href,es=n=>(tt("data-v-1ba2f49f"),n=n(),nt(),n),eu={class:"welcomeWrapper"},tu={class:"contentWrap"},nu={class:"content"},ou={class:"left"},iu=es(()=>b("img",{src:Qi,alt:""},null,-1)),su=es(()=>b("div",{class:"title"},"\u{1F389} Welcome !",-1)),au={class:"desc"},ru={class:"right"},lu={class:"item"},cu={class:"title"},uu={class:"hotkey"},du={class:"desc"},hu={class:"item"},pu={class:"title"},fu={class:"hotkey"},mu={class:"desc"},gu={class:"item"},vu={class:"title"},_u={class:"desc"},yu={class:"bottom"},wu=Q({__name:"index",props:{close:null},setup(n){const e=n;function t(){e.close(),Fe(()=>{var o;(o=document.querySelector("#home-searchbar-input"))==null||o.focus()})}return(o,i)=>{const s=k("a-button");return _(),R("div",eu,[b("div",tu,[b("div",nu,[b("div",ou,[iu,su,b("div",au,$(o.$t("home.welcome.welcomeDesc")),1)]),b("div",ru,[b("div",lu,[b("div",cu,[U($(o.$t("home.welcome.titleOne"))+" ",1),b("span",uu,$(g(ko)()),1)]),b("div",du,$(o.$t("home.welcome.descOne",{v:g(ko)()})),1)]),b("div",hu,[b("div",pu,[U($(o.$t("home.welcome.titleTwo"))+" ",1),b("span",fu,$(g(Dn)()),1)]),b("div",mu,$(o.$t("home.welcome.descTwo",{v:g(Dn)()})),1)]),b("div",gu,[b("div",vu,$(o.$t("home.welcome.titleThree")),1),b("div",_u,$(o.$t("home.welcome.descThree")),1)])])]),b("div",yu,[p(s,{size:"large",type:"primary",style:{"margin-right":"60px"},onClick:t},{default:m(()=>[U($(o.$t("home.welcome.search"))+" ("+$(g(Dn)())+") ",1)]),_:1}),p(s,{id:"welcome-start-button",size:"large",type:"primary",onClick:n.close},{default:m(()=>[U($(o.$t("home.welcome.start")),1)]),_:1},8,["onClick"])])])])}}});const xu=ne(wu,[["__scopeId","data-v-1ba2f49f"]]),bu={class:te(["home-extensions-wrapper"])},Eu={key:0,class:te({"starred-extensions-wrap":!0})},Cu=Q({__name:"index",setup(n){Ye();const e=Sn(),t=wt(),o=C(null),i=C(null);ee(J,V.RECENTLY_USED).then(u=>{i.value=u.map(h=>h.id)});const s=C(null);ee(J,V.MOST_USED).then(u=>{s.value=u.map(h=>h.id)});const a=C(null);ee(J,V.RECOMMENDED).then(u=>{a.value=u.map(h=>h.id)});const r=C(null);ee(J,V.STARRED).then(u=>{r.value=u.map(h=>h.id)}),re(()=>t.path,()=>{t.path.includes("extension")?o.value=!0:o.value=null},{immediate:!0});const l=(u,h)=>{if(c.value!==null)switch(c.value){case V.RECENTLY_USED:ee(J,V.RECENTLY_USED).then(f=>{i.value=f.map(v=>v.id)});break;case V.MOST_USED:ee(J,V.MOST_USED).then(f=>{s.value=f.map(v=>v.id)});break;case V.STARRED:o.value!==null&&o.value.id===u&&d(),ee(J,V.STARRED).then(f=>{r.value=f.map(v=>v.id)});break}else ee(J,V.STARRED).then(f=>{r.value=f.map(v=>v.id)}),ee(J,V.RECENTLY_USED).then(f=>{i.value=f.map(v=>v.id)}),ee(J,V.MOST_USED).then(f=>{s.value=f.map(v=>v.id)}),ee(J,V.RECOMMENDED).then(f=>{a.value=f.map(v=>v.id)})},c=C(null),d=()=>{o.value=null,c.value=null,ee(J,V.STARRED).then(u=>{r.value=u.map(h=>h.id)}),ee(J,V.RECENTLY_USED).then(u=>{i.value=u.map(h=>h.id)}),ee(J,V.MOST_USED).then(u=>{s.value=u.map(h=>h.id)}),ee(J,V.RECOMMENDED).then(u=>{a.value=u.map(h=>h.id)}),e.push("/")};return(u,h)=>{const f=k("a-empty");return _(),R("div",bu,[r.value!==null?(_(),R("div",Eu,[r.value.length>0?(_(),N(It,{key:0,"origin-ext-ids":r.value,class:te(["starred-used-wrap","curated-cards"]),"active-id":o.value==null?void 0:o.value.id,"has-opening-extension":!1,"current-category":g(_t).STAR,onOpenExtension:h[0]||(h[0]=v=>u.$emit("openExtension",v,g(V).STARRED)),onStarExtension:l},null,8,["origin-ext-ids","active-id","current-category"])):(_(),N(f,{key:1,image:g(cn).PRESENTED_IMAGE_SIMPLE,class:"empty"},{description:m(()=>[b("div",null,$(u.$t("homeExtensions.starEmpty")),1)]),_:1},8,["image"]))])):z("",!0)])}}});const ku=ne(Cu,[["__scopeId","data-v-d50efd5f"]]),Su=""+new URL("../pure-color-logo.png",import.meta.url).href,$u=n=>(tt("data-v-22f345d0"),n=n(),nt(),n),Iu={class:te(["menu-wrapper"])},Ou=$u(()=>b("img",{src:Su,alt:""},null,-1)),Mu=[Ou],Tu=Q({__name:"index",props:{isCollapse:{type:Boolean},selectedMenus:null},emits:["click","openSettings","toggleCollapsed"],setup(n,{emit:e}){const t=Xe(),o=C(Boolean(window.innerWidth>1e3));re(o,()=>{t.$patch({userSetSpreadFlag:!1})});function i(){window.innerWidth>1e3?o.value=!0:o.value=!1,t.userSetSpreadFlag||(window.innerWidth>1e3?t.isMenuSpread||t.$patch({isMenuSpread:!0}):t.isMenuSpread&&t.$patch({isMenuSpread:!1}))}fe(()=>{window.addEventListener("resize",i)}),Tt(()=>{window.removeEventListener("resize",i)}),li(()=>{i()});function s(){t.$patch({isMenuSpread:!1,userSetSpreadFlag:!0}),fo.emit("resize")}const a=C();yi().then(l=>{a.value=l});const r=l=>{e("click",l)};return(l,c)=>{const d=k("a-menu-item"),u=k("a-menu");return _(),R("div",Iu,[b("div",{class:te({header:!0,winHeader:g(rt)()}),style:{"-webkit-app-region":"drag"}},[g(rt)()?(_(),R("div",{key:0,class:te({winLogo:!0,dark:g(t).dark}),style:{"-webkit-app-region":"no-drag"}},Mu,2)):z("",!0),b("span",{class:"closeIcon",style:{"-webkit-app-region":"no-drag"},onClick:c[0]||(c[0]=h=>s())},[p(g(Zs),{id:"header-close-menu-icon",class:"icon"})])],2),p(u,{"selected-keys":n.selectedMenus,class:"menu",mode:"inline",theme:g(t).dark?"dark":"light","inline-collapsed":n.isCollapse,onClick:r},{default:m(()=>[(_(!0),R(ye,null,je(a.value,h=>(_(),N(d,{id:h.key,key:h.key},{icon:m(()=>[(_(),N(vt(g(gn)(h.icon))))]),default:m(()=>[h.key==="home"?(_(),R(ye,{key:0},[U($(l.$t("home.home")),1)],64)):(_(),N(xi,{key:1,"category-leaf":h},null,8,["category-leaf"]))]),_:2},1032,["id"]))),128))]),_:1},8,["selected-keys","theme","inline-collapsed"])])}}});const Au=ne(Tu,[["__scopeId","data-v-22f345d0"]]);var Vn=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Kn(n,e,t,o){n.addEventListener?n.addEventListener(e,t,o):n.attachEvent&&n.attachEvent("on".concat(e),function(){t(window.event)})}function ts(n,e){for(var t=e.slice(0,e.length-1),o=0;o<t.length;o++)t[o]=n[t[o].toLowerCase()];return t}function ns(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");for(var e=n.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function Du(n,e){for(var t=n.length>=e.length?n:e,o=n.length>=e.length?e:n,i=!0,s=0;s<t.length;s++)o.indexOf(t[s])===-1&&(i=!1);return i}var Vt={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Vn?173:189,"=":Vn?61:187,";":Vn?59:186,"'":222,"[":219,"]":221,"\\":220},Ge={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},co={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},be={16:!1,18:!1,17:!1,91:!1},ve={};for(var sn=1;sn<20;sn++)Vt["f".concat(sn)]=111+sn;var ce=[],Xo=!1,os="all",is=[],Mn=function(e){return Vt[e.toLowerCase()]||Ge[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},Lu=function(e){return Object.keys(Vt).find(function(t){return Vt[t]===e})},Ru=function(e){return Object.keys(Ge).find(function(t){return Ge[t]===e})};function ss(n){os=n||"all"}function Kt(){return os||"all"}function Nu(){return ce.slice(0)}function Pu(){return ce.map(function(n){return Lu(n)||Ru(n)||String.fromCharCode(n)})}function Fu(n){var e=n.target||n.srcElement,t=e.tagName,o=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(o=!1),o}function Uu(n){return typeof n=="string"&&(n=Mn(n)),ce.indexOf(n)!==-1}function Bu(n,e){var t,o;n||(n=Kt());for(var i in ve)if(Object.prototype.hasOwnProperty.call(ve,i))for(t=ve[i],o=0;o<t.length;)t[o].scope===n?t.splice(o,1):o++;Kt()===n&&ss(e||"all")}function zu(n){var e=n.keyCode||n.which||n.charCode,t=ce.indexOf(e);if(t>=0&&ce.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&ce.splice(0,ce.length),(e===93||e===224)&&(e=91),e in be){be[e]=!1;for(var o in Ge)Ge[o]===e&&(Ze[o]=!1)}}function Hu(n){if(typeof n>"u")Object.keys(ve).forEach(function(a){return delete ve[a]});else if(Array.isArray(n))n.forEach(function(a){a.key&&Gn(a)});else if(typeof n=="object")n.key&&Gn(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];var i=t[0],s=t[1];typeof i=="function"&&(s=i,i=""),Gn({key:n,scope:i,method:s,splitKey:"+"})}}var Gn=function(e){var t=e.key,o=e.scope,i=e.method,s=e.splitKey,a=s===void 0?"+":s,r=ns(t);r.forEach(function(l){var c=l.split(a),d=c.length,u=c[d-1],h=u==="*"?"*":Mn(u);if(!!ve[h]){o||(o=Kt());var f=d>1?ts(Ge,c):[];ve[h]=ve[h].filter(function(v){var x=i?v.method===i:!0;return!(x&&v.scope===o&&Du(v.mods,f))})}})};function qo(n,e,t,o){if(e.element===o){var i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(var s in be)Object.prototype.hasOwnProperty.call(be,s)&&(!be[s]&&e.mods.indexOf(+s)>-1||be[s]&&e.mods.indexOf(+s)===-1)&&(i=!1);(e.mods.length===0&&!be[16]&&!be[18]&&!be[17]&&!be[91]||i||e.shortcut==="*")&&e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0))}}}function Zo(n,e){var t=ve["*"],o=n.keyCode||n.which||n.charCode;if(!!Ze.filter.call(this,n)){if((o===93||o===224)&&(o=91),ce.indexOf(o)===-1&&o!==229&&ce.push(o),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(v){var x=co[v];n[v]&&ce.indexOf(x)===-1?ce.push(x):!n[v]&&ce.indexOf(x)>-1?ce.splice(ce.indexOf(x),1):v==="metaKey"&&n[v]&&ce.length===3&&(n.ctrlKey||n.shiftKey||n.altKey||(ce=ce.slice(ce.indexOf(x))))}),o in be){be[o]=!0;for(var i in Ge)Ge[i]===o&&(Ze[i]=!0);if(!t)return}for(var s in be)Object.prototype.hasOwnProperty.call(be,s)&&(be[s]=n[co[s]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(ce.indexOf(17)===-1&&ce.push(17),ce.indexOf(18)===-1&&ce.push(18),be[17]=!0,be[18]=!0);var a=Kt();if(t)for(var r=0;r<t.length;r++)t[r].scope===a&&(n.type==="keydown"&&t[r].keydown||n.type==="keyup"&&t[r].keyup)&&qo(n,t[r],a,e);if(o in ve){for(var l=0;l<ve[o].length;l++)if((n.type==="keydown"&&ve[o][l].keydown||n.type==="keyup"&&ve[o][l].keyup)&&ve[o][l].key){for(var c=ve[o][l],d=c.splitKey,u=c.key.split(d),h=[],f=0;f<u.length;f++)h.push(Mn(u[f]));h.sort().join("")===ce.sort().join("")&&qo(n,c,a,e)}}}}function Wu(n){return is.indexOf(n)>-1}function Ze(n,e,t){ce=[];var o=ns(n),i=[],s="all",a=document,r=0,l=!1,c=!0,d="+",u=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(s=e.scope),e.element&&(a=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(u=e.capture),typeof e.splitKey=="string"&&(d=e.splitKey)),typeof e=="string"&&(s=e);r<o.length;r++)n=o[r].split(d),i=[],n.length>1&&(i=ts(Ge,n)),n=n[n.length-1],n=n==="*"?"*":Mn(n),n in ve||(ve[n]=[]),ve[n].push({keyup:l,keydown:c,scope:s,mods:i,shortcut:o[r],method:t,key:o[r],splitKey:d,element:a});typeof a<"u"&&!Wu(a)&&window&&(is.push(a),Kn(a,"keydown",function(h){Zo(h,a)},u),Xo||(Xo=!0,Kn(window,"focus",function(){ce=[]},u)),Kn(a,"keyup",function(h){Zo(h,a),zu(h)},u))}function ju(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(ve).forEach(function(t){var o=ve[t].filter(function(i){return i.scope===e&&i.shortcut===n});o.forEach(function(i){i&&i.method&&i.method()})})}var Yn={getPressedKeyString:Pu,setScope:ss,getScope:Kt,deleteScope:Bu,getPressedKeyCodes:Nu,isPressed:Uu,filter:Fu,trigger:ju,unbind:Hu,keyMap:Vt,modifier:Ge,modifierMap:co};for(var Xn in Yn)Object.prototype.hasOwnProperty.call(Yn,Xn)&&(Ze[Xn]=Yn[Xn]);if(typeof window<"u"){var Vu=window.hotkeys;Ze.noConflict=function(n){return n&&window.hotkeys===Ze&&(window.hotkeys=Vu),Ze},window.hotkeys=Ze}let Jo=36,as="";for(;Jo--;)as+=Jo.toString(36);function Qo(n=11){let e="",t=n;for(;t--;)e+=as[Math.random()*36|0];return e}const Ku=n=>n.replace(/[|\\{}()[\]^$+*?.-]/g,e=>`\\${e}`),Gu=n=>n.replace(/\s{2,}/g," ").split(" ").join("|"),Yu=({terms:n,matchExactly:e=!1})=>{if(typeof n!="string")throw new TypeError("Expected a string");const t=Ku(n.trim());return`(${e?t:Gu(t)})`},Xu=({terms:n,matchExactly:e=!1})=>{try{const t=/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.exec(n);return t?new RegExp(t[2],t[3]):new RegExp(Yu({terms:n,matchExactly:e}),"ig")}catch{throw new TypeError("Expected terms to be either a string or a RegExp!")}},qu=n=>e=>e!==null&&typeof e<"u"&&n in e,an=qu("match"),rn=n=>typeof n<"u";function Zu({curr:n,next:e,prev:t,clipBy:o=3}){const i=n.text.split(" "),s=i.length;if(n.match||o>=s)return n.text;const a="...";return rn(e)&&rn(t)&&an(t)&&an(e)?s>o*2?[...i.slice(0,o),a,...i.slice(-o)].join(" "):n.text:rn(e)&&an(e)?[a,...i.slice(-o)].join(" "):rn(t)&&an(t)?[...i.slice(0,o),a].join(" "):n.text}var Rt=Object.assign;const Ju=n=>n.length>0,Qu=({text:n,query:e,clipBy:t,matchExactly:o=!1})=>{const i=typeof e=="string"?e.trim():e;if(i==="")return[{key:Qo(),text:n,match:!1}];const s=Xu({terms:e,matchExactly:o});return n.split(s).filter(Ju).map(a=>({key:Qo(),text:a,match:o?a.toLowerCase()===i.toLowerCase():s.test(a)})).map((a,r,l)=>Rt(Rt({},a),typeof t=="number"&&{text:Zu(Rt(Rt(Rt({curr:a},r<l.length-1&&{next:l[r+1]}),r>0&&{prev:l[r-1]}),{clipBy:t}))}))},ed=["aria-label"],td=Q({__name:"HighlightWords",props:{text:null,query:null},setup(n){const e=n,t=C([]);return re([()=>e.text,()=>e.query],([o,i])=>{t.value=Qu({text:o,query:i})},{immediate:!0}),(o,i)=>(_(),R("span",{class:"highlight-words-wrapper","aria-label":n.text},[(_(!0),R(ye,null,je(t.value,s=>(_(),R("span",{key:s.key,class:te({match:s.match}),"aria-hidden":""},$(s.text),3))),128))],8,ed))}});const ei=ne(td,[["__scopeId","data-v-1435d66c"]]);function qn(n){return Math.abs(Math.floor(n))}function gt(n,e){return Math.random()*(e-n)+n}function ze(n,e){return Math.floor(gt(n,e+1))}function ti(n,e,t,o){const i=Math.pow;return Math.sqrt(i(n-t,2)+i(e-o,2))}function uo(n,e,t=1){if(n>360||n<0)throw new Error(`Expected hue 0-360 range, got \`${n}\``);if(e>100||e<0)throw new Error(`Expected lightness 0-100 range, got \`${e}\``);if(t>1||t<0)throw new Error(`Expected alpha 0-1 range, got \`${t}\``);return`hsla(${n}, 100%, ${e}%, ${t})`}const ni=n=>{if(typeof n=="object"&&n!==null){if(typeof Object.getPrototypeOf=="function"){const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null}return Object.prototype.toString.call(n)==="[object Object]"}return!1},nd=["__proto__","constructor","prototype"],rs=(...n)=>n.reduce((e,t)=>(Object.keys(t).forEach(o=>{nd.includes(o)||(Array.isArray(e[o])&&Array.isArray(t[o])?e[o]=t[o]:ni(e[o])&&ni(t[o])?e[o]=rs(e[o],t[o]):e[o]=t[o])}),e),{});class od{constructor({x:e,y:t,ctx:o,hue:i,decay:s,gravity:a,friction:r,brightness:l,flickering:c,lineWidth:d,explosionLength:u}){M(this,"x");M(this,"y");M(this,"ctx");M(this,"hue");M(this,"friction");M(this,"gravity");M(this,"flickering");M(this,"lineWidth");M(this,"explosionLength");M(this,"angle");M(this,"speed");M(this,"brightness");M(this,"coordinates",[]);M(this,"decay");M(this,"alpha",1);for(this.x=e,this.y=t,this.ctx=o,this.hue=i,this.gravity=a,this.friction=r,this.flickering=c,this.lineWidth=d,this.explosionLength=u,this.angle=gt(0,Math.PI*2),this.speed=ze(1,10),this.brightness=ze(l.min,l.max),this.decay=gt(s.min,s.max);this.explosionLength--;)this.coordinates.push([e,t])}update(e){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&e()}draw(){const e=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth,this.ctx.fillStyle=uo(this.hue,this.brightness,this.alpha),this.ctx.moveTo(this.coordinates[e][0],this.coordinates[e][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=uo(this.hue,this.flickering?gt(0,this.brightness):this.brightness,this.alpha),this.ctx.stroke()}}class id{constructor(e,t){M(this,"active",!1);M(this,"x");M(this,"y");this.options=e,this.canvas=t,this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=this.pointerMove.bind(this)}get mouseOptions(){return this.options.mouse}mount(){this.canvas.addEventListener("pointerdown",this.pointerDown),this.canvas.addEventListener("pointerup",this.pointerUp),this.canvas.addEventListener("pointermove",this.pointerMove)}unmount(){this.canvas.removeEventListener("pointerdown",this.pointerDown),this.canvas.removeEventListener("pointerup",this.pointerUp),this.canvas.removeEventListener("pointermove",this.pointerMove)}usePointer(e,t){const{click:o,move:i}=this.mouseOptions;(o||i)&&(this.x=e.pageX-this.canvas.offsetLeft,this.y=e.pageY-this.canvas.offsetTop,this.active=t)}pointerDown(e){this.usePointer(e,this.mouseOptions.click)}pointerUp(e){this.usePointer(e,!1)}pointerMove(e){this.usePointer(e,this.active)}}class sd{constructor(){M(this,"hue");M(this,"rocketsPoint");M(this,"opacity");M(this,"acceleration");M(this,"friction");M(this,"gravity");M(this,"particles");M(this,"explosion");M(this,"mouse");M(this,"boundaries");M(this,"sound");M(this,"delay");M(this,"brightness");M(this,"decay");M(this,"flickering");M(this,"intensity");M(this,"traceLength");M(this,"traceSpeed");M(this,"lineWidth");M(this,"lineStyle");M(this,"autoresize");this.autoresize=!0,this.lineStyle="round",this.flickering=50,this.traceLength=3,this.traceSpeed=10,this.intensity=30,this.explosion=5,this.gravity=1.5,this.opacity=.5,this.particles=50,this.friction=.95,this.acceleration=1.05,this.hue={min:0,max:360},this.rocketsPoint={min:50,max:50},this.lineWidth={explosion:{min:1,max:3},trace:{min:1,max:2}},this.mouse={click:!1,move:!1,max:1},this.delay={min:30,max:60},this.brightness={min:50,max:80},this.decay={min:.015,max:.03},this.sound={enabled:!1,files:["explosion0.mp3","explosion1.mp3","explosion2.mp3"],volume:{min:4,max:8}},this.boundaries={height:0,width:0,x:50,y:50}}update(e){Object.assign(this,rs(this,e))}}class ad{constructor(e,t){M(this,"tick",0);M(this,"rafId",0);M(this,"fps",60);M(this,"tolerance",.1);M(this,"now");this.options=e,this.render=t}mount(){this.now=performance.now();const e=1e3/this.fps,t=o=>{this.rafId=requestAnimationFrame(t);const i=o-this.now;i>=e-this.tolerance&&(this.render(),this.now=o-i%e,this.tick+=i*(this.options.intensity*Math.PI)/1e3)};this.rafId=requestAnimationFrame(t)}unmount(){cancelAnimationFrame(this.rafId)}}class rd{constructor(e,t){this.options=e,this.updateSize=t,this.handleResize=this.handleResize.bind(this)}mount(){this.options.autoresize&&window.addEventListener("resize",this.handleResize)}unmount(){this.options.autoresize&&window.removeEventListener("resize",this.handleResize)}handleResize(){this.updateSize()}}class ld{constructor(e){M(this,"buffers",[]);M(this,"audioContext");M(this,"onInit",!1);this.options=e,this.init()}get isEnabled(){return this.options.sound.enabled}get soundOptions(){return this.options.sound}init(){!this.onInit&&this.isEnabled&&(this.onInit=!0,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.loadSounds())}async loadSounds(){for(const e of this.soundOptions.files){const t=await(await fetch(e)).arrayBuffer();this.audioContext.decodeAudioData(t).then(o=>{this.buffers.push(o)}).catch(o=>{throw o})}}play(){if(this.isEnabled&&this.buffers.length){const e=this.audioContext.createBufferSource(),t=this.buffers[ze(0,this.buffers.length-1)],o=this.audioContext.createGain();e.buffer=t,o.gain.value=gt(this.soundOptions.volume.min/100,this.soundOptions.volume.max/100),o.connect(this.audioContext.destination),e.connect(o),e.start(0)}else this.init()}}class cd{constructor({x:e,y:t,dx:o,dy:i,ctx:s,hue:a,speed:r,traceLength:l,acceleration:c}){M(this,"x");M(this,"y");M(this,"sx");M(this,"sy");M(this,"dx");M(this,"dy");M(this,"ctx");M(this,"hue");M(this,"speed");M(this,"acceleration");M(this,"traceLength");M(this,"totalDistance");M(this,"angle");M(this,"brightness");M(this,"coordinates",[]);M(this,"currentDistance",0);for(this.x=e,this.y=t,this.sx=e,this.sy=t,this.dx=o,this.dy=i,this.ctx=s,this.hue=a,this.speed=r,this.traceLength=l,this.acceleration=c,this.totalDistance=ti(e,t,o,i),this.angle=Math.atan2(i-t,o-e),this.brightness=ze(50,70);this.traceLength--;)this.coordinates.push([e,t])}update(e){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;const t=Math.cos(this.angle)*this.speed,o=Math.sin(this.angle)*this.speed;this.currentDistance=ti(this.sx,this.sy,this.x+t,this.y+o),this.currentDistance>=this.totalDistance?e(this.dx,this.dy,this.hue):(this.x+=t,this.y+=o)}draw(){const e=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.moveTo(this.coordinates[e][0],this.coordinates[e][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=uo(this.hue,this.brightness),this.ctx.stroke()}}class ud{constructor(e,t={}){M(this,"target");M(this,"container");M(this,"canvas");M(this,"ctx");M(this,"width");M(this,"height");M(this,"traces",[]);M(this,"explosions",[]);M(this,"waitStopRaf");M(this,"running",!1);M(this,"opts");M(this,"sound");M(this,"resize");M(this,"mouse");M(this,"raf");this.target=e,this.container=e,this.opts=new sd,this.updateOptions(t),this.createCanvas(this.target),this.sound=new ld(this.opts),this.resize=new rd(this.opts,this.updateSize.bind(this)),this.mouse=new id(this.opts,this.canvas),this.raf=new ad(this.opts,this.render.bind(this))}get isRunning(){return this.running}get version(){return"2.10.1"}get currentOptions(){return this.opts}start(){this.running||(this.canvas.isConnected||this.createCanvas(this.target),this.running=!0,this.resize.mount(),this.mouse.mount(),this.raf.mount())}stop(e=!1){!this.running||(this.running=!1,this.resize.unmount(),this.mouse.unmount(),this.raf.unmount(),this.clear(),e&&this.canvas.remove())}async waitStop(e){if(this.running)return new Promise(t=>{this.waitStopRaf=()=>{!this.waitStopRaf||(requestAnimationFrame(this.waitStopRaf),!this.traces.length&&!this.explosions.length&&(this.waitStopRaf=null,this.stop(e),t()))},this.waitStopRaf()})}pause(){this.running=!this.running,this.running?this.raf.mount():this.raf.unmount()}clear(){!this.ctx||(this.traces=[],this.explosions=[],this.ctx.clearRect(0,0,this.width,this.height))}launch(e=1){for(let t=0;t<e;t++)this.createTrace();this.waitStopRaf||(this.start(),this.waitStop())}updateOptions(e){this.opts.update(e)}updateSize({width:e=this.container.clientWidth,height:t=this.container.clientHeight}={}){this.width=e,this.height=t,this.canvas.width=e,this.canvas.height=t,this.updateBoundaries({...this.opts.boundaries,width:e,height:t})}updateBoundaries(e){this.updateOptions({boundaries:e})}createCanvas(e){e instanceof HTMLCanvasElement?(e.isConnected||document.body.append(e),this.canvas=e):(this.canvas=document.createElement("canvas"),this.container.append(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.updateSize()}render(){if(!this.ctx||!this.running)return;const{opacity:e,lineStyle:t,lineWidth:o}=this.opts;this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0, ${e})`,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="lighter",this.ctx.lineCap=t,this.ctx.lineJoin="round",this.ctx.lineWidth=gt(o.trace.min,o.trace.max),this.initTrace(),this.drawTrace(),this.drawExplosion()}createTrace(){const{hue:e,rocketsPoint:t,boundaries:o,traceLength:i,traceSpeed:s,acceleration:a,mouse:r}=this.opts;this.traces.push(new cd({x:this.width*ze(t.min,t.max)/100,y:this.height,dx:this.mouse.x&&r.move||this.mouse.active?this.mouse.x:ze(o.x,o.width-o.x*2),dy:this.mouse.y&&r.move||this.mouse.active?this.mouse.y:ze(o.y,o.height*.5),ctx:this.ctx,hue:ze(e.min,e.max),speed:s,acceleration:a,traceLength:qn(i)}))}initTrace(){if(this.waitStopRaf)return;const{delay:e,mouse:t}=this.opts;(this.raf.tick>ze(e.min,e.max)||this.mouse.active&&t.max>this.traces.length)&&(this.createTrace(),this.raf.tick=0)}drawTrace(){let e=this.traces.length;for(;e--;)this.traces[e].draw(),this.traces[e].update((t,o,i)=>{this.initExplosion(t,o,i),this.sound.play(),this.traces.splice(e,1)})}initExplosion(e,t,o){const{particles:i,flickering:s,lineWidth:a,explosion:r,brightness:l,friction:c,gravity:d,decay:u}=this.opts;let h=qn(i);for(;h--;)this.explosions.push(new od({x:e,y:t,ctx:this.ctx,hue:o,friction:c,gravity:d,flickering:ze(0,100)<=s,lineWidth:gt(a.explosion.min,a.explosion.max),explosionLength:qn(r),brightness:l,decay:u}))}drawExplosion(){let e=this.explosions.length;for(;e--;)this.explosions[e].draw(),this.explosions[e].update(()=>{this.explosions.splice(e,1)})}}const dd=Q({__name:"fireworks",props:{autostart:{type:Boolean,default:!0},options:{type:Object,required:!1}},setup(n,{expose:e}){const t=n,o=C(),i=C();return fe(()=>{i.value=new ud(o.value,t.options),t.autostart&&i.value.start()}),Tt(()=>{i.value.stop()}),e({get isRunning(){return i.value.isRunning},get currentOptions(){return i.value.currentOptions},start(){i.value.start()},launch(s){i.value.launch(s)},stop(){i.value.stop()},async waitStop(){await i.value.waitStop()},pause(){i.value.pause()},clear(){i.value.clear()},updateOptions(s){i.value.updateOptions(s)},updateSize(s){i.value.updateSize(s)},updateBoundaries(s){i.value.updateBoundaries(s)}}),(s,a)=>(_(),R("div",{ref_key:"container",ref:o},null,512))}}),hd=Q({__name:"Fireworks",setup(n){const e=C(),t=C({opacity:.5,particles:200,decay:{min:.01,max:.03}});async function o(){!e.value||(e.value.start(),await new Promise(i=>setTimeout(i,2500)),await e.value.waitStop())}return re(e,()=>o(),{immediate:!0}),(i,s)=>(_(),N(Js,{to:"#searchbar-mask"},[p(g(dd),{ref_key:"fw",ref:e,autostart:!1,options:t.value,style:{top:0,left:0,width:"100vw",height:"100vh",position:"fixed"}},null,8,["options"])]))}});const pd=ne(hd,[["__scopeId","data-v-4a396282"]]),fd=["onKeydown"],md={key:0},gd={style:{"text-align":"center"}},vd=U("Community"),_d={key:1,id:"on-search-extension",class:"on-search-extension"},yd={key:0,class:"alert"},wd={class:"header"},xd={class:"name"},bd={class:"extension-name"},Ed={class:"extensionContent"},Cd={class:"search-entry-wrapper"},kd=["value","onClick"],Sd={class:"wrap"},$d={class:"icon"},Id={class:"name"},Od={class:"keyboard-indicator"},Md=Q({__name:"index",props:{searchEntries:null,searchValue:null},emits:["open-extension"],setup(n,{expose:e,emit:t}){const o=n,i=C(null);se.getCategoryTree().then(y=>{i.value=y});const s=C(null),a=C(new St("")),r=C();re(()=>o.searchEntries,()=>{u.value=0,l()}),fe(l);async function l(){var I;let y=de.exports.head(o.searchEntries)||{},{search_component:S,renderOnSearchCondition:w}=y;if(y&&S&&(!w||w(o.searchValue))){let T=ct.getLastClipboard();T?a.value=new St(T,ct.getLastClipboardLangList()):a.value=new St(""),((I=s.value)==null?void 0:I.id)!==y.id&&(s.value=y,s.value.searchComponent=Qs({loader:y.search_component,loadingComponent:ea(ta,{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})}))}else s.value=null,a.value=new St(""),r.value=""}const c=C(null),d=C([]),u=C(0);re(u,y=>{v(y)});const h=()=>{const y=u.value-1;if(y>=0){u.value=y;return}u.value=o.searchEntries.length-1},f=()=>{const y=u.value+1;if(y<o.searchEntries.length){u.value=y;return}u.value=0},v=y=>{if(c.value&&d.value&&y>=0){const S=d.value.find(w=>w.getAttribute("value")===o.searchEntries[y].id);S==null||S.scrollIntoView({block:"end"})}};function x(y){r.value=y||Te("home.clipboardAutoFill"),setTimeout(()=>{try{r.value=""}catch{}},2e3)}return e({up:h,down:f,preselectedSearchEntryIndex:u}),(y,S)=>{const w=k("a-divider"),I=k("a-row"),T=k("a-button"),P=k("a-typography-text"),O=k("a-space");return _(),R("div",{id:"home-searchbar-search-entries-wrapper",ref_key:"searchEntriesEle",ref:c,class:"search-entries-wrapper",onKeydown:He(h,["up"])},[n.searchEntries.length<=0?(_(),R("div",md,[n.searchValue==="2023"?(_(),R(ye,{key:0},[p(w,null,{default:m(()=>[U($(y.$t("searchEntries.2023"))+" \u{1F389} ",1)]),_:1}),p(I,{justify:"center"},{default:m(()=>[p(pd)]),_:1})],64)):(_(),R(ye,{key:1},[p(w,null,{default:m(()=>[U("\u{1F635} "+$(y.$t("searchEntries.no-result")),1)]),_:1}),b("p",gd,[U($(y.$t("searchEntries.feedback-feature"))+": ",1),p(T,{type:"link",onClick:S[0]||(S[0]=A=>g(W).openBrowser("https://community.he3.app/"))},{default:m(()=>[vd]),_:1})])],64))])):z("",!0),s.value?(_(),R("div",_d,[p(yn,{name:"alert"},{default:m(()=>[r.value?(_(),R("div",yd,$(r.value),1)):z("",!0)]),_:1}),b("div",wd,[b("div",xd,[p(g(ui),{circled:"",class:"aha"}),b("span",null,[b("span",bd,$(y.$t(`extension.${s.value.id}.name`)),1)])]),b("div",{id:"search-extension-quick-entry",class:"icon",onClick:S[1]||(S[1]=A=>t("open-extension",0))},[p(g(di))])]),b("div",Ed,[(_(),N(vt(s.value.searchComponent),{"clipboard-value":a.value,"render-on-search":!0,"search-value":o.searchValue,onClick:Ie(g(de.exports.noop),["stop"]),onAcceptClipboardCb:x},null,40,["clipboard-value","search-value","onClick"]))])])):z("",!0),b("div",Cd,[(_(!0),R(ye,null,je(n.searchEntries,(A,D)=>(_(),R("div",{key:A.id,ref_for:!0,ref_key:"searchEntryEle",ref:d,value:A.id,class:te({"search-entry":!0,"preselected-search-entry":D===u.value}),onClick:E=>t("open-extension",D)},[b("div",Sd,[b("div",$d,[i.value?(_(),N(g(Gt),{key:0,icon:g(In)(A.category[0],i.value)},null,8,["icon"])):z("",!0)]),b("p",Id,[p(ei,{text:y.$t(`extension.${A.id}.name`),query:n.searchValue},null,8,["text","query"])]),p(P,{class:"description",type:"secondary"},{default:m(()=>[p(ei,{text:y.$t(`extension.${A.id}.description`),query:n.searchValue},null,8,["text","query"])]),_:2},1024)])],10,kd))),128))]),b("div",Od,[p(O,null,{default:m(()=>[p(T,{size:"small",type:"text",onClick:S[2]||(S[2]=()=>{y.$emit("open-extension",u.value)})},{icon:m(()=>[p(g(na))]),default:m(()=>[U(" (Enter) "+$(y.$t("searchbar.open")),1)]),_:1}),p(T,{size:"small",type:"text",onClick:f},{icon:m(()=>[p(g(oa))]),default:m(()=>[U(" (Tab) "+$(y.$t("searchbar.next")),1)]),_:1}),p(T,{size:"small",type:"text",onClick:h},{icon:m(()=>[p(g(ia))]),default:m(()=>[U(" (Tab + Shift) "+$(y.$t("searchbar.prev")),1)]),_:1})]),_:1})])],40,fd)}}});const Td=ne(Md,[["__scopeId","data-v-7b702e8b"]]),ls=n=>(tt("data-v-554b4228"),n=n(),nt(),n),Ad={class:"keyboard"},Dd=ls(()=>b("span",{style:{color:"#aeaeae","user-select":"none"}}," + ",-1)),Ld=ls(()=>b("span",{class:"keyboard"}," K ",-1)),Rd=Q({__name:"index",props:{closeWelcome:{type:Function,default:()=>{}}},emits:["keydown-enter"],setup(n,{expose:e,emit:t}){const o=n,i=Xe(),{t:s}=Ye(),a=C(null),r=C(null),l=C(),c=C([]),d=C(!1),u=B=>{d.value!==B&&(d.value=B)},h=C(!0),f=B=>{h.value!==B&&(h.value=B)},v=B=>{var we;B.key==="k"&&(B.ctrlKey||B.metaKey)&&(B.stopImmediatePropagation(),(we=a==null?void 0:a.value)==null||we.focus(),localStorage.getItem("welcome")||o.closeWelcome())};fe(()=>{document.addEventListener("keydown",v),W.focusSearch(()=>{var B;ci()&&((B=a==null?void 0:a.value)==null||B.focus())})}),Tt(()=>{document.removeEventListener("keydown",v)});async function x(){const B=await ho();try{const G=await ee(B,V.RECOMMENDED);if(G.length<=0){c.value=B;return}const we=B.filter(ke=>!G.find(le=>le.id===ke.id));c.value=[...G,...we]}catch(G){console.error(G)}}const y=C(),S=async()=>{const B=l.value;if(y.value=l.value,!B||B.length<=0){await x();return}try{c.value=await Ol(B)}catch(G){console.error(G)}},w=de.exports.debounce(()=>{S()},200,{leading:!0});re(l,()=>{w()});const T=()=>{var B;Z.value||r.value&&((B=a==null?void 0:a.value)==null||B.blur(),P(r.value.preselectedSearchEntryIndex))};function P(B){if(c.value.length<=0)return;const G=c.value[B];if(!G)throw new Error("targetExtension is undefined");const we=l.value;l.value=s(`extension.${G.id}.name`),t("keydown-enter",G),F(),W.sendGAEvent({category:"Extension",action:"search_extension",eventLabel:G.id,eventValue:1}),W.sendGAEvent({category:"Extension",action:"open_extension",eventLabel:G.id,eventValue:1}),W.sendGAPageView(G.id),Re.capture("SearchOpenExtension",{searchValue:we,extensionsId:G.id}),Re.capture("OpenExtension",{extensionId:G.id,from:"search"})}const O=C(!1),A=B=>{O.value!==B&&(O.value=B)},D=async()=>{K()};function E(B){B.key==="Escape"&&F()}function K(){var B;!l.value||l.value.length<=0?x():(B=a==null?void 0:a.value)==null||B.select(),A(!0),f(!1),u(!0),document.addEventListener("keydown",E)}function F(){var B;(B=a==null?void 0:a.value)==null||B.blur(),A(!1),f(!0),u(!1),document.removeEventListener("keydown",E)}const Z=C(!1),q=()=>{Z.value=!0},ae=()=>{Z.value=!1};return fe(async()=>{await x()}),e({inputEle:a,searchEntriesVisible:d,turnOffSearchBar:F}),(B,G)=>{var ke;const we=k("a-input");return _(),R("div",{class:te(["search",O.value&&"is-focus"]),style:{"-webkit-app-region":"no-drag"}},[p(we,{id:"home-searchbar-input",ref_key:"inputEle",ref:a,value:l.value,"onUpdate:value":G[0]||(G[0]=le=>l.value=le),class:te(["search-bar",d.value&&"has-search-entries"]),placeholder:B.$t("searchbar.placeholder"),"allow-clear":!h.value,style:ai(g(i).dark?"background-color: var(--gray-10)":"background-color: var(--gray-1)"),onClick:Ie(D,["stop"]),onFocus:D,onChange:G[1]||(G[1]=le=>u(!0)),onKeydown:[He(T,["enter"]),G[2]||(G[2]=He(Ie(le=>{var Se;return(Se=r.value)==null?void 0:Se.down()},["exact","stop","prevent"]),["tab"])),G[3]||(G[3]=He(Ie(le=>{var Se;return(Se=r.value)==null?void 0:Se.up()},["shift","stop","prevent"]),["tab"])),G[4]||(G[4]=He(Ie(le=>{var Se;return(Se=r.value)==null?void 0:Se.up()},["stop","prevent"]),["up"])),G[5]||(G[5]=He(Ie(le=>{var Se;return(Se=r.value)==null?void 0:Se.down()},["stop","prevent"]),["down"]))],onCompositionstart:q,onCompositionend:ae},hi({prefix:m(()=>[p(g(sa))]),_:2},[h.value?{name:"suffix",fn:m(()=>[b("span",Ad,$(g(pi)()===g(un).MAC?"\u2318":"Ctrl"),1),Dd,Ld]),key:"0"}:void 0]),1032,["value","class","placeholder","allow-clear","style","onClick","onKeydown"]),d.value?(_(),N(Td,{key:0,ref_key:"searchEntriesEle",ref:r,"search-entries":c.value,"search-value":(ke=y.value)!=null?ke:"",class:"search-entries",onOpenExtension:P},null,8,["search-entries","search-value"])):z("",!0)],2)}}});const Nd=ne(Rd,[["__scopeId","data-v-554b4228"]]),Pd={class:"feedback-wrapper"},Fd=U(" Join Our Discord "),Ud=U(" https://community.he3.app "),Bd=Q({__name:"index",setup(n){const e=C(!1),t=o=>{o!==e.value&&(e.value=o)};return(o,i)=>{const s=k("a-button"),a=k("a-popover"),r=k("a-image"),l=k("a-typography-title"),c=k("a-card-grid"),d=k("a-space"),u=k("a-card"),h=k("a-modal");return _(),R("div",Pd,[p(a,null,{content:m(()=>[U($(o.$t("feedback.subject")),1)]),default:m(()=>[p(s,{id:"feedback-button",type:"text",onClick:i[0]||(i[0]=f=>t(!0))},{icon:m(()=>[g(_n)()!=="zh"?(_(),N(g(aa),{key:0})):z("",!0),g(_n)()==="zh"?(_(),N(g(ra),{key:1})):z("",!0)]),_:1})]),_:1}),p(h,{visible:e.value,"onUpdate:visible":i[4]||(i[4]=f=>e.value=f),title:o.$t("feedback.subject")},{footer:m(()=>[p(s,{id:"feedback-modal-close-button",onClick:i[3]||(i[3]=f=>t(!1))},{default:m(()=>[U($(o.$t("common.close")),1)]),_:1})]),default:m(()=>[p(u,null,{default:m(()=>[p(c,{style:{width:"33%","text-align":"center",height:"220px"}},{default:m(()=>[p(r,{alt:"He3",src:"feedback/wechat-assistant.jpeg",width:100,preview:!1}),p(l,{level:5,style:{"margin-top":"16px","margin-bottom":"0","text-align":"center"}},{default:m(()=>[U($(o.$t("feedback.weChatAssistant")),1)]),_:1})]),_:1}),p(c,{style:{width:"33%","text-align":"center",height:"220px"}},{default:m(()=>[p(r,{alt:"He3",src:"feedback/wechatOfficialAccount@3x.png",width:100,preview:!1}),p(l,{level:5,style:{"margin-top":"16px","margin-bottom":"0","text-align":"center"}},{default:m(()=>[U($(o.$t("feedback.weChatOfficialAccount")),1)]),_:1})]),_:1}),p(c,{style:{width:"34%","text-align":"center",height:"220px"}},{default:m(()=>[p(r,{alt:"He3",src:"discord.png",width:100,preview:!1,height:100}),p(s,{onClick:i[1]||(i[1]=f=>g(W).openBrowser("https://discord.gg/F9QyJdVTwC")),class:"discordButton",size:"small"},{default:m(()=>[Fd]),_:1})]),_:1}),p(c,{style:{width:"100%"}},{default:m(()=>[p(d,{align:"center"},{default:m(()=>[p(l,{level:5,style:{margin:"0"}},{default:m(()=>[U($(o.$t("feedback.communityForum"))+": ",1)]),_:1}),p(s,{type:"link",onClick:i[2]||(i[2]=f=>g(W).openBrowser("https://community.he3.app/"))},{default:m(()=>[Ud]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","title"])])}}});const zd=ne(Bd,[["__scopeId","data-v-8a9c7f91"]]),Hd={class:"share-wrapper"},Wd=Q({__name:"index",setup(n){const{t:e}=Ye(),t=C(!1),o=()=>{i()},i=()=>{t.value=!0},s=()=>{W.sendGAEvent({category:"Extension",action:"Share Extension",eventLabel:"Share Extension",eventValue:1}),Re.capture("ShareExtension",{}),t.value=!1},a=C(e("share.shareContent"));return(r,l)=>{const c=k("a-button"),d=k("a-popover"),u=k("a-textarea"),h=k("a-modal");return _(),R("div",Hd,[p(d,{placement:"bottomRight"},{content:m(()=>[U($(g(e)("share.title")),1)]),default:m(()=>[p(c,{id:"share-button",type:"text",onClick:o},{icon:m(()=>[p(g(la))]),_:1})]),_:1}),p(h,{visible:t.value,"onUpdate:visible":l[1]||(l[1]=f=>t.value=f),title:g(e)("share.title")},{footer:m(()=>[p(g(ca),{type:"primary",id:"share-modal-copy-button","copy-content":a.value,title:g(e)("share.shareBtn"),"success-text":g(e)("share.copySuccess"),onAfterCopy:s},null,8,["copy-content","title","success-text"])]),default:m(()=>[p(u,{id:"share-modal-textarea",value:a.value,"onUpdate:value":l[0]||(l[0]=f=>a.value=f),rows:3},null,8,["value"])]),_:1},8,["visible","title"])])}}});const jd=ne(Wd,[["__scopeId","data-v-ee94d58c"]]),Vd={class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12"},Kd=b("path",{d:"m512 28.444-398.222 568.89h170.666V711.11h455.112V597.333h170.666L512 28.444zM284.444 881.778h455.112V768H284.444v113.778zm0 113.778h455.112v-56.89H284.444v56.89z",fill:"currentColor"},null,-1),Gd=[Kd];function Yd(n,e){return _(),R("svg",Vd,Gd)}const Xd={render:Yd},qd=n=>(tt("data-v-fb31bfb2"),n=n(),nt(),n),Zd={class:"version-wrapper"},Jd={class:"title"},Qd={width:"1.3em",height:"1.3em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},eh=["fill"],th=["fill"],nh=qd(()=>b("h3",null,"He3",-1)),oh={class:"update-content"},ih=U(" https://he3.app "),sh={style:{color:"#999"}},ah=Q({__name:"index",emits:["update:aboutUsVisible"],setup(n,{emit:e}){const t=Xe();function o(){W.openBrowser("https://he3.app")}const i=C("");So().then(f=>{i.value=f});const s=C(!1),a=C(!1),r=C("NO_CHANGE");fe(async()=>{a.value=!0;try{i.value=await So();const f=await ua();W.semverCompare(f,i.value)>0?r.value="OUTDATED":r.value="NO_CHANGE"}catch(f){console.error(f)}finally{a.value=!1}});async function l(){W.sendGAEvent({category:"App",action:"Upgrade",eventLabel:"Upgrade",eventValue:1}),Re.capture("UpgradeApp",{});const f="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3-mac-arm64.dmg",v="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3-mac-amd64.dmg",x="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3-win64.exe",y="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3-win32.exe",S="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3_linux_arm64.deb",w="https://he3-1309519128.cos.accelerate.myqcloud.com/latest/He3_linux_amd64.deb";let I="";switch(pi()){case un.MAC:const P=await W.getCpuManufacturer();P==="Apple"?I=f:P==="Intel"&&(I=v);break;case un.WIN:const O=await W.getOSArch();O==="x64"?I=x:O==="x32"&&(I=y);break;case un.LINUX:const A=await W.getOSArch();A==="arm64"?I=S:A==="amd64"&&(I=w);break}if(I){const P=document.createElement("a"),O=I.split("/");P.download=O[O.length-1],P.href=I,P.click()}else W.openBrowser("https://he3.app")}let c=0,d=1,u=!1;function h(){let f=new Date().getTime();f-c<1e3?d+=1:d=1,c=f,!u&&d>=5&&(u=!0,po()?(he.success("\u5173\u95ED\u5F00\u53D1\u8005\u6A21\u5F0F\uFF0C\u9875\u9762\u5C06\u57283\u79D2\u540E\u5237\u65B0"),localStorage.removeItem("debug"),setTimeout(()=>{window.location.reload()},3e3)):(localStorage.setItem("debug","true"),he.success("\u8FDB\u5165\u5F00\u53D1\u8005\u6A21\u5F0F\uFF0C\u9875\u9762\u5C06\u57283\u79D2\u540E\u5237\u65B0"),setTimeout(()=>{window.location.reload()},3e3)))}return(f,v)=>{const x=k("a-button"),y=k("a-badge"),S=k("a-col"),w=k("a-typography-text"),I=k("a-row"),T=k("a-modal");return _(),R("div",Zd,[b("div",Jd,[p(y,{dot:r.value!=="NO_CHANGE"&&!g(t).hasUpdate,offset:[-5,5]},{default:m(()=>[p(x,{id:"about-button",type:"text",onClick:v[0]||(v[0]=P=>s.value=!0)},{icon:m(()=>[p(g(mi),null,{component:m(()=>[(_(),R("svg",Qd,[b("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 158.133C0 158.23 0.0102692 158.324 0.0309117 158.416C1.57042 165.286 60.112 157.24 130.785 140.428C201.47 123.663 257.503 104.486 255.969 97.6401C254.926 92.981 227.612 95.1917 188.075 102.341C187.003 102.534 184.93 105.001 182.958 107.347C181.231 109.402 179.581 111.365 178.752 111.623C168.257 114.895 157.552 117.432 141.92 121.136C137.678 122.141 133.073 123.233 128.012 124.448C113.861 127.845 104.931 129.359 96.6079 130.77C90.9825 131.723 85.6345 132.63 79.1395 134.039C77.7395 134.348 75.3979 133.227 73.179 132.165C71.1303 131.185 69.1863 130.254 68.1843 130.545C27.5464 142.293 0 153.137 0 158.133Z",fill:g(t).dark?"#ccc":"#333"},null,8,eh),b("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M196.437 134.038C196.611 132.799 197.002 131.603 197.59 130.508L198.616 129.082C190.083 131.483 180.777 134.008 170.871 136.599C169.421 143.923 166.315 150.79 161.807 156.645C157.299 162.499 151.515 167.176 144.925 170.295L150.368 196.657L153.204 209.731C152.82 201.819 154.165 196.503 157.241 193.781C157.531 193.505 157.841 193.253 158.169 193.026C168.845 187.303 177.949 178.898 184.638 168.587C191.327 158.276 195.385 146.394 196.437 134.038ZM130.672 201.108L125.188 174.58C118.211 174.519 111.338 172.826 105.088 169.627C98.8382 166.429 93.3752 161.809 89.1113 156.115C78.6579 158.397 68.7464 160.466 59.5729 162.284C61.0526 163.343 62.3802 164.611 63.5168 166.052C64.0534 166.888 64.6633 167.672 65.3388 168.393C71.8835 178.534 80.7605 186.849 91.1788 192.596C101.597 198.344 113.233 201.345 125.05 201.334C126.941 201.334 128.815 201.259 130.672 201.108ZM98.1407 59.7888L95.3442 46.2749C95.7171 54.1867 94.3717 59.5016 91.3081 62.2194C90.991 62.4987 90.7316 62.7424 90.524 62.9504C79.864 68.9792 70.8706 77.7086 64.3928 88.3146C57.9151 98.9206 54.1667 111.053 53.5015 123.567V123.727C51.9127 135.23 39.4804 140.409 31.9054 143.564C28.3463 145.047 25.8595 146.083 26.0733 147.118C26.4308 149.002 31.4183 151.308 38.7582 154.095C51.1605 150.422 65.777 146.369 81.9213 142.209C78.489 131.657 78.7648 120.198 82.7004 109.834C86.636 99.4702 93.981 90.8622 103.451 85.5151L98.1407 59.7888ZM162.354 64.6112C151.113 57.5618 138.207 53.8374 125.05 53.846C122.548 53.8464 120.048 53.9793 117.56 54.2442L122.842 79.7982C123.764 79.715 124.687 79.715 125.621 79.715C136.833 79.7065 147.664 83.912 156.084 91.5435C164.504 99.1751 169.936 109.709 171.361 121.172C185.095 118.266 197.694 115.776 208.649 113.791C212.483 107.694 214.691 103.439 214.317 101.62C214.105 100.597 212.342 100.892 209.761 101.324C204.124 102.267 194.584 103.864 188.774 93.8113C182.735 81.763 173.594 71.6606 162.354 64.6112Z",fill:g(t).dark?"#ccc":"#333"},null,8,th)]))]),_:1})]),_:1})]),_:1},8,["dot"])]),p(T,{visible:s.value,"onUpdate:visible":v[2]||(v[2]=P=>s.value=P),title:f.$t("aboutUs.title")},{footer:m(()=>[p(x,{onClick:v[1]||(v[1]=P=>s.value=!1)},{default:m(()=>[U($(f.$t("common.close")),1)]),_:1})]),default:m(()=>[p(I,{type:"flex"},{default:m(()=>[p(S,{flex:2},{default:m(()=>[b("img",{id:"about-logo-image",src:Qi,width:"100",onClick:h})]),_:1}),p(S,{flex:10},{default:m(()=>[nh,b("p",oh,[U($(f.$t("aboutUs.version"))+": "+$(i.value)+" ",1),p(x,{size:"small",type:"dashed",loading:a.value,"data-check-update-result":r.value==="NO_CHANGE"?"NO_CHANGE":"OUTDATED",class:"check-update-btn",style:{"margin-left":"10px"},onClick:l},hi({default:m(()=>[r.value==="NO_CHANGE"?(_(),R(ye,{key:0},[U($(f.$t("aboutUs.up-to-date")),1)],64)):(_(),N(w,{key:1,ellipsis:{tooltip:!0},type:"danger",content:f.$t("aboutUs.download-new-version")},null,8,["content"]))]),_:2},[r.value==="NO_CHANGE"?{name:"icon",fn:m(()=>[p(g(da))]),key:"0"}:{name:"icon",fn:m(()=>[b("span",{style:{color:"#ff4d4f","margin-right":"3px"}},[p(g(Xd))])]),key:"1"}]),1032,["loading","data-check-update-result"])]),b("p",null,[U($(f.$t("aboutUs.more-details"))+": ",1),p(x,{type:"link",onClick:o},{default:m(()=>[ih]),_:1})]),b("div",sh,$(f.$t("common.company")),1)]),_:1})]),_:1})]),_:1},8,["visible","title"])])}}});const rh=ne(ah,[["__scopeId","data-v-fb31bfb2"]]),lh=["srcset"],ch=["srcset"],uh=["srcset"],dh=["srcset"],hh=Q({__name:"index",setup(n){const e=C(!1),t=Xe();fe(()=>{try{W.winGetIsMaxWindow().then(a=>{e.value=a})}catch{}});function o(){W.winGetIsMaxWindow().then(a=>{a?W.winSetUnmaximizeWindow().then(()=>{e.value=!1}):W.winSetMaxWindow().then(()=>{e.value=!0})})}function i(){W.winSetMinWindow()}function s(){W.winCloseWindow()}return(a,r)=>(_(),R("div",{id:"window-controls",class:te(!g(t).dark&&"light")},[b("div",{class:"button",onClick:i},[b("img",{class:"icon",srcset:g(t).dark?`
          icons/min-w-10.png 1x,
          icons/min-w-12.png 1.25x,
          icons/min-w-15.png 1.5x,
          icons/min-w-15.png 1.75x,
          icons/min-w-20.png 2x,
          icons/min-w-20.png 2.25x,
          icons/min-w-24.png 2.5x,
          icons/min-w-30.png 3x,
          icons/min-w-30.png 3.5x
          `:`
           icons/min-k-10.png 1x,
          icons/min-k-12.png 1.25x,
          icons/min-k-15.png 1.5x,
          icons/min-k-15.png 1.75x,
          icons/min-k-20.png 2x,
          icons/min-k-20.png 2.25x,
          icons/min-k-24.png 2.5x,
          icons/min-k-30.png 3x,
          icons/min-k-30.png 3.5x
          `,draggable:"false"},null,8,lh)]),b("div",{class:te(["button",e.value&&"hidden"]),onClick:o},[b("img",{class:"icon",srcset:g(t).dark?`
          icons/max-w-10.png 1x,
          icons/max-w-12.png 1.25x,
          icons/max-w-15.png 1.5x,
          icons/max-w-15.png 1.75x,
          icons/max-w-20.png 2x,
          icons/max-w-20.png 2.25x,
          icons/max-w-24.png 2.5x,
          icons/max-w-30.png 3x,
          icons/max-w-30.png 3.5x
          `:`
          icons/max-k-10.png 1x,
          icons/max-k-12.png 1.25x,
          icons/max-k-15.png 1.5x,
          icons/max-k-15.png 1.75x,
          icons/max-k-20.png 2x,
          icons/max-k-20.png 2.25x,
          icons/max-k-24.png 2.5x,
          icons/max-k-30.png 3x,
          icons/max-k-30.png 3.5x
          `,draggable:"false"},null,8,ch)],2),b("div",{class:te(["button",!e.value&&"hidden"]),onClick:o},[b("img",{class:"icon",srcset:g(t).dark?`
          icons/restore-w-10.png 1x,
          icons/restore-w-12.png 1.25x,
          icons/restore-w-15.png 1.5x,
          icons/restore-w-15.png 1.75x,
          icons/restore-w-20.png 2x,
          icons/restore-w-20.png 2.25x,
          icons/restore-w-24.png 2.5x,
          icons/restore-w-30.png 3x,
          icons/restore-w-30.png 3.5x
          `:`
          icons/restore-k-10.png 1x,
          icons/restore-k-12.png 1.25x,
          icons/restore-k-15.png 1.5x,
          icons/restore-k-15.png 1.75x,
          icons/restore-k-20.png 2x,
          icons/restore-k-20.png 2.25x,
          icons/restore-k-24.png 2.5x,
          icons/restore-k-30.png 3x,
          icons/restore-k-30.png 3.5x
          `,draggable:"false"},null,8,uh)],2),b("div",{class:"button close",onClick:s},[b("img",{class:"icon",srcset:g(t).dark?`
          icons/close-w-10.png 1x,
          icons/close-w-12.png 1.25x,
          icons/close-w-15.png 1.5x,
          icons/close-w-15.png 1.75x,
          icons/close-w-20.png 2x,
          icons/close-w-20.png 2.25x,
          icons/close-w-24.png 2.5x,
          icons/close-w-30.png 3x,
          icons/close-w-30.png 3.5x
          `:`
           icons/close-k-10.png 1x,
          icons/close-k-12.png 1.25x,
          icons/close-k-15.png 1.5x,
          icons/close-k-15.png 1.75x,
          icons/close-k-20.png 2x,
          icons/close-k-20.png 2.25x,
          icons/close-k-24.png 2.5x,
          icons/close-k-30.png 3x,
          icons/close-k-30.png 3.5x
          `,draggable:"false"},null,8,dh)])],2))}});const ph=ne(hh,[["__scopeId","data-v-112dd0c6"]]),fh=n=>(tt("data-v-1710c2fb"),n=n(),nt(),n),mh={key:0},gh=fh(()=>b("svg",{t:"1670555694041",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"22366",width:"20",height:"20"},[b("path",{d:"M512 0C228.693333 0 0 228.693333 0 512s228.693333 512 512 512 512-228.693333 512-512S795.306667 0 512 0z m279.893333 556.373333c-34.133333 34.133333-95.573333 34.133333-129.706666 0L614.4 508.586667V785.066667c0 58.026667-44.373333 102.4-102.4 102.4s-102.4-44.373333-102.4-102.4v-273.066667l-44.373333 44.373333c-34.133333 34.133333-95.573333 34.133333-129.706667 0-37.546667-37.546667-37.546667-95.573333 0-129.706666l235.52-235.52c23.893333-23.893333 61.44-23.893333 85.333333 0l235.52 235.52c17.066667 17.066667 27.306667 40.96 27.306667 64.853333s-10.24 47.786667-27.306667 64.853333z",fill:"#16c000","p-id":"22367"})],-1)),vh={class:"update-content"},_h={class:"update-title"},yh={class:"update-buttons"},wh=Q({__name:"index",setup(n){const e=Xe();fe(()=>{W.allowRestartUpdate(()=>{e.$patch({hasUpdate:!0})})});function t(){W.handleUpdate()}return(o,i)=>{const s=k("a-button"),a=k("a-popover");return g(e).hasUpdate?(_(),R("div",mh,[p(a,{style:{width:"300px"},title:g(Te)("home.update.title"),trigger:"hover"},{content:m(()=>[b("div",vh,[b("div",_h,$(o.$t("home.update.desc")),1),b("div",yh,[p(s,{type:"primary",size:"small",onClick:t},{default:m(()=>[U($(o.$t("home.update.action")),1)]),_:1})])])]),default:m(()=>[p(s,{type:"text"},{icon:m(()=>[p(g(mi),null,{component:m(()=>[gh]),_:1})]),_:1})]),_:1},8,["title"])])):z("",!0)}}});const xh=ne(wh,[["__scopeId","data-v-1710c2fb"]]),bh=["id","value","onClick"],Eh={class:"wrap"},Ch={class:"icon"},kh={class:"name"},Sh=Q({__name:"index",props:{recommend:null},emits:["keydown-enter"],setup(n,{emit:e}){const t=C(null);return se.getCategoryTree().then(o=>{t.value=o}),(o,i)=>{const s=k("a-button"),a=k("a-typography-text"),r=k("a-popover");return _(),R("div",null,[p(r,null,{content:m(()=>[b("div",null,[b("p",null,$(o.$t("home.intelligentRecommendation.title")),1),(_(!0),R(ye,null,je(n.recommend,(l,c)=>(_(),R("div",{id:"intelligent-recommend-item-"+l.extension.id,key:l.extension.id,value:l.extension.id,onClick:d=>e("keydown-enter",n.recommend[c].extension)},[b("div",Eh,[b("div",Ch,[t.value?(_(),N(g(Gt),{key:0,icon:g(In)(l.extension.category[0],t.value)},null,8,["icon"])):z("",!0)]),b("p",kh,$(o.$t(`extension.${l.extension.id}.name`)),1),p(a,{class:"description",type:"secondary"},{default:m(()=>[U($(o.$t(`extension.${l.extension.id}.description`)),1)]),_:2},1024)])],8,bh))),128))])]),default:m(()=>[p(s,{id:"intelligent-icon-bulb",class:"icon-bulb",type:"link",size:"small"},{icon:m(()=>[p(g(ui))]),_:1})]),_:1})])}}});const $h=ne(Sh,[["__scopeId","data-v-411bc297"]]),Ih={class:"right"},Oh={key:0,style:{"-webkit-app-region":"no-drag"}},Mh=Q({__name:"index",emits:["openSettings","searchBarEnterHandler","menuClickHandler"],setup(n,{emit:e}){const t=C(null),o=C([]),i=Xe(),s=async()=>{const{extensions:c}=await wo();o.value=c.filter(d=>d.matchBy==="id")};fe(()=>{setInterval(()=>{s()},1e3)});const a=C(!0);function r(){W.winGetIsMaxWindow().then(c=>{c?W.winSetUnmaximizeWindow():W.winSetMaxWindow()})}function l(c){Re.capture("OpenExtension",{extensionId:c.id,from:"recommend"}),e("searchBarEnterHandler",c)}return(c,d)=>{var h;const u=k("a-button");return _(),R("div",{class:te(["header",!a.value&&"noActive",(!g(i).isMenuSpread||g(rt)())&&"header-no-margin"]),style:{"-webkit-app-region":"drag"},onDblclick:r},[b("div",{class:"left",onDblclick:d[6]||(d[6]=Ie(()=>{},["stop"]))},[p(yn,{name:"icon"},{default:m(()=>[b("div",{class:te({spreadIcon:!0,isSpread:!g(i).isMenuSpread,winLeft:g(rt)()&&!g(i).isMenuSpread}),style:{"-webkit-app-region":"no-drag"}},[g(i).isMenuSpread?z("",!0):(_(),R("div",{key:0,class:"icon-content",onClick:d[0]||(d[0]=()=>{g(i).$patch({isMenuSpread:!0,userSetSpreadFlag:!0}),g(fo).emit("resize")})},[g(i).isMenuSpread?z("",!0):(_(),N(g(di),{key:0,class:"icon2"})),g(i).isMenuSpread?z("",!0):(_(),N(g(ha),{key:1,id:"header-open-menu-icon",class:"icon1"}))])),g(i).isMenuSpread?z("",!0):(_(),N(g($o),{key:1,class:"homeIcon",onClick:d[1]||(d[1]=f=>e("menuClickHandler",{key:"home"}))}))],2)]),_:1}),b("div",{id:"searchbar-mask",class:te(["mask",!((h=t.value)!=null&&h.searchEntriesVisible)&&"hidden"]),onClick:d[2]||(d[2]=f=>{var v;return(v=t.value)==null?void 0:v.turnOffSearchBar()}),onDblclick:d[3]||(d[3]=Ie(()=>{},["stop"]))},null,34),g(i).isMenuSpread?(_(),N(u,{key:0,type:"text",style:{"-webkit-app-region":"no-drag"},onClick:d[4]||(d[4]=f=>e("menuClickHandler",{key:"home"}))},{icon:m(()=>[p(g($o))]),_:1})):z("",!0),p(Nd,{ref_key:"searchRef",ref:t,class:te(["search",g(i).isMenuSpread&&"searchOnSpread"]),onKeydownEnter:d[5]||(d[5]=f=>e("searchBarEnterHandler",f))},null,8,["class"]),o.value.length?(_(),N($h,{key:1,id:"tips",class:"tips",recommend:o.value,onKeydownEnter:l},null,8,["recommend"])):z("",!0)],32),b("div",Ih,[b("div",{class:te(["action-bar",g(rt)()&&"left-display"]),style:{"-webkit-app-region":"no-drag"},onDblclick:d[8]||(d[8]=Ie(()=>{},["stop"]))},[p(xh),p(zd),p(jd),p(u,{id:"setting-button",type:"text",onClick:d[7]||(d[7]=f=>e("openSettings"))},{icon:m(()=>[p(g(pa))]),_:1}),p(rh)],34),g(rt)()?(_(),R("div",Oh,[p(ph)])):z("",!0)])],34)}}});const Th=ne(Mh,[["__scopeId","data-v-6b4dfb97"]]),Ah={class:"right"},Dh=Q({__name:"index",setup(n){const e=C(!Boolean(localStorage.getItem("welcome")));function t(){e.value=!1,localStorage.setItem("welcome","true")}const o=Sn(),i=wt(),s=Xe(),a=C("HOME");C(null);const r=C(),l=C();async function c(O,A){a.value="EXTENSION";const D=await mt(O);if(!D)throw new Error("Extension not found");A!=null&&A.related?u.value=[D.category[0]]:A!=null&&A.home&&(l.value=A.home),o.push(`/extension/${O}`)}fe(()=>{W.deepLinkOpenUrl((O,A)=>{let D=fa(A);D.token&&(he.success("\u767B\u5F55\u6210\u529F"),s.$patch({token:D.token}),W.setLoginToken(D.token).then(()=>{d()}))})});const d=async function(){try{const{id:O,nickname:A,email:D}=await mo.get(wa);s.$patch({nickname:A,email:D})}catch{}};fe(async()=>{s.$state.token&&await d()}),fe(()=>{W.handleWindowActive((O,A)=>{try{isActive.value=A}catch{}}),Ze("command+,",function(O,A){O.preventDefault(),w()}),W.deepLinkOpenUrl((O,A)=>{let D=de.exports.last(A.split("/"));D&&mt(D).then(E=>{E&&(Re.capture("OpenExtension",{extensionId:D,from:"deeplink"}),S(E))})})}),fe(async()=>{if(i.path.includes("extension")){a.value="EXTENSION";let O=i.path.split("/")[2],A=await mt(O);A&&S(A)}});const u=C([_i.HOME]),h=C(null);re(u,([O])=>{O||(h.value=null),h.value=O},{immediate:!0}),re(()=>i.path,async()=>{let O=i.path.split("/")[2],A=await mt(O);a.value==="EXTENSION"&&!["home","star","all"].includes(h.value||"")&&A&&!A.category.includes(h.value||"")&&(u.value=[A.category[0]])},{immediate:!0});const f=async O=>{switch(a.value==="EXTENSION"&&(a.value=null,y.value=null,u.value=[]),await Fe(),O.key){case"home":a.value="HOME";break;case"star":a.value="STAR";break;default:a.value="CATEGORY";break}u.value=[O.key],o.push("/")},v=C(!1),x=()=>{v.value=!v.value},y=C(null),S=async O=>{a.value=null,u.value=[],y.value=null,await Fe(),a.value="CATEGORY",u.value=[O.category[0]],y.value=O.id},w=O=>{o.push("/"),O?r.value=O:r.value=null,a.value="SETTINGS",u.value=[],y.value=null},I=C([]),T=async()=>{const{extensions:O}=await wo();I.value=O.filter(A=>A.matchBy==="id")};let P;return fe(()=>{P=setInterval(()=>{T()},1e3)}),Tt(()=>{P&&clearInterval(P)}),(O,A)=>(_(),R("div",{class:te(["wrapper",g(rt)()&&"winWrapper"])},[e.value?(_(),N(xu,{key:0,close:t})):z("",!0),b("div",{id:"left-menu-div",class:te(["left",!g(s).isMenuSpread&&"hiddenMenu"])},[p(Au,{"is-collapse":v.value,"selected-menus":u.value,onClick:f,onOpenSettings:w,onToggleCollapsed:x},null,8,["is-collapse","selected-menus"])],2),b("div",Ah,[p(Th,{onOpenSettings:w,onSearchBarEnterHandler:S,onMenuClickHandler:f}),b("div",{id:"CONTENT",class:te({content:!0,"header-no-margin":!g(s).isMenuSpread||g(rt)()})},[a.value==="EXTENSION"?(_(),N(mc,{key:0,"current-category":h.value||void 0,"home-ext-type":l.value,onOpenExtension:c},null,8,["current-category","home-ext-type"])):z("",!0),a.value==="HOME"?(_(),N(Fl,{key:1,onOpenExtension:c})):z("",!0),a.value==="STAR"?(_(),N(ku,{key:2,onOpenExtension:c})):z("",!0),a.value==="CATEGORY"&&h.value!==null?(_(),N(Tr,{key:3,"current-category":h.value,"specific-active-extension-id":y.value,onOpenExtension:c},null,8,["current-category","specific-active-extension-id"])):z("",!0),a.value==="SETTINGS"?(_(),N(Qc,{key:4,"active-key":r.value},null,8,["active-key"])):z("",!0)],2)])],2))}});const Bh=ne(Dh,[["__scopeId","data-v-f6ac4d85"]]);export{Bh as default};
