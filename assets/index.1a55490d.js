import{d as E,cm as L,J as U,r as c,N as I,bj as P,as as B,a as u,b as l,g as t,o as d,l as H,c as r,cp as w,dE as j,H as m,cq as z,d1 as F,c4 as q,cr as O,cs as p,U as v,x as y,ct as C,bN as G,_ as J}from"./index.954a2cbc.js";import{i as X}from"./regs.08fe82e6.js";import{u as K}from"./index.56c1474b.js";const Q={class:"ping-wrapper"},W=E({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean}},emits:["acceptClipboardCb"],setup(D,{emit:S}){const f=D,{t:T}=L();U(()=>{var n,s,a;(((n=f.clipboardValue)==null?void 0:n.isIPv4())||((s=f.clipboardValue)==null?void 0:s.isDomain())||((a=f.clipboardValue)==null?void 0:a.isUrl()))&&(o.value.address=x(f.clipboardValue.getOriginData()),S("acceptClipboardCb"))});const R=150,V=[{title:"Connected To",dataIndex:"numericHost",key:"numericHost"},{title:"Response Time",dataIndex:"time",key:"time"}],b=c([]),N=[{title:"Min",dataIndex:"min",key:"min"},{title:"Max",dataIndex:"max",key:"max"},{title:"Average",dataIndex:"average",key:"average"},{title:"Std Dev",dataIndex:"stdDev",key:"stdDev"},{title:"Loss",dataIndex:"loss",key:"loss"}],k=c([]);function x(n){return n=n.trim(),I.isIP(n)==4||P(n)&&(n=K(n).hostname),n}const h=c(),o=c({address:"",pingIPv6:!1,minReply:6}),A={address:[{required:!0,transform:x,validator:(n,s)=>s===""||I.isIP(s)!==4&&!P(s)&&!X(s)?Promise.reject():Promise.resolve(),message:T("ping.validAddressError"),trigger:"change"}]},g=c(!1),_=c(""),M=B(()=>_.value!=="");async function $(){var a;try{await((a=h.value)==null?void 0:a.validateFields())}catch{return}const n=x(o.value.address),s={numeric:!1,min_reply:o.value.minReply,v6:o.value.pingIPv6};g.value=!0,_.value="",b.value=[],k.value=[],I.domainPing(n,s).then(e=>{e.times&&e.times.forEach((i,Y)=>{b.value.push({numericHost:e.numeric_host,time:i})}),k.value=[{min:e.min==="unknown"?0:e.min,max:e.max=="unknown"?0:e.max,average:e.avg==="unknown"?0:e.avg,stdDev:e.stddev==="unknown"?0:e.stddev,loss:e.packetLoss==="unknown"?0:e.packetLoss}]}).catch(e=>{_.value=e.toString()}).finally(()=>{g.value=!1})}return(n,s)=>(d(),u(t(G),{"max-width":1280},{one:l(()=>[H("div",Q,[r(t(O),{ref_key:"formRef",ref:h,rules:A,model:o.value},{default:l(()=>[t(M)?(d(),u(t(w),{key:0},{default:l(()=>[r(t(j),{message:_.value,type:"error",banner:""},null,8,["message"])]),_:1})):m("",!0),r(t(w),{name:"address"},{default:l(()=>[r(t(z),{value:o.value.address,"onUpdate:value":s[0]||(s[0]=a=>o.value.address=a),"enter-button":"Ping","allow-clear":"",autofocus:"",onSearch:$},null,8,["value"])]),_:1}),r(t(F),{size:"middle"},{default:l(()=>[r(t(w),{name:"minReply",label:"Min Reply"},{default:l(()=>[r(t(q),{value:o.value.minReply,"onUpdate:value":s[1]||(s[1]=a=>o.value.minReply=a),min:1,precision:0},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"]),r(t(C),{"data-source":k.value,columns:N,"table-layout":"auto",size:"middle",pagination:!1,loading:g.value},{bodyCell:l(({record:a,index:e,column:i})=>[i.key==="min"?(d(),u(t(p),{key:e},{default:l(()=>[v(y(`${a.min} ms`),1)]),_:2},1024)):m("",!0),i.key==="max"?(d(),u(t(p),{key:e},{default:l(()=>[v(y(`${a.max} ms`),1)]),_:2},1024)):m("",!0),i.key==="average"?(d(),u(t(p),{key:e},{default:l(()=>[v(y(`${a.average} ms`),1)]),_:2},1024)):m("",!0),i.key==="stdDev"?(d(),u(t(p),{key:e},{default:l(()=>[v(y(`${a.stdDev} ms`),1)]),_:2},1024)):m("",!0),i.key==="loss"?(d(),u(t(p),{key:e,type:a.loss>0?"warning":""},{default:l(()=>[v(y(`${a.loss} %`),1)]),_:2},1032,["type"])):m("",!0)]),_:1},8,["data-source","loading"]),r(t(C),{"data-source":b.value,columns:V,"table-layout":"auto",size:"middle",pagination:!1,loading:g.value,class:"ping-wrapper-body-table"},{bodyCell:l(({record:a,index:e,column:i})=>[i.key==="time"?(d(),u(t(p),{key:e,type:a.time>R?"warning":""},{default:l(()=>[v(y(`${a.time} ms`),1)]),_:2},1032,["type"])):m("",!0)]),_:1},8,["data-source","loading"])])]),_:1}))}});const te=J(W,[["__scopeId","data-v-33b2bb2c"]]);export{te as default};
