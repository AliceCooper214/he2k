import{d as g,cm as C,z as w,r as V,D as k,J as $,o as r,e as i,c as d,au as T,Q as B,l as p,b as _,x as b,a as v,H as y,g as S,bX as P,b2 as z,N as x,ao as F,j as f,p as K,m as M,_ as I,aj as j,F as q,f as L,bN as R}from"./index.954a2cbc.js";const A=o=>(K("data-v-b1d21844"),o=o(),M(),o),E={class:"wrap"},H={class:"result"},J=A(()=>p("span",{class:"equal"},"=",-1)),Q=g({__name:"Formula",props:{index:null,addFormula:null,clipboardData:null,switchToNext:null},setup(o){const s=o,{t:u}=C(),e=w({input:"",result:""}),n=()=>{e.input||(e.result="");let a=x.formulaParse(e.input);a&&a.toString().indexOf("Syntax error")===-1&&(e.result=a)},m=()=>{x.writeTextToClipboard(e.result.toString()),F.success(u("common.copySuccess"))},l=V(),t=()=>{l.value.focus()};return k(()=>e.input,(a,c)=>{n(),s.addFormula(s.index)}),$(()=>{s.clipboardData&&s.index===0&&(e.input=s.clipboardData)}),(a,c)=>{const h=f("a-textarea"),N=f("a-statistic"),O=f("a-popover");return r(),i("div",E,[d(h,{ref_key:"textareaRef",ref:l,value:e.input,"onUpdate:value":c[0]||(c[0]=D=>e.input=D),class:"formula-input",placeholder:a.$t("formulaParser.placeholder"),"auto-size":"",autofocus:"",onKeydown:T(B(o.switchToNext,["prevent"]),["enter"])},null,8,["value","placeholder","onKeydown"]),p("div",H,[p("div",{style:{width:"100%",height:"37.7px"},onClick:t}),J,d(O,null,{content:_(()=>[p("p",null,b(a.$t("formulaParser.copy")),1)]),default:_(()=>[e.result?(r(),v(N,{key:0,value:`${e.result}`,onClick:m},null,8,["value"])):y("",!0)]),_:1}),e.result?(r(),v(S(z),{key:0,size:"small",type:"text",title:" ","copy-content":e.result.toString()},{default:_(()=>[d(S(P))]),_:1},8,["copy-content"])):y("",!0)])])}}});const U=I(Q,[["__scopeId","data-v-b1d21844"]]),X={class:"wrap"},G={class:"formula"},W={key:0,class:"equal"},Y=g({__name:"SearchFormula",props:{searchValue:null},setup(o){const s=o,{t:u}=C(),e=w({result:""}),n=()=>{s.searchValue||(e.result="");let l=x.formulaParse(s.searchValue);l&&l.toString().indexOf("Syntax error")===-1&&(e.result=l)},m=()=>{x.writeTextToClipboard(e.result.toString()),F.success(u("common.copySuccess"))};return $(()=>{n()}),k(()=>s.searchValue,(l,t)=>{n()}),(l,t)=>{const a=f("a-statistic"),c=f("a-popover");return r(),i("div",X,[p("div",G,b(o.searchValue),1),e.result?(r(),i("div",W,"=")):y("",!0),d(c,null,{content:_(()=>[p("p",null,b(l.$t("formulaParser.copy")),1)]),default:_(()=>[e.result?(r(),v(a,{key:0,class:"result",value:`${e.result}`,onClick:m},null,8,["value"])):y("",!0)]),_:1})])}}});const Z=I(Y,[["__scopeId","data-v-df252964"]]),ee={key:0},te={key:1,style:{height:"100%"}},oe=g({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean},searchValue:null},emits:["acceptClipboardCb"],setup(o,{emit:s}){const u=o,e=V("");j(()=>{var t,a;(t=u.clipboardValue)!=null&&t.isFormula()&&(e.value=(a=u.clipboardValue)==null?void 0:a.getOriginData(),n.push(!0),!u.renderOnSearch&&s("acceptClipboardCb"))});const n=w([!0]),m=t=>{t+1===n.length&&n.push(!0)},l=t=>{var a,c;(a=t==null?void 0:t.path)!=null&&a[2].nextSibling.firstChild.firstChild&&((c=t==null?void 0:t.path)==null||c[2].nextSibling.firstChild.firstChild.focus())};return(t,a)=>(r(),v(S(R),{"max-width":800},{one:_(()=>[o.renderOnSearch?(r(),i("div",te,[d(Z,{"search-value":o.searchValue},null,8,["search-value"])])):(r(),i("div",ee,[(r(!0),i(q,null,L(n,(c,h)=>(r(),i("div",{key:h},[d(U,{style:{"margin-bottom":"10px"},index:h,"add-formula":m,"clipboard-data":e.value,"switch-to-next":l},null,8,["index","clipboard-data"])]))),128))]))]),_:1}))}});export{oe as default};
