import{aM as isWin,d as defineComponent,cm as useI18n,r as ref,as as computed,z as reactive,a as createBlock,b as withCtx,g as unref,o as openBlock,i as renderSlot,c as createVNode,l as createBaseVNode,x as toDisplayString,U as createTextVNode,ao as message,N as nodeAbility,j as resolveComponent}from"./index.954a2cbc.js";import{L as Layout6}from"./layout6.00f83a70.js";import{_ as _sfc_main$1}from"./multiImagePicker.vue_vue_type_script_setup_true_lang.1173f5b8.js";import{J as JSZip}from"./jszip.min.e4a3ab7e.js";import"./_commonjs-dynamic-modules.30ae7933.js";const unit=["B","KB","MB","GB","TB"];function fileCarry(r,i=2){const f=isWin()?1024:1e3;let t=0;if(r<f)return r+unit[t];for(;r>=f;)r/=f,t++;return r.toFixed(i)+unit[t]}function _mergeNamespaces(r,i){return i.forEach(function(f){Object.keys(f).forEach(function(t){if(t!=="default"&&!(t in r)){var e=Object.getOwnPropertyDescriptor(f,t);Object.defineProperty(r,t,e.get?e:{enumerable:!0,get:function(){return f[t]}})}})}),Object.freeze(r)}function ownKeys(r,i){var f=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);i&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),f.push.apply(f,t)}return f}function _objectSpread2(r){for(var i=1;i<arguments.length;i++){var f=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(f),!0).forEach(function(t){_defineProperty(r,t,f[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(f)):ownKeys(Object(f)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(f,t))})}return r}function _defineProperty(r,i,f){return i in r?Object.defineProperty(r,i,{value:f,enumerable:!0,configurable:!0,writable:!0}):r[i]=f,r}function _slicedToArray(r,i){return _arrayWithHoles(r)||_iterableToArrayLimit(r,i)||_unsupportedIterableToArray(r,i)||_nonIterableRest()}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _iterableToArrayLimit(r,i){var f=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(f!=null){var t,e,n=[],s=!0,a=!1;try{for(f=f.call(r);!(s=(t=f.next()).done)&&(n.push(t.value),!i||n.length!==i);s=!0);}catch(l){a=!0,e=l}finally{try{s||f.return==null||f.return()}finally{if(a)throw e}}return n}}function _unsupportedIterableToArray(r,i){if(r){if(typeof r=="string")return _arrayLikeToArray(r,i);var f=Object.prototype.toString.call(r).slice(8,-1);return f==="Object"&&r.constructor&&(f=r.constructor.name),f==="Map"||f==="Set"?Array.from(r):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?_arrayLikeToArray(r,i):void 0}}function _arrayLikeToArray(r,i){(i==null||i>r.length)&&(i=r.length);for(var f=0,t=new Array(i);f<i;f++)t[f]=r[f];return t}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function createCommonjsModule(r){var i={exports:{}};return r(i,i.exports),i.exports}var UZIP_1=createCommonjsModule(function(r){var i,f,t={};r.exports=t,t.parse=function(e,n){for(var s=t.bin.readUshort,a=t.bin.readUint,l=0,c={},m=new Uint8Array(e),h=m.length-4;a(m,h)!=101010256;)h--;l=h,l+=4;var d=s(m,l+=4);s(m,l+=2);var u=a(m,l+=2),g=a(m,l+=4);l+=4,l=g;for(var U=0;U<d;U++){a(m,l),l+=4,l+=4,l+=4,a(m,l+=4),u=a(m,l+=4);var p=a(m,l+=4),C=s(m,l+=4),b=s(m,l+2),v=s(m,l+4);l+=6;var I=a(m,l+=8);l+=4,l+=C+b+v,t._readLocal(m,I,c,u,p,n)}return c},t._readLocal=function(e,n,s,a,l,c){var m=t.bin.readUshort,h=t.bin.readUint;h(e,n),m(e,n+=4),m(e,n+=2);var d=m(e,n+=2);h(e,n+=2),h(e,n+=4),n+=4;var u=m(e,n+=8),g=m(e,n+=2);n+=2;var U=t.bin.readUTF8(e,n,u);if(n+=u,n+=g,c)s[U]={size:l,csize:a};else{var p=new Uint8Array(e.buffer,n);if(d==0)s[U]=new Uint8Array(p.buffer.slice(n,n+a));else{if(d!=8)throw"unknown compression method: "+d;var C=new Uint8Array(l);t.inflateRaw(p,C),s[U]=C}}},t.inflateRaw=function(e,n){return t.F.inflate(e,n)},t.inflate=function(e,n){return e[0],e[1],t.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),n)},t.deflate=function(e,n){n==null&&(n={level:6});var s=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[s]=120,a[s+1]=156,s+=2,s=t.F.deflateRaw(e,a,s,n.level);var l=t.adler(e,0,e.length);return a[s+0]=l>>>24&255,a[s+1]=l>>>16&255,a[s+2]=l>>>8&255,a[s+3]=l>>>0&255,new Uint8Array(a.buffer,0,s+4)},t.deflateRaw=function(e,n){n==null&&(n={level:6});var s=new Uint8Array(50+Math.floor(1.1*e.length)),a=t.F.deflateRaw(e,s,a,n.level);return new Uint8Array(s.buffer,0,a)},t.encode=function(e,n){n==null&&(n=!1);var s=0,a=t.bin.writeUint,l=t.bin.writeUshort,c={};for(var m in e){var h=!t._noNeed(m)&&!n,d=e[m],u=t.crc.crc(d,0,d.length);c[m]={cpr:h,usize:d.length,crc:u,file:h?t.deflateRaw(d):d}}for(var m in c)s+=c[m].file.length+30+46+2*t.bin.sizeUTF8(m);s+=22;var g=new Uint8Array(s),U=0,p=[];for(var m in c){var C=c[m];p.push(U),U=t._writeHeader(g,U,m,C,0)}var b=0,v=U;for(var m in c)C=c[m],p.push(U),U=t._writeHeader(g,U,m,C,1,p[b++]);var I=U-v;return a(g,U,101010256),U+=4,l(g,U+=4,b),l(g,U+=2,b),a(g,U+=2,I),a(g,U+=4,v),U+=4,U+=2,g.buffer},t._noNeed=function(e){var n=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(n)!=-1},t._writeHeader=function(e,n,s,a,l,c){var m=t.bin.writeUint,h=t.bin.writeUshort,d=a.file;return m(e,n,l==0?67324752:33639248),n+=4,l==1&&(n+=2),h(e,n,20),h(e,n+=2,0),h(e,n+=2,a.cpr?8:0),m(e,n+=2,0),m(e,n+=4,a.crc),m(e,n+=4,d.length),m(e,n+=4,a.usize),h(e,n+=4,t.bin.sizeUTF8(s)),h(e,n+=2,0),n+=2,l==1&&(n+=2,n+=2,m(e,n+=6,c),n+=4),n+=t.bin.writeUTF8(e,n,s),l==0&&(e.set(d,n),n+=d.length),n},t.crc={table:function(){for(var e=new Uint32Array(256),n=0;n<256;n++){for(var s=n,a=0;a<8;a++)1&s?s=3988292384^s>>>1:s>>>=1;e[n]=s}return e}(),update:function(e,n,s,a){for(var l=0;l<a;l++)e=t.crc.table[255&(e^n[s+l])]^e>>>8;return e},crc:function(e,n,s){return 4294967295^t.crc.update(4294967295,e,n,s)}},t.adler=function(e,n,s){for(var a=1,l=0,c=n,m=n+s;c<m;){for(var h=Math.min(c+5552,m);c<h;)l+=a+=e[c++];a%=65521,l%=65521}return l<<16|a},t.bin={readUshort:function(e,n){return e[n]|e[n+1]<<8},writeUshort:function(e,n,s){e[n]=255&s,e[n+1]=s>>8&255},readUint:function(e,n){return 16777216*e[n+3]+(e[n+2]<<16|e[n+1]<<8|e[n])},writeUint:function(e,n,s){e[n]=255&s,e[n+1]=s>>8&255,e[n+2]=s>>16&255,e[n+3]=s>>24&255},readASCII:function(e,n,s){for(var a="",l=0;l<s;l++)a+=String.fromCharCode(e[n+l]);return a},writeASCII:function(e,n,s){for(var a=0;a<s.length;a++)e[n+a]=s.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,n,s){for(var a,l="",c=0;c<s;c++)l+="%"+t.bin.pad(e[n+c].toString(16));try{a=decodeURIComponent(l)}catch{return t.bin.readASCII(e,n,s)}return a},writeUTF8:function(e,n,s){for(var a=s.length,l=0,c=0;c<a;c++){var m=s.charCodeAt(c);if((4294967168&m)==0)e[n+l]=m,l++;else if((4294965248&m)==0)e[n+l]=192|m>>6,e[n+l+1]=128|m>>0&63,l+=2;else if((4294901760&m)==0)e[n+l]=224|m>>12,e[n+l+1]=128|m>>6&63,e[n+l+2]=128|m>>0&63,l+=3;else{if((4292870144&m)!=0)throw"e";e[n+l]=240|m>>18,e[n+l+1]=128|m>>12&63,e[n+l+2]=128|m>>6&63,e[n+l+3]=128|m>>0&63,l+=4}}return l},sizeUTF8:function(e){for(var n=e.length,s=0,a=0;a<n;a++){var l=e.charCodeAt(a);if((4294967168&l)==0)s++;else if((4294965248&l)==0)s+=2;else if((4294901760&l)==0)s+=3;else{if((4292870144&l)!=0)throw"e";s+=4}}return s}},t.F={},t.F.deflateRaw=function(e,n,s,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=t.F.U,m=t.F._goodIndex;t.F._hash;var h=t.F._putsE,d=0,u=s<<3,g=0,U=e.length;if(a==0){for(;d<U;)h(n,u,d+(R=Math.min(65535,U-d))==U?1:0),u=t.F._copyExact(e,d,R,n,u+8),d+=R;return u>>>3}var p=c.lits,C=c.strt,b=c.prev,v=0,I=0,A=0,w=0,_=0,P=0;for(U>2&&(C[P=t.F._hash(e,0)]=0),d=0;d<U;d++){if(_=P,d+1<U-2){P=t.F._hash(e,d+1);var F=d+1&32767;b[F]=C[P],C[P]=F}if(g<=d){(v>14e3||I>26697)&&U-d>100&&(g<d&&(p[v]=d-g,v+=2,g=d),u=t.F._writeBlock(d==U-1||g==U?1:0,p,v,w,e,A,d-A,n,u),v=I=w=0,A=d);var y=0;d<U-2&&(y=t.F._bestMatch(e,d,b,_,Math.min(l[2],U-d),l[3]));var R=y>>>16,G=65535&y;if(y!=0){G=65535&y;var M=m(R=y>>>16,c.of0);c.lhst[257+M]++;var S=m(G,c.df0);c.dhst[S]++,w+=c.exb[M]+c.dxb[S],p[v]=R<<23|d-g,p[v+1]=G<<16|M<<8|S,v+=2,g=d+R}else c.lhst[e[d]]++;I++}}for(A==d&&e.length!=0||(g<d&&(p[v]=d-g,v+=2,g=d),u=t.F._writeBlock(1,p,v,w,e,A,d-A,n,u),v=0,I=0,v=I=w=0,A=d);(7&u)!=0;)u++;return u>>>3},t.F._bestMatch=function(e,n,s,a,l,c){var m=32767&n,h=s[m],d=m-h+32768&32767;if(h==m||a!=t.F._hash(e,n-d))return 0;for(var u=0,g=0,U=Math.min(32767,n);d<=U&&--c!=0&&h!=m;){if(u==0||e[n+u]==e[n+u-d]){var p=t.F._howLong(e,n,d);if(p>u){if(g=d,(u=p)>=l)break;d+2<p&&(p=d+2);for(var C=0,b=0;b<p-2;b++){var v=n-d+b+32768&32767,I=v-s[v]+32768&32767;I>C&&(C=I,h=v)}}}d+=(m=h)-(h=s[m])+32768&32767}return u<<16|g},t.F._howLong=function(e,n,s){if(e[n]!=e[n-s]||e[n+1]!=e[n+1-s]||e[n+2]!=e[n+2-s])return 0;var a=n,l=Math.min(e.length,n+258);for(n+=3;n<l&&e[n]==e[n-s];)n++;return n-a},t.F._hash=function(e,n){return(e[n]<<8|e[n+1])+(e[n+2]<<4)&65535},t.saved=0,t.F._writeBlock=function(e,n,s,a,l,c,m,h,d){var u,g,U,p,C,b,v,I,A,w=t.F.U,_=t.F._putsF,P=t.F._putsE;w.lhst[256]++,g=(u=t.F.getTrees())[0],U=u[1],p=u[2],C=u[3],b=u[4],v=u[5],I=u[6],A=u[7];var F=32+((d+3&7)==0?0:8-(d+3&7))+(m<<3),y=a+t.F.contSize(w.fltree,w.lhst)+t.F.contSize(w.fdtree,w.dhst),R=a+t.F.contSize(w.ltree,w.lhst)+t.F.contSize(w.dtree,w.dhst);R+=14+3*v+t.F.contSize(w.itree,w.ihst)+(2*w.ihst[16]+3*w.ihst[17]+7*w.ihst[18]);for(var G=0;G<286;G++)w.lhst[G]=0;for(G=0;G<30;G++)w.dhst[G]=0;for(G=0;G<19;G++)w.ihst[G]=0;var M=F<y&&F<R?0:y<R?1:2;if(_(h,d,e),_(h,d+1,M),d+=3,M==0){for(;(7&d)!=0;)d++;d=t.F._copyExact(l,c,m,h,d)}else{var S,x;if(M==1&&(S=w.fltree,x=w.fdtree),M==2){t.F.makeCodes(w.ltree,g),t.F.revCodes(w.ltree,g),t.F.makeCodes(w.dtree,U),t.F.revCodes(w.dtree,U),t.F.makeCodes(w.itree,p),t.F.revCodes(w.itree,p),S=w.ltree,x=w.dtree,P(h,d,C-257),P(h,d+=5,b-1),P(h,d+=5,v-4),d+=4;for(var E=0;E<v;E++)P(h,d+3*E,w.itree[1+(w.ordr[E]<<1)]);d+=3*v,d=t.F._codeTiny(I,w.itree,h,d),d=t.F._codeTiny(A,w.itree,h,d)}for(var O=c,B=0;B<s;B+=2){for(var Z=n[B],T=Z>>>23,D=O+(8388607&Z);O<D;)d=t.F._writeLit(l[O++],S,h,d);if(T!=0){var k=n[B+1],V=k>>16,L=k>>8&255,q=255&k;P(h,d=t.F._writeLit(257+L,S,h,d),T-w.of0[L]),d+=w.exb[L],_(h,d=t.F._writeLit(q,x,h,d),V-w.df0[q]),d+=w.dxb[q],O+=T}}d=t.F._writeLit(256,S,h,d)}return d},t.F._copyExact=function(e,n,s,a,l){var c=l>>>3;return a[c]=s,a[c+1]=s>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(e.buffer,n,s),c),l+(s+4<<3)},t.F.getTrees=function(){for(var e=t.F.U,n=t.F._hufTree(e.lhst,e.ltree,15),s=t.F._hufTree(e.dhst,e.dtree,15),a=[],l=t.F._lenCodes(e.ltree,a),c=[],m=t.F._lenCodes(e.dtree,c),h=0;h<a.length;h+=2)e.ihst[a[h]]++;for(h=0;h<c.length;h+=2)e.ihst[c[h]]++;for(var d=t.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&e.itree[1+(e.ordr[u-1]<<1)]==0;)u--;return[n,s,d,l,m,u,a,c]},t.F.getSecond=function(e){for(var n=[],s=0;s<e.length;s+=2)n.push(e[s+1]);return n},t.F.nonZero=function(e){for(var n="",s=0;s<e.length;s+=2)e[s+1]!=0&&(n+=(s>>1)+",");return n},t.F.contSize=function(e,n){for(var s=0,a=0;a<n.length;a++)s+=n[a]*e[1+(a<<1)];return s},t.F._codeTiny=function(e,n,s,a){for(var l=0;l<e.length;l+=2){var c=e[l],m=e[l+1];a=t.F._writeLit(c,n,s,a);var h=c==16?2:c==17?3:7;c>15&&(t.F._putsE(s,a,m,h),a+=h)}return a},t.F._lenCodes=function(e,n){for(var s=e.length;s!=2&&e[s-1]==0;)s-=2;for(var a=0;a<s;a+=2){var l=e[a+1],c=a+3<s?e[a+3]:-1,m=a+5<s?e[a+5]:-1,h=a==0?-1:e[a-1];if(l==0&&c==l&&m==l){for(var d=a+5;d+2<s&&e[d+2]==l;)d+=2;(u=Math.min(d+1-a>>>1,138))<11?n.push(17,u-3):n.push(18,u-11),a+=2*u-2}else if(l==h&&c==l&&m==l){for(d=a+5;d+2<s&&e[d+2]==l;)d+=2;var u=Math.min(d+1-a>>>1,6);n.push(16,u-3),a+=2*u-2}else n.push(l,0)}return s>>>1},t.F._hufTree=function(e,n,s){var a=[],l=e.length,c=n.length,m=0;for(m=0;m<c;m+=2)n[m]=0,n[m+1]=0;for(m=0;m<l;m++)e[m]!=0&&a.push({lit:m,f:e[m]});var h=a.length,d=a.slice(0);if(h==0)return 0;if(h==1){var u=a[0].lit;return d=u==0?1:0,n[1+(u<<1)]=1,n[1+(d<<1)]=1,1}a.sort(function(I,A){return I.f-A.f});var g=a[0],U=a[1],p=0,C=1,b=2;for(a[0]={lit:-1,f:g.f+U.f,l:g,r:U,d:0};C!=h-1;)g=p!=C&&(b==h||a[p].f<a[b].f)?a[p++]:a[b++],U=p!=C&&(b==h||a[p].f<a[b].f)?a[p++]:a[b++],a[C++]={lit:-1,f:g.f+U.f,l:g,r:U};var v=t.F.setDepth(a[C-1],0);for(v>s&&(t.F.restrictDepth(d,s,v),v=s),m=0;m<h;m++)n[1+(d[m].lit<<1)]=d[m].d;return v},t.F.setDepth=function(e,n){return e.lit!=-1?(e.d=n,n):Math.max(t.F.setDepth(e.l,n+1),t.F.setDepth(e.r,n+1))},t.F.restrictDepth=function(e,n,s){var a=0,l=1<<s-n,c=0;for(e.sort(function(h,d){return d.d==h.d?h.f-d.f:d.d-h.d}),a=0;a<e.length&&e[a].d>n;a++){var m=e[a].d;e[a].d=n,c+=l-(1<<s-m)}for(c>>>=s-n;c>0;)(m=e[a].d)<n?(e[a].d++,c-=1<<n-m-1):a++;for(;a>=0;a--)e[a].d==n&&c<0&&(e[a].d--,c++);c!=0&&console.log("debt left")},t.F._goodIndex=function(e,n){var s=0;return n[16|s]<=e&&(s|=16),n[8|s]<=e&&(s|=8),n[4|s]<=e&&(s|=4),n[2|s]<=e&&(s|=2),n[1|s]<=e&&(s|=1),s},t.F._writeLit=function(e,n,s,a){return t.F._putsF(s,a,n[e<<1]),a+n[1+(e<<1)]},t.F.inflate=function(e,n){var s=Uint8Array;if(e[0]==3&&e[1]==0)return n||new s(0);var a=t.F,l=a._bitsF,c=a._bitsE,m=a._decodeTiny,h=a.makeCodes,d=a.codes2map,u=a._get17,g=a.U,U=n==null;U&&(n=new s(e.length>>>2<<3));for(var p,C,b=0,v=0,I=0,A=0,w=0,_=0,P=0,F=0,y=0;b==0;)if(b=l(e,y,1),v=l(e,y+1,2),y+=3,v!=0){if(U&&(n=t.F._check(n,F+(1<<17))),v==1&&(p=g.flmap,C=g.fdmap,_=511,P=31),v==2){I=c(e,y,5)+257,A=c(e,y+5,5)+1,w=c(e,y+10,4)+4,y+=14;for(var R=0;R<38;R+=2)g.itree[R]=0,g.itree[R+1]=0;var G=1;for(R=0;R<w;R++){var M=c(e,y+3*R,3);g.itree[1+(g.ordr[R]<<1)]=M,M>G&&(G=M)}y+=3*w,h(g.itree,G),d(g.itree,G,g.imap),p=g.lmap,C=g.dmap,y=m(g.imap,(1<<G)-1,I+A,e,y,g.ttree);var S=a._copyOut(g.ttree,0,I,g.ltree);_=(1<<S)-1;var x=a._copyOut(g.ttree,I,A,g.dtree);P=(1<<x)-1,h(g.ltree,S),d(g.ltree,S,p),h(g.dtree,x),d(g.dtree,x,C)}for(;;){var E=p[u(e,y)&_];y+=15&E;var O=E>>>4;if(O>>>8==0)n[F++]=O;else{if(O==256)break;var B=F+O-254;if(O>264){var Z=g.ldef[O-257];B=F+(Z>>>3)+c(e,y,7&Z),y+=7&Z}var T=C[u(e,y)&P];y+=15&T;var D=T>>>4,k=g.ddef[D],V=(k>>>4)+l(e,y,15&k);for(y+=15&k,U&&(n=t.F._check(n,F+(1<<17)));F<B;)n[F]=n[F++-V],n[F]=n[F++-V],n[F]=n[F++-V],n[F]=n[F++-V];F=B}}}else{(7&y)!=0&&(y+=8-(7&y));var L=4+(y>>>3),q=e[L-4]|e[L-3]<<8;U&&(n=t.F._check(n,F+q)),n.set(new s(e.buffer,e.byteOffset+L,q),F),y=L+q<<3,F+=q}return n.length==F?n:n.slice(0,F)},t.F._check=function(e,n){var s=e.length;if(n<=s)return e;var a=new Uint8Array(Math.max(s<<1,n));return a.set(e,0),a},t.F._decodeTiny=function(e,n,s,a,l,c){for(var m=t.F._bitsE,h=t.F._get17,d=0;d<s;){var u=e[h(a,l)&n];l+=15&u;var g=u>>>4;if(g<=15)c[d]=g,d++;else{var U=0,p=0;g==16?(p=3+m(a,l,2),l+=2,U=c[d-1]):g==17?(p=3+m(a,l,3),l+=3):g==18&&(p=11+m(a,l,7),l+=7);for(var C=d+p;d<C;)c[d]=U,d++}}return l},t.F._copyOut=function(e,n,s,a){for(var l=0,c=0,m=a.length>>>1;c<s;){var h=e[c+n];a[c<<1]=0,a[1+(c<<1)]=h,h>l&&(l=h),c++}for(;c<m;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},t.F.makeCodes=function(e,n){for(var s,a,l,c,m=t.F.U,h=e.length,d=m.bl_count,u=0;u<=n;u++)d[u]=0;for(u=1;u<h;u+=2)d[e[u]]++;var g=m.next_code;for(s=0,d[0]=0,a=1;a<=n;a++)s=s+d[a-1]<<1,g[a]=s;for(l=0;l<h;l+=2)(c=e[l+1])!=0&&(e[l]=g[c],g[c]++)},t.F.codes2map=function(e,n,s){for(var a=e.length,l=t.F.U.rev15,c=0;c<a;c+=2)if(e[c+1]!=0)for(var m=c>>1,h=e[c+1],d=m<<4|h,u=n-h,g=e[c]<<u,U=g+(1<<u);g!=U;)s[l[g]>>>15-n]=d,g++},t.F.revCodes=function(e,n){for(var s=t.F.U.rev15,a=15-n,l=0;l<e.length;l+=2){var c=e[l]<<n-e[l+1];e[l]=s[c]>>>a}},t.F._putsE=function(e,n,s){s<<=7&n;var a=n>>>3;e[a]|=s,e[a+1]|=s>>>8},t.F._putsF=function(e,n,s){s<<=7&n;var a=n>>>3;e[a]|=s,e[a+1]|=s>>>8,e[a+2]|=s>>>16},t.F._bitsE=function(e,n,s){return(e[n>>>3]|e[1+(n>>>3)]<<8)>>>(7&n)&(1<<s)-1},t.F._bitsF=function(e,n,s){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)&(1<<s)-1},t.F._get17=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)},t.F._get25=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16|e[3+(n>>>3)]<<24)>>>(7&n)},t.F.U=(i=Uint16Array,f=Uint32Array,{next_code:new i(16),bl_count:new i(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new i(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new f(32),flmap:new i(512),fltree:[],fdmap:new i(32),fdtree:[],lmap:new i(32768),ltree:[],ttree:[],dmap:new i(32768),dtree:[],imap:new i(512),itree:[],rev15:new i(32768),lhst:new f(286),dhst:new f(30),ihst:new f(19),lits:new f(15e3),strt:new i(65536),prev:new i(32768)}),function(){for(var e=t.F.U,n=0;n<32768;n++){var s=n;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,e.rev15[n]=(s>>>16|s<<16)>>>17}function a(l,c,m){for(;c--!=0;)l.push(0,m)}for(n=0;n<32;n++)e.ldef[n]=e.of0[n]<<3|e.exb[n],e.ddef[n]=e.df0[n]<<4|e.dxb[n];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),t.F.makeCodes(e.fltree,9),t.F.codes2map(e.fltree,9,e.flmap),t.F.revCodes(e.fltree,9),a(e.fdtree,32,5),t.F.makeCodes(e.fdtree,5),t.F.codes2map(e.fdtree,5,e.fdmap),t.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()}),UZIP=Object.freeze(_mergeNamespaces({__proto__:null,default:UZIP_1},[UZIP_1])),UPNG={},N,W,H;UPNG.toRGBA8=function(r){var i=r.width,f=r.height;if(r.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(r.data,i,f,r).buffer];var t=[];r.frames[0].data==null&&(r.frames[0].data=r.data);for(var e=i*f*4,n=new Uint8Array(e),s=new Uint8Array(e),a=new Uint8Array(e),l=0;l<r.frames.length;l++){var c=r.frames[l],m=c.rect.x,h=c.rect.y,d=c.rect.width,u=c.rect.height,g=UPNG.toRGBA8.decodeImage(c.data,d,u,r);if(l!=0)for(var U=0;U<e;U++)a[U]=n[U];if(c.blend==0?UPNG._copyTile(g,d,u,n,i,f,m,h,0):c.blend==1&&UPNG._copyTile(g,d,u,n,i,f,m,h,1),t.push(n.buffer.slice(0)),c.dispose!=0){if(c.dispose==1)UPNG._copyTile(s,d,u,n,i,f,m,h,0);else if(c.dispose==2)for(U=0;U<e;U++)n[U]=a[U]}}return t},UPNG.toRGBA8.decodeImage=function(r,i,f,t){var e=i*f,n=UPNG.decode._getBPP(t),s=Math.ceil(i*n/8),a=new Uint8Array(4*e),l=new Uint32Array(a.buffer),c=t.ctype,m=t.depth,h=UPNG._bin.readUshort;if(c==6){var d=e<<2;if(m==8)for(var u=0;u<d;u+=4)a[u]=r[u],a[u+1]=r[u+1],a[u+2]=r[u+2],a[u+3]=r[u+3];if(m==16)for(u=0;u<d;u++)a[u]=r[u<<1]}else if(c==2){var g=t.tabs.tRNS;if(g==null){if(m==8)for(u=0;u<e;u++){var U=3*u;l[u]=255<<24|r[U+2]<<16|r[U+1]<<8|r[U]}if(m==16)for(u=0;u<e;u++)U=6*u,l[u]=255<<24|r[U+4]<<16|r[U+2]<<8|r[U]}else{var p=g[0],C=g[1],b=g[2];if(m==8)for(u=0;u<e;u++){var v=u<<2;U=3*u,l[u]=255<<24|r[U+2]<<16|r[U+1]<<8|r[U],r[U]==p&&r[U+1]==C&&r[U+2]==b&&(a[v+3]=0)}if(m==16)for(u=0;u<e;u++)v=u<<2,U=6*u,l[u]=255<<24|r[U+4]<<16|r[U+2]<<8|r[U],h(r,U)==p&&h(r,U+2)==C&&h(r,U+4)==b&&(a[v+3]=0)}}else if(c==3){var I=t.tabs.PLTE,A=t.tabs.tRNS,w=A?A.length:0;if(m==1)for(var _=0;_<f;_++){var P=_*s,F=_*i;for(u=0;u<i;u++){v=F+u<<2;var y=3*(R=r[P+(u>>3)]>>7-((7&u)<<0)&1);a[v]=I[y],a[v+1]=I[y+1],a[v+2]=I[y+2],a[v+3]=R<w?A[R]:255}}if(m==2)for(_=0;_<f;_++)for(P=_*s,F=_*i,u=0;u<i;u++)v=F+u<<2,y=3*(R=r[P+(u>>2)]>>6-((3&u)<<1)&3),a[v]=I[y],a[v+1]=I[y+1],a[v+2]=I[y+2],a[v+3]=R<w?A[R]:255;if(m==4)for(_=0;_<f;_++)for(P=_*s,F=_*i,u=0;u<i;u++)v=F+u<<2,y=3*(R=r[P+(u>>1)]>>4-((1&u)<<2)&15),a[v]=I[y],a[v+1]=I[y+1],a[v+2]=I[y+2],a[v+3]=R<w?A[R]:255;if(m==8)for(u=0;u<e;u++){var R;v=u<<2,y=3*(R=r[u]),a[v]=I[y],a[v+1]=I[y+1],a[v+2]=I[y+2],a[v+3]=R<w?A[R]:255}}else if(c==4){if(m==8)for(u=0;u<e;u++){v=u<<2;var G=r[M=u<<1];a[v]=G,a[v+1]=G,a[v+2]=G,a[v+3]=r[M+1]}if(m==16)for(u=0;u<e;u++){var M;v=u<<2,G=r[M=u<<2],a[v]=G,a[v+1]=G,a[v+2]=G,a[v+3]=r[M+2]}}else if(c==0)for(p=t.tabs.tRNS?t.tabs.tRNS:-1,_=0;_<f;_++){var S=_*s,x=_*i;if(m==1)for(var E=0;E<i;E++){var O=(G=255*(r[S+(E>>>3)]>>>7-(7&E)&1))==255*p?0:255;l[x+E]=O<<24|G<<16|G<<8|G}else if(m==2)for(E=0;E<i;E++)O=(G=85*(r[S+(E>>>2)]>>>6-((3&E)<<1)&3))==85*p?0:255,l[x+E]=O<<24|G<<16|G<<8|G;else if(m==4)for(E=0;E<i;E++)O=(G=17*(r[S+(E>>>1)]>>>4-((1&E)<<2)&15))==17*p?0:255,l[x+E]=O<<24|G<<16|G<<8|G;else if(m==8)for(E=0;E<i;E++)O=(G=r[S+E])==p?0:255,l[x+E]=O<<24|G<<16|G<<8|G;else if(m==16)for(E=0;E<i;E++)G=r[S+(E<<1)],O=h(r,S+(E<<u))==p?0:255,l[x+E]=O<<24|G<<16|G<<8|G}return a},UPNG.decode=function(r){for(var i,f=new Uint8Array(r),t=8,e=UPNG._bin,n=e.readUshort,s=e.readUint,a={tabs:{},frames:[]},l=new Uint8Array(f.length),c=0,m=0,h=[137,80,78,71,13,10,26,10],d=0;d<8;d++)if(f[d]!=h[d])throw"The input is not a PNG file!";for(;t<f.length;){var u=e.readUint(f,t);t+=4;var g=e.readASCII(f,t,4);if(t+=4,g=="IHDR")UPNG.decode._IHDR(f,t,a);else if(g=="CgBI")a.tabs[g]=f.slice(t,t+4);else if(g=="IDAT"){for(d=0;d<u;d++)l[c+d]=f[t+d];c+=u}else if(g=="acTL")a.tabs[g]={num_frames:s(f,t),num_plays:s(f,t+4)},i=new Uint8Array(f.length);else if(g=="fcTL"){var U;m!=0&&((U=a.frames[a.frames.length-1]).data=UPNG.decode._decompress(a,i.slice(0,m),U.rect.width,U.rect.height),m=0);var p={x:s(f,t+12),y:s(f,t+16),width:s(f,t+4),height:s(f,t+8)},C=n(f,t+22);C=n(f,t+20)/(C==0?100:C);var b={rect:p,delay:Math.round(1e3*C),dispose:f[t+24],blend:f[t+25]};a.frames.push(b)}else if(g=="fdAT"){for(d=0;d<u-4;d++)i[m+d]=f[t+d+4];m+=u-4}else if(g=="pHYs")a.tabs[g]=[e.readUint(f,t),e.readUint(f,t+4),f[t+8]];else if(g=="cHRM")for(a.tabs[g]=[],d=0;d<8;d++)a.tabs[g].push(e.readUint(f,t+4*d));else if(g=="tEXt"||g=="zTXt"){a.tabs[g]==null&&(a.tabs[g]={});var v=e.nextZero(f,t),I=e.readASCII(f,t,v-t),A=t+u-v-1;if(g=="tEXt")P=e.readASCII(f,v+1,A);else{var w=UPNG.decode._inflate(f.slice(v+2,v+2+A));P=e.readUTF8(w,0,w.length)}a.tabs[g][I]=P}else if(g=="iTXt"){a.tabs[g]==null&&(a.tabs[g]={}),v=0;var _=t;v=e.nextZero(f,_),I=e.readASCII(f,_,v-_);var P,F=f[_=v+1];f[_+1],_+=2,v=e.nextZero(f,_),e.readASCII(f,_,v-_),_=v+1,v=e.nextZero(f,_),e.readUTF8(f,_,v-_),A=u-((_=v+1)-t),F==0?P=e.readUTF8(f,_,A):(w=UPNG.decode._inflate(f.slice(_,_+A)),P=e.readUTF8(w,0,w.length)),a.tabs[g][I]=P}else if(g=="PLTE")a.tabs[g]=e.readBytes(f,t,u);else if(g=="hIST"){var y=a.tabs.PLTE.length/3;for(a.tabs[g]=[],d=0;d<y;d++)a.tabs[g].push(n(f,t+2*d))}else if(g=="tRNS")a.ctype==3?a.tabs[g]=e.readBytes(f,t,u):a.ctype==0?a.tabs[g]=n(f,t):a.ctype==2&&(a.tabs[g]=[n(f,t),n(f,t+2),n(f,t+4)]);else if(g=="gAMA")a.tabs[g]=e.readUint(f,t)/1e5;else if(g=="sRGB")a.tabs[g]=f[t];else if(g=="bKGD")a.ctype==0||a.ctype==4?a.tabs[g]=[n(f,t)]:a.ctype==2||a.ctype==6?a.tabs[g]=[n(f,t),n(f,t+2),n(f,t+4)]:a.ctype==3&&(a.tabs[g]=f[t]);else if(g=="IEND")break;t+=u,e.readUint(f,t),t+=4}return m!=0&&((U=a.frames[a.frames.length-1]).data=UPNG.decode._decompress(a,i.slice(0,m),U.rect.width,U.rect.height),m=0),a.data=UPNG.decode._decompress(a,l,a.width,a.height),delete a.compress,delete a.interlace,delete a.filter,a},UPNG.decode._decompress=function(r,i,f,t){var e=UPNG.decode._getBPP(r),n=Math.ceil(f*e/8),s=new Uint8Array((n+1+r.interlace)*t);return i=r.tabs.CgBI?UPNG.inflateRaw(i,s):UPNG.decode._inflate(i,s),r.interlace==0?i=UPNG.decode._filterZero(i,r,0,f,t):r.interlace==1&&(i=UPNG.decode._readInterlace(i,r)),i},UPNG.decode._inflate=function(r,i){return UPNG.inflateRaw(new Uint8Array(r.buffer,2,r.length-6),i)},UPNG.inflateRaw=(H={},H.H={},H.H.N=function(r,i){var f,t,e=Uint8Array,n=0,s=0,a=0,l=0,c=0,m=0,h=0,d=0,u=0;if(r[0]==3&&r[1]==0)return i||new e(0);var g=H.H,U=g.b,p=g.e,C=g.R,b=g.n,v=g.A,I=g.Z,A=g.m,w=i==null;for(w&&(i=new e(r.length>>>2<<5));n==0;)if(n=U(r,u,1),s=U(r,u+1,2),u+=3,s!=0){if(w&&(i=H.H.W(i,d+(1<<17))),s==1&&(f=A.J,t=A.h,m=511,h=31),s==2){a=p(r,u,5)+257,l=p(r,u+5,5)+1,c=p(r,u+10,4)+4,u+=14;for(var _=1,P=0;P<38;P+=2)A.Q[P]=0,A.Q[P+1]=0;for(P=0;P<c;P++){var F=p(r,u+3*P,3);A.Q[1+(A.X[P]<<1)]=F,F>_&&(_=F)}u+=3*c,b(A.Q,_),v(A.Q,_,A.u),f=A.w,t=A.d,u=C(A.u,(1<<_)-1,a+l,r,u,A.v);var y=g.V(A.v,0,a,A.C);m=(1<<y)-1;var R=g.V(A.v,a,l,A.D);h=(1<<R)-1,b(A.C,y),v(A.C,y,f),b(A.D,R),v(A.D,R,t)}for(;;){var G=f[I(r,u)&m];u+=15&G;var M=G>>>4;if(M>>>8==0)i[d++]=M;else{if(M==256)break;var S=d+M-254;if(M>264){var x=A.q[M-257];S=d+(x>>>3)+p(r,u,7&x),u+=7&x}var E=t[I(r,u)&h];u+=15&E;var O=E>>>4,B=A.c[O],Z=(B>>>4)+U(r,u,15&B);for(u+=15&B;d<S;)i[d]=i[d++-Z],i[d]=i[d++-Z],i[d]=i[d++-Z],i[d]=i[d++-Z];d=S}}}else{(7&u)!=0&&(u+=8-(7&u));var T=4+(u>>>3),D=r[T-4]|r[T-3]<<8;w&&(i=H.H.W(i,d+D)),i.set(new e(r.buffer,r.byteOffset+T,D),d),u=T+D<<3,d+=D}return i.length==d?i:i.slice(0,d)},H.H.W=function(r,i){var f=r.length;if(i<=f)return r;var t=new Uint8Array(f<<1);return t.set(r,0),t},H.H.R=function(r,i,f,t,e,n){for(var s=H.H.e,a=H.H.Z,l=0;l<f;){var c=r[a(t,e)&i];e+=15&c;var m=c>>>4;if(m<=15)n[l]=m,l++;else{var h=0,d=0;m==16?(d=3+s(t,e,2),e+=2,h=n[l-1]):m==17?(d=3+s(t,e,3),e+=3):m==18&&(d=11+s(t,e,7),e+=7);for(var u=l+d;l<u;)n[l]=h,l++}}return e},H.H.V=function(r,i,f,t){for(var e=0,n=0,s=t.length>>>1;n<f;){var a=r[n+i];t[n<<1]=0,t[1+(n<<1)]=a,a>e&&(e=a),n++}for(;n<s;)t[n<<1]=0,t[1+(n<<1)]=0,n++;return e},H.H.n=function(r,i){for(var f,t,e,n,s=H.H.m,a=r.length,l=s.j,c=0;c<=i;c++)l[c]=0;for(c=1;c<a;c+=2)l[r[c]]++;var m=s.K;for(f=0,l[0]=0,t=1;t<=i;t++)f=f+l[t-1]<<1,m[t]=f;for(e=0;e<a;e+=2)(n=r[e+1])!=0&&(r[e]=m[n],m[n]++)},H.H.A=function(r,i,f){for(var t=r.length,e=H.H.m.r,n=0;n<t;n+=2)if(r[n+1]!=0)for(var s=n>>1,a=r[n+1],l=s<<4|a,c=i-a,m=r[n]<<c,h=m+(1<<c);m!=h;)f[e[m]>>>15-i]=l,m++},H.H.l=function(r,i){for(var f=H.H.m.r,t=15-i,e=0;e<r.length;e+=2){var n=r[e]<<i-r[e+1];r[e]=f[n]>>>t}},H.H.M=function(r,i,f){f<<=7&i;var t=i>>>3;r[t]|=f,r[t+1]|=f>>>8},H.H.I=function(r,i,f){f<<=7&i;var t=i>>>3;r[t]|=f,r[t+1]|=f>>>8,r[t+2]|=f>>>16},H.H.e=function(r,i,f){return(r[i>>>3]|r[1+(i>>>3)]<<8)>>>(7&i)&(1<<f)-1},H.H.b=function(r,i,f){return(r[i>>>3]|r[1+(i>>>3)]<<8|r[2+(i>>>3)]<<16)>>>(7&i)&(1<<f)-1},H.H.Z=function(r,i){return(r[i>>>3]|r[1+(i>>>3)]<<8|r[2+(i>>>3)]<<16)>>>(7&i)},H.H.i=function(r,i){return(r[i>>>3]|r[1+(i>>>3)]<<8|r[2+(i>>>3)]<<16|r[3+(i>>>3)]<<24)>>>(7&i)},H.H.m=(N=Uint16Array,W=Uint32Array,{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(32768),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(65536),g:new N(32768)}),function(){for(var r=H.H.m,i=0;i<32768;i++){var f=i;f=(4278255360&(f=(4042322160&(f=(3435973836&(f=(2863311530&f)>>>1|(1431655765&f)<<1))>>>2|(858993459&f)<<2))>>>4|(252645135&f)<<4))>>>8|(16711935&f)<<8,r.r[i]=(f>>>16|f<<16)>>>17}function t(e,n,s){for(;n--!=0;)e.push(0,s)}for(i=0;i<32;i++)r.q[i]=r.S[i]<<3|r.T[i],r.c[i]=r.p[i]<<4|r.z[i];t(r._,144,8),t(r._,112,9),t(r._,24,7),t(r._,8,8),H.H.n(r._,9),H.H.A(r._,9,r.J),H.H.l(r._,9),t(r.$,32,5),H.H.n(r.$,5),H.H.A(r.$,5,r.h),H.H.l(r.$,5),t(r.Q,19,0),t(r.C,286,0),t(r.D,30,0),t(r.v,320,0)}(),H.H.N),UPNG.decode._readInterlace=function(r,i){for(var f=i.width,t=i.height,e=UPNG.decode._getBPP(i),n=e>>3,s=Math.ceil(f*e/8),a=new Uint8Array(t*s),l=0,c=[0,0,4,0,2,0,1],m=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],u=0;u<7;){for(var g=h[u],U=d[u],p=0,C=0,b=c[u];b<t;)b+=g,C++;for(var v=m[u];v<f;)v+=U,p++;var I=Math.ceil(p*e/8);UPNG.decode._filterZero(r,i,l,p,C);for(var A=0,w=c[u];w<t;){for(var _=m[u],P=l+A*I<<3;_<f;){var F;if(e==1&&(F=(F=r[P>>3])>>7-(7&P)&1,a[w*s+(_>>3)]|=F<<7-((7&_)<<0)),e==2&&(F=(F=r[P>>3])>>6-(7&P)&3,a[w*s+(_>>2)]|=F<<6-((3&_)<<1)),e==4&&(F=(F=r[P>>3])>>4-(7&P)&15,a[w*s+(_>>1)]|=F<<4-((1&_)<<2)),e>=8)for(var y=w*s+_*n,R=0;R<n;R++)a[y+R]=r[(P>>3)+R];P+=e,_+=U}A++,w+=g}p*C!=0&&(l+=C*(1+I)),u+=1}return a},UPNG.decode._getBPP=function(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth},UPNG.decode._filterZero=function(r,i,f,t,e){var n=UPNG.decode._getBPP(i),s=Math.ceil(t*n/8),a=UPNG.decode._paeth;n=Math.ceil(n/8);var l=0,c=1,m=r[f],h=0;if(m>1&&(r[f]=[0,0,1][m-2]),m==3)for(h=n;h<s;h++)r[h+1]=r[h+1]+(r[h+1-n]>>>1)&255;for(var d=0;d<e;d++)if(h=0,(m=r[(c=(l=f+d*s)+d+1)-1])==0)for(;h<s;h++)r[l+h]=r[c+h];else if(m==1){for(;h<n;h++)r[l+h]=r[c+h];for(;h<s;h++)r[l+h]=r[c+h]+r[l+h-n]}else if(m==2)for(;h<s;h++)r[l+h]=r[c+h]+r[l+h-s];else if(m==3){for(;h<n;h++)r[l+h]=r[c+h]+(r[l+h-s]>>>1);for(;h<s;h++)r[l+h]=r[c+h]+(r[l+h-s]+r[l+h-n]>>>1)}else{for(;h<n;h++)r[l+h]=r[c+h]+a(0,r[l+h-s],0);for(;h<s;h++)r[l+h]=r[c+h]+a(r[l+h-n],r[l+h-s],r[l+h-n-s])}return r},UPNG.decode._paeth=function(r,i,f){var t=r+i-f,e=t-r,n=t-i,s=t-f;return e*e<=n*n&&e*e<=s*s?r:n*n<=s*s?i:f},UPNG.decode._IHDR=function(r,i,f){var t=UPNG._bin;f.width=t.readUint(r,i),i+=4,f.height=t.readUint(r,i),i+=4,f.depth=r[i],i++,f.ctype=r[i],i++,f.compress=r[i],i++,f.filter=r[i],i++,f.interlace=r[i],i++},UPNG._bin={nextZero:function(i,f){for(;i[f]!=0;)f++;return f},readUshort:function(i,f){return i[f]<<8|i[f+1]},writeUshort:function(i,f,t){i[f]=t>>8&255,i[f+1]=255&t},readUint:function(i,f){return 16777216*i[f]+(i[f+1]<<16|i[f+2]<<8|i[f+3])},writeUint:function(i,f,t){i[f]=t>>24&255,i[f+1]=t>>16&255,i[f+2]=t>>8&255,i[f+3]=255&t},readASCII:function(i,f,t){for(var e="",n=0;n<t;n++)e+=String.fromCharCode(i[f+n]);return e},writeASCII:function(i,f,t){for(var e=0;e<t.length;e++)i[f+e]=t.charCodeAt(e)},readBytes:function(i,f,t){for(var e=[],n=0;n<t;n++)e.push(i[f+n]);return e},pad:function(i){return i.length<2?"0".concat(i):i},readUTF8:function(i,f,t){for(var e,n="",s=0;s<t;s++)n+="%".concat(UPNG._bin.pad(i[f+s].toString(16)));try{e=decodeURIComponent(n)}catch{return UPNG._bin.readASCII(i,f,t)}return e}},UPNG._copyTile=function(r,i,f,t,e,n,s,a,l){for(var c=Math.min(i,e),m=Math.min(f,n),h=0,d=0,u=0;u<m;u++)for(var g=0;g<c;g++)if(s>=0&&a>=0?(h=u*i+g<<2,d=(a+u)*e+s+g<<2):(h=(-a+u)*i-s+g<<2,d=u*e+g<<2),l==0)t[d]=r[h],t[d+1]=r[h+1],t[d+2]=r[h+2],t[d+3]=r[h+3];else if(l==1){var U=r[h+3]*.00392156862745098,p=r[h]*U,C=r[h+1]*U,b=r[h+2]*U,v=t[d+3]*(1/255),I=t[d]*v,A=t[d+1]*v,w=t[d+2]*v,_=1-U,P=U+v*_,F=P==0?0:1/P;t[d+3]=255*P,t[d+0]=(p+I*_)*F,t[d+1]=(C+A*_)*F,t[d+2]=(b+w*_)*F}else if(l==2)U=r[h+3],p=r[h],C=r[h+1],b=r[h+2],v=t[d+3],I=t[d],A=t[d+1],w=t[d+2],U==v&&p==I&&C==A&&b==w?(t[d]=0,t[d+1]=0,t[d+2]=0,t[d+3]=0):(t[d]=p,t[d+1]=C,t[d+2]=b,t[d+3]=U);else if(l==3){if(U=r[h+3],p=r[h],C=r[h+1],b=r[h+2],v=t[d+3],I=t[d],A=t[d+1],w=t[d+2],U==v&&p==I&&C==A&&b==w)continue;if(U<220&&v>20)return!1}return!0},UPNG.encode=function(r,i,f,t,e,n,s){t==null&&(t=0),s==null&&(s=!1);var a=UPNG.encode.compress(r,i,f,t,[!1,!1,!1,0,s]);return UPNG.encode.compressPNG(a,-1),UPNG.encode._main(a,i,f,e,n)},UPNG.encodeLL=function(r,i,f,t,e,n,s,a){for(var l={ctype:0+(t==1?0:2)+(e==0?0:4),depth:n,frames:[]},c=(t+e)*n,m=c*i,h=0;h<r.length;h++)l.frames.push({rect:{x:0,y:0,width:i,height:f},img:new Uint8Array(r[h]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(m/8)});return UPNG.encode.compressPNG(l,0,!0),UPNG.encode._main(l,i,f,s,a)},UPNG.encode._main=function(r,i,f,t,e){e==null&&(e={});var n=UPNG.crc.crc,s=UPNG._bin.writeUint,a=UPNG._bin.writeUshort,l=UPNG._bin.writeASCII,c=8,m=r.frames.length>1,h=!1,d=33+(m?20:0);if(e.sRGB!=null&&(d+=13),e.pHYs!=null&&(d+=21),r.ctype==3){for(var u=r.plte.length,g=0;g<u;g++)r.plte[g]>>>24!=255&&(h=!0);d+=8+3*u+4+(h?8+1*u+4:0)}for(var U=0;U<r.frames.length;U++)m&&(d+=38),d+=(P=r.frames[U]).cimg.length+12,U!=0&&(d+=4);d+=12;var p=new Uint8Array(d),C=[137,80,78,71,13,10,26,10];for(g=0;g<8;g++)p[g]=C[g];if(s(p,c,13),l(p,c+=4,"IHDR"),s(p,c+=4,i),s(p,c+=4,f),p[c+=4]=r.depth,p[++c]=r.ctype,p[++c]=0,p[++c]=0,p[++c]=0,s(p,++c,n(p,c-17,17)),c+=4,e.sRGB!=null&&(s(p,c,1),l(p,c+=4,"sRGB"),p[c+=4]=e.sRGB,s(p,++c,n(p,c-5,5)),c+=4),e.pHYs!=null&&(s(p,c,9),l(p,c+=4,"pHYs"),s(p,c+=4,e.pHYs[0]),s(p,c+=4,e.pHYs[1]),p[c+=4]=e.pHYs[2],s(p,++c,n(p,c-13,13)),c+=4),m&&(s(p,c,8),l(p,c+=4,"acTL"),s(p,c+=4,r.frames.length),s(p,c+=4,e.loop!=null?e.loop:0),s(p,c+=4,n(p,c-12,12)),c+=4),r.ctype==3){for(s(p,c,3*(u=r.plte.length)),l(p,c+=4,"PLTE"),c+=4,g=0;g<u;g++){var b=3*g,v=r.plte[g],I=255&v,A=v>>>8&255,w=v>>>16&255;p[c+b+0]=I,p[c+b+1]=A,p[c+b+2]=w}if(s(p,c+=3*u,n(p,c-3*u-4,3*u+4)),c+=4,h){for(s(p,c,u),l(p,c+=4,"tRNS"),c+=4,g=0;g<u;g++)p[c+g]=r.plte[g]>>>24&255;s(p,c+=u,n(p,c-u-4,u+4)),c+=4}}var _=0;for(U=0;U<r.frames.length;U++){var P=r.frames[U];m&&(s(p,c,26),l(p,c+=4,"fcTL"),s(p,c+=4,_++),s(p,c+=4,P.rect.width),s(p,c+=4,P.rect.height),s(p,c+=4,P.rect.x),s(p,c+=4,P.rect.y),a(p,c+=4,t[U]),a(p,c+=2,1e3),p[c+=2]=P.dispose,p[++c]=P.blend,s(p,++c,n(p,c-30,30)),c+=4);var F=P.cimg;s(p,c,(u=F.length)+(U==0?0:4));var y=c+=4;l(p,c,U==0?"IDAT":"fdAT"),c+=4,U!=0&&(s(p,c,_++),c+=4),p.set(F,c),s(p,c+=u,n(p,y,c-y)),c+=4}return s(p,c,0),l(p,c+=4,"IEND"),s(p,c+=4,n(p,c-4,4)),c+=4,p.buffer},UPNG.encode.compressPNG=function(r,i,f){for(var t=0;t<r.frames.length;t++){var e=r.frames[t];e.rect.width;var n=e.rect.height,s=new Uint8Array(n*e.bpl+n);e.cimg=UPNG.encode._filterZero(e.img,n,e.bpp,e.bpl,s,i,f)}},UPNG.encode.compress=function(r,i,f,t,e){for(var n=e[0],s=e[1],a=e[2],l=e[3],c=e[4],m=6,h=8,d=255,u=0;u<r.length;u++)for(var g=new Uint8Array(r[u]),U=g.length,p=0;p<U;p+=4)d&=g[p+3];var C=d!=255,b=UPNG.encode.framize(r,i,f,n,s,a),v={},I=[],A=[];if(t!=0){var w=[];for(p=0;p<b.length;p++)w.push(b[p].img.buffer);var _=UPNG.encode.concatRGBA(w),P=UPNG.quantize(_,t),F=0,y=new Uint8Array(P.abuf);for(p=0;p<b.length;p++){var R=(Q=b[p].img).length;for(A.push(new Uint8Array(P.inds.buffer,F>>2,R>>2)),u=0;u<R;u+=4)Q[u]=y[F+u],Q[u+1]=y[F+u+1],Q[u+2]=y[F+u+2],Q[u+3]=y[F+u+3];F+=R}for(p=0;p<P.plte.length;p++)I.push(P.plte[p].est.rgba)}else for(u=0;u<b.length;u++){var G=b[u],M=new Uint32Array(G.img.buffer),S=G.rect.width,x=(U=M.length,new Uint8Array(U));for(A.push(x),p=0;p<U;p++){var E=M[p];if(p!=0&&E==M[p-1])x[p]=x[p-1];else if(p>S&&E==M[p-S])x[p]=x[p-S];else{var O=v[E];if(O==null&&(v[E]=O=I.length,I.push(E),I.length>=300))break;x[p]=O}}}var B=I.length;for(B<=256&&c==0&&(h=B<=2?1:B<=4?2:B<=16?4:8,h=Math.max(h,l)),u=0;u<b.length;u++){(G=b[u]).rect.x,G.rect.y,S=G.rect.width;var Z=G.rect.height,T=G.img;new Uint32Array(T.buffer);var D=4*S,k=4;if(B<=256&&c==0){D=Math.ceil(h*S/8);for(var V=new Uint8Array(D*Z),L=A[u],q=0;q<Z;q++){p=q*D;var j=q*S;if(h==8)for(var z=0;z<S;z++)V[p+z]=L[j+z];else if(h==4)for(z=0;z<S;z++)V[p+(z>>1)]|=L[j+z]<<4-4*(1&z);else if(h==2)for(z=0;z<S;z++)V[p+(z>>2)]|=L[j+z]<<6-2*(3&z);else if(h==1)for(z=0;z<S;z++)V[p+(z>>3)]|=L[j+z]<<7-1*(7&z)}T=V,m=3,k=1}else if(C==0&&b.length==1){V=new Uint8Array(S*Z*3);var J=S*Z;for(p=0;p<J;p++){var Q,$=4*p;V[Q=3*p]=T[$],V[Q+1]=T[$+1],V[Q+2]=T[$+2]}T=V,m=2,k=3,D=3*S}G.img=T,G.bpl=D,G.bpp=k}return{ctype:m,depth:h,plte:I,frames:b}},UPNG.encode.framize=function(r,i,f,t,e,n){for(var s=[],a=0;a<r.length;a++){var l,c=new Uint8Array(r[a]),m=new Uint32Array(c.buffer),h=0,d=0,u=i,g=f,U=t?1:0;if(a!=0){for(var p=n||t||a==1||s[a-2].dispose!=0?1:2,C=0,b=1e9,v=0;v<p;v++){for(var I=new Uint8Array(r[a-1-v]),A=new Uint32Array(r[a-1-v]),w=i,_=f,P=-1,F=-1,y=0;y<f;y++)for(var R=0;R<i;R++)m[B=y*i+R]!=A[B]&&(R<w&&(w=R),R>P&&(P=R),y<_&&(_=y),y>F&&(F=y));P==-1&&(w=_=P=F=0),e&&((1&w)==1&&w--,(1&_)==1&&_--);var G=(P-w+1)*(F-_+1);G<b&&(b=G,C=v,h=w,d=_,u=P-w+1,g=F-_+1)}I=new Uint8Array(r[a-1-C]),C==1&&(s[a-1].dispose=2),l=new Uint8Array(u*g*4),UPNG._copyTile(I,i,f,l,u,g,-h,-d,0),(U=UPNG._copyTile(c,i,f,l,u,g,-h,-d,3)?1:0)==1?UPNG.encode._prepareDiff(c,i,f,l,{x:h,y:d,width:u,height:g}):UPNG._copyTile(c,i,f,l,u,g,-h,-d,0)}else l=c.slice(0);s.push({rect:{x:h,y:d,width:u,height:g},img:l,blend:U,dispose:0})}if(t){for(a=0;a<s.length;a++)if((Z=s[a]).blend!=1){var M=Z.rect,S=s[a-1].rect,x=Math.min(M.x,S.x),E=Math.min(M.y,S.y),O={x,y:E,width:Math.max(M.x+M.width,S.x+S.width)-x,height:Math.max(M.y+M.height,S.y+S.height)-E};s[a-1].dispose=1,a-1!=0&&UPNG.encode._updateFrame(r,i,f,s,a-1,O,e),UPNG.encode._updateFrame(r,i,f,s,a,O,e)}}if(r.length!=1)for(var B=0;B<s.length;B++){var Z;(Z=s[B]).rect.width*Z.rect.height}return s},UPNG.encode._updateFrame=function(r,i,f,t,e,n,s){for(var a=Uint8Array,l=Uint32Array,c=new a(r[e-1]),m=new l(r[e-1]),h=e+1<r.length?new a(r[e+1]):null,d=new a(r[e]),u=new l(d.buffer),g=i,U=f,p=-1,C=-1,b=0;b<n.height;b++)for(var v=0;v<n.width;v++){var I=n.x+v,A=n.y+b,w=A*i+I,_=u[w];_==0||t[e-1].dispose==0&&m[w]==_&&(h==null||h[4*w+3]!=0)||(I<g&&(g=I),I>p&&(p=I),A<U&&(U=A),A>C&&(C=A))}p==-1&&(g=U=p=C=0),s&&((1&g)==1&&g--,(1&U)==1&&U--),n={x:g,y:U,width:p-g+1,height:C-U+1};var P=t[e];P.rect=n,P.blend=1,P.img=new Uint8Array(n.width*n.height*4),t[e-1].dispose==0?(UPNG._copyTile(c,i,f,P.img,n.width,n.height,-n.x,-n.y,0),UPNG.encode._prepareDiff(d,i,f,P.img,n)):UPNG._copyTile(d,i,f,P.img,n.width,n.height,-n.x,-n.y,0)},UPNG.encode._prepareDiff=function(r,i,f,t,e){UPNG._copyTile(r,i,f,t,e.width,e.height,-e.x,-e.y,2)},UPNG.encode._filterZero=function(r,i,f,t,e,n,s){var a,l=[],c=[0,1,2,3,4];n!=-1?c=[n]:(i*t>5e5||f==1)&&(c=[0]),s&&(a={level:0});for(var m,h=UZIP,d=0;d<c.length;d++){for(var u=0;u<i;u++)UPNG.encode._filterLine(e,r,u,t,f,c[d]);l.push(h.deflate(e,a))}var g=1e9;for(d=0;d<l.length;d++)l[d].length<g&&(m=d,g=l[d].length);return l[m]},UPNG.encode._filterLine=function(r,i,f,t,e,n){var s=f*t,a=s+f,l=UPNG.decode._paeth;if(r[a]=n,a++,n==0)if(t<500)for(var c=0;c<t;c++)r[a+c]=i[s+c];else r.set(new Uint8Array(i.buffer,s,t),a);else if(n==1){for(c=0;c<e;c++)r[a+c]=i[s+c];for(c=e;c<t;c++)r[a+c]=i[s+c]-i[s+c-e]+256&255}else if(f==0){for(c=0;c<e;c++)r[a+c]=i[s+c];if(n==2)for(c=e;c<t;c++)r[a+c]=i[s+c];if(n==3)for(c=e;c<t;c++)r[a+c]=i[s+c]-(i[s+c-e]>>1)+256&255;if(n==4)for(c=e;c<t;c++)r[a+c]=i[s+c]-l(i[s+c-e],0,0)+256&255}else{if(n==2)for(c=0;c<t;c++)r[a+c]=i[s+c]+256-i[s+c-t]&255;if(n==3){for(c=0;c<e;c++)r[a+c]=i[s+c]+256-(i[s+c-t]>>1)&255;for(c=e;c<t;c++)r[a+c]=i[s+c]+256-(i[s+c-t]+i[s+c-e]>>1)&255}if(n==4){for(c=0;c<e;c++)r[a+c]=i[s+c]+256-l(0,i[s+c-t],0)&255;for(c=e;c<t;c++)r[a+c]=i[s+c]+256-l(i[s+c-e],i[s+c-t],i[s+c-e-t])&255}}},UPNG.crc={table:function(){for(var r=new Uint32Array(256),i=0;i<256;i++){for(var f=i,t=0;t<8;t++)1&f?f=3988292384^f>>>1:f>>>=1;r[i]=f}return r}(),update:function(i,f,t,e){for(var n=0;n<e;n++)i=UPNG.crc.table[255&(i^f[t+n])]^i>>>8;return i},crc:function(i,f,t){return 4294967295^UPNG.crc.update(4294967295,i,f,t)}},UPNG.quantize=function(r,i){var f,t=new Uint8Array(r),e=t.slice(0),n=new Uint32Array(e.buffer),s=UPNG.quantize.getKDtree(e,i),a=s[0],l=s[1],c=UPNG.quantize.planeDst,m=t,h=n,d=m.length,u=new Uint8Array(t.length>>2);if(t.length<2e7)for(var g=0;g<d;g+=4){var U=m[g]*.00392156862745098,p=m[g+1]*(1/255),C=m[g+2]*(1/255),b=m[g+3]*(1/255);f=UPNG.quantize.getNearest(a,U,p,C,b),u[g>>2]=f.ind,h[g>>2]=f.est.rgba}else for(g=0;g<d;g+=4){for(U=m[g]*(1/255),p=m[g+1]*(1/255),C=m[g+2]*(1/255),b=m[g+3]*(1/255),f=a;f.left;)f=c(f.est,U,p,C,b)<=0?f.left:f.right;u[g>>2]=f.ind,h[g>>2]=f.est.rgba}return{abuf:e.buffer,inds:u,plte:l}},UPNG.quantize.getKDtree=function(r,i,f){f==null&&(f=1e-4);var t=new Uint32Array(r.buffer),e={i0:0,i1:r.length,bst:null,est:null,tdst:0,left:null,right:null};e.bst=UPNG.quantize.stats(r,e.i0,e.i1),e.est=UPNG.quantize.estats(e.bst);for(var n=[e];n.length<i;){for(var s=0,a=0,l=0;l<n.length;l++)n[l].est.L>s&&(s=n[l].est.L,a=l);if(s<f)break;var c=n[a],m=UPNG.quantize.splitPixels(r,t,c.i0,c.i1,c.est.e,c.est.eMq255);if(c.i0>=m||c.i1<=m)c.est.L=0;else{var h={i0:c.i0,i1:m,bst:null,est:null,tdst:0,left:null,right:null};h.bst=UPNG.quantize.stats(r,h.i0,h.i1),h.est=UPNG.quantize.estats(h.bst);var d={i0:m,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};for(d.bst={R:[],m:[],N:c.bst.N-h.bst.N},l=0;l<16;l++)d.bst.R[l]=c.bst.R[l]-h.bst.R[l];for(l=0;l<4;l++)d.bst.m[l]=c.bst.m[l]-h.bst.m[l];d.est=UPNG.quantize.estats(d.bst),c.left=h,c.right=d,n[a]=h,n.push(d)}}for(n.sort(function(u,g){return g.bst.N-u.bst.N}),l=0;l<n.length;l++)n[l].ind=l;return[e,n]},UPNG.quantize.getNearest=function(r,i,f,t,e){if(r.left==null)return r.tdst=UPNG.quantize.dist(r.est.q,i,f,t,e),r;var n=UPNG.quantize.planeDst(r.est,i,f,t,e),s=r.left,a=r.right;n>0&&(s=r.right,a=r.left);var l=UPNG.quantize.getNearest(s,i,f,t,e);if(l.tdst<=n*n)return l;var c=UPNG.quantize.getNearest(a,i,f,t,e);return c.tdst<l.tdst?c:l},UPNG.quantize.planeDst=function(r,i,f,t,e){var n=r.e;return n[0]*i+n[1]*f+n[2]*t+n[3]*e-r.eMq},UPNG.quantize.dist=function(r,i,f,t,e){var n=i-r[0],s=f-r[1],a=t-r[2],l=e-r[3];return n*n+s*s+a*a+l*l},UPNG.quantize.splitPixels=function(r,i,f,t,e,n){var s=UPNG.quantize.vecDot;for(t-=4;f<t;){for(;s(r,f,e)<=n;)f+=4;for(;s(r,t,e)>n;)t-=4;if(f>=t)break;var a=i[f>>2];i[f>>2]=i[t>>2],i[t>>2]=a,f+=4,t-=4}for(;s(r,f,e)>n;)f-=4;return f+4},UPNG.quantize.vecDot=function(r,i,f){return r[i]*f[0]+r[i+1]*f[1]+r[i+2]*f[2]+r[i+3]*f[3]},UPNG.quantize.stats=function(r,i,f){for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=[0,0,0,0],n=f-i>>2,s=i;s<f;s+=4){var a=r[s]*.00392156862745098,l=r[s+1]*(1/255),c=r[s+2]*(1/255),m=r[s+3]*(1/255);e[0]+=a,e[1]+=l,e[2]+=c,e[3]+=m,t[0]+=a*a,t[1]+=a*l,t[2]+=a*c,t[3]+=a*m,t[5]+=l*l,t[6]+=l*c,t[7]+=l*m,t[10]+=c*c,t[11]+=c*m,t[15]+=m*m}return t[4]=t[1],t[8]=t[2],t[9]=t[6],t[12]=t[3],t[13]=t[7],t[14]=t[11],{R:t,m:e,N:n}},UPNG.quantize.estats=function(r){var i=r.R,f=r.m,t=r.N,e=f[0],n=f[1],s=f[2],a=f[3],l=t==0?0:1/t,c=[i[0]-e*e*l,i[1]-e*n*l,i[2]-e*s*l,i[3]-e*a*l,i[4]-n*e*l,i[5]-n*n*l,i[6]-n*s*l,i[7]-n*a*l,i[8]-s*e*l,i[9]-s*n*l,i[10]-s*s*l,i[11]-s*a*l,i[12]-a*e*l,i[13]-a*n*l,i[14]-a*s*l,i[15]-a*a*l],m=c,h=UPNG.M4,d=[Math.random(),Math.random(),Math.random(),Math.random()],u=0,g=0;if(t!=0)for(var U=0;U<16&&(d=h.multVec(m,d),g=Math.sqrt(h.dot(d,d)),d=h.sml(1/g,d),!(U!=0&&Math.abs(g-u)<1e-9));U++)u=g;var p=[e*l,n*l,s*l,a*l];return{Cov:c,q:p,e:d,L:u,eMq255:h.dot(h.sml(255,p),d),eMq:h.dot(d,p),rgba:(Math.round(255*p[3])<<24|Math.round(255*p[2])<<16|Math.round(255*p[1])<<8|Math.round(255*p[0])<<0)>>>0}},UPNG.M4={multVec:function(i,f){return[i[0]*f[0]+i[1]*f[1]+i[2]*f[2]+i[3]*f[3],i[4]*f[0]+i[5]*f[1]+i[6]*f[2]+i[7]*f[3],i[8]*f[0]+i[9]*f[1]+i[10]*f[2]+i[11]*f[3],i[12]*f[0]+i[13]*f[1]+i[14]*f[2]+i[15]*f[3]]},dot:function(i,f){return i[0]*f[0]+i[1]*f[1]+i[2]*f[2]+i[3]*f[3]},sml:function(i,f){return[i*f[0],i*f[1],i*f[2],i*f[3]]}},UPNG.encode.concatRGBA=function(r){for(var i=0,f=0;f<r.length;f++)i+=r[f].byteLength;var t=new Uint8Array(i),e=0;for(f=0;f<r.length;f++){for(var n=new Uint8Array(r[f]),s=n.length,a=0;a<s;a+=4){var l=n[a],c=n[a+1],m=n[a+2],h=n[a+3];h==0&&(l=c=m=0),t[e+a]=l,t[e+a+1]=c,t[e+a+2]=m,t[e+a+3]=h}e+=s}return t.buffer};var BROWSER_NAME={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",MOBILE_SAFARI:"MOBILE_SAFARI",ETC:"ETC"},_BROWSER_NAME$CHROME$,MAX_CANVAS_SIZE=(_BROWSER_NAME$CHROME$={},_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.CHROME,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.FIREFOX,11180),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.DESKTOP_SAFARI,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.IE,8192),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.MOBILE_SAFARI,4096),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.ETC,8192),_BROWSER_NAME$CHROME$),isBrowser=typeof window<"u",moduleMapper=isBrowser&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),CustomFile=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"File")||window.File!==void 0&&File),CustomFileReader=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"FileReader")||window.FileReader!==void 0&&FileReader);function getFilefromDataUrl(r,i){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Date.now();return new Promise(function(t){for(var e=r.split(","),n=e[0].match(/:(.*?);/)[1],s=globalThis.atob(e[1]),a=s.length,l=new Uint8Array(a);a--;)l[a]=s.charCodeAt(a);var c=new Blob([l],{type:n});c.name=i,c.lastModified=f,t(c)})}function getDataUrlFromFile(r){return new Promise(function(i,f){var t=new CustomFileReader;t.onload=function(){return i(t.result)},t.onerror=function(e){return f(e)},t.readAsDataURL(r)})}function loadImage(r){return new Promise(function(i,f){var t=new Image;t.onload=function(){return i(t)},t.onerror=function(e){return f(e)},t.src=r})}function getBrowserName(){if(getBrowserName.cachedResult!==void 0)return getBrowserName.cachedResult;var r=BROWSER_NAME.ETC,i=navigator.userAgent;return/Chrom(e|ium)/i.test(i)?r=BROWSER_NAME.CHROME:/iP(ad|od|hone)/i.test(i)&&/WebKit/i.test(i)&&!/(CriOS|FxiOS|OPiOS|mercury)/i.test(i)?r=BROWSER_NAME.MOBILE_SAFARI:/Safari/i.test(i)?r=BROWSER_NAME.DESKTOP_SAFARI:/Firefox/i.test(i)?r=BROWSER_NAME.FIREFOX:(/MSIE/i.test(i)||!!document.documentMode)&&(r=BROWSER_NAME.IE),getBrowserName.cachedResult=r,getBrowserName.cachedResult}function approximateBelowMaximumCanvasSizeOfBrowser(r,i){for(var f=getBrowserName(),t=MAX_CANVAS_SIZE[f],e=r,n=i,s=e*n,a=e>n?n/e:e/n;s>t*t;){var l=(t+e)/2,c=(t+n)/2;l<c?(n=c,e=c*a):(n=l*a,e=l),s=e*n}return{width:e,height:n}}function getNewCanvasAndCtx(r,i){var f,t;try{if((t=(f=new OffscreenCanvas(r,i)).getContext("2d"))===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=(f=document.createElement("canvas")).getContext("2d")}return f.width=r,f.height=i,[f,t]}function drawImageInCanvas(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,f=approximateBelowMaximumCanvasSizeOfBrowser(r.width,r.height),t=f.width,e=f.height,n=getNewCanvasAndCtx(t,e),s=_slicedToArray(n,2),a=s[0],l=s[1];return i&&/jpe?g/.test(i)&&(l.fillStyle="white",l.fillRect(0,0,a.width,a.height)),l.drawImage(r,0,0,a.width,a.height),a}function isIOS(){return isIOS.cachedResult!==void 0||(isIOS.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),isIOS.cachedResult}function drawFileInCanvas(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(f,t){var e,n,s=function(){try{return n=drawImageInCanvas(e,i.fileType||r.type),f([e,n])}catch(c){return t(c)}},a=function(c){try{var m=function(d){try{throw d}catch(u){return t(u)}};try{return getDataUrlFromFile(r).then(function(h){try{return loadImage(h).then(function(d){try{return e=d,function(){try{return s()}catch(g){return t(g)}}()}catch(u){return m(u)}},m)}catch(d){return m(d)}},m)}catch(h){m(h)}}catch(h){return t(h)}};try{if(isIOS()||[BROWSER_NAME.DESKTOP_SAFARI,BROWSER_NAME.MOBILE_SAFARI].includes(getBrowserName()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then(function(l){try{return e=l,s()}catch{return a()}},a)}catch{a()}})}function canvasToFile(r,i,f,t){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;return new Promise(function(n,s){var a,l,c;if(i==="image/png")return l=r.getContext("2d").getImageData(0,0,r.width,r.height).data,c=UPNG.encode([l],r.width,r.height,256*e),(a=new Blob([c],{type:i})).name=f,a.lastModified=t,m.call(this);{let h=function(){return m.call(this)};return typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas?r.convertToBlob({type:i,quality:e}).then(function(d){try{return(a=d).name=f,a.lastModified=t,h.call(this)}catch(u){return s(u)}}.bind(this),s):getFilefromDataUrl(r.toDataURL(i,e),f,t).then(function(d){try{return a=d,h.call(this)}catch(u){return s(u)}}.bind(this),s)}function m(){return n(a)}})}function cleanupCanvasMemory(r){r.width=0,r.height=0}function isAutoOrientationInBrowser(){return new Promise(function(r,i){var f,t,e,n;return isAutoOrientationInBrowser.cachedResult!==void 0?r(isAutoOrientationInBrowser.cachedResult):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return drawFileInCanvas(f=s).then(function(a){try{return canvasToFile(t=a[1],f.type,f.name,f.lastModified).then(function(l){try{return e=l,cleanupCanvasMemory(t),drawFileInCanvas(e).then(function(c){try{return n=c[0],isAutoOrientationInBrowser.cachedResult=n.width===1&&n.height===2,r(isAutoOrientationInBrowser.cachedResult)}catch(m){return i(m)}},i)}catch(c){return i(c)}},i)}catch(l){return i(l)}},i)}catch(a){return i(a)}},i)})}function getExifOrientation(r){return new Promise(function(i,f){var t=new CustomFileReader;t.onload=function(e){var n=new DataView(e.target.result);if(n.getUint16(0,!1)!=65496)return i(-2);for(var s=n.byteLength,a=2;a<s;){if(n.getUint16(a+2,!1)<=8)return i(-1);var l=n.getUint16(a,!1);if(a+=2,l==65505){if(n.getUint32(a+=2,!1)!=1165519206)return i(-1);var c=n.getUint16(a+=6,!1)==18761;a+=n.getUint32(a+4,c);var m=n.getUint16(a,c);a+=2;for(var h=0;h<m;h++)if(n.getUint16(a+12*h,c)==274)return i(n.getUint16(a+12*h+8,c))}else{if((65280&l)!=65280)break;a+=n.getUint16(a,!1)}}return i(-1)},t.onerror=function(e){return f(e)},t.readAsArrayBuffer(r)})}function handleMaxWidthOrHeight(r,i){var f,t=r.width,e=r.height,n=i.maxWidthOrHeight,s=r;if(isFinite(n)&&(t>n||e>n)){var a=_slicedToArray(getNewCanvasAndCtx(t,e),2);s=a[0],f=a[1],t>e?(s.width=n,s.height=e/t*n):(s.width=t/e*n,s.height=n),f.drawImage(r,0,0,s.width,s.height),cleanupCanvasMemory(r)}return s}function followExifOrientation(r,i){var f=r.width,t=r.height,e=_slicedToArray(getNewCanvasAndCtx(f,t),2),n=e[0],s=e[1];switch(i>4&&i<9?(n.width=t,n.height=f):(n.width=f,n.height=t),i){case 2:s.transform(-1,0,0,1,f,0);break;case 3:s.transform(-1,0,0,-1,f,t);break;case 4:s.transform(1,0,0,-1,0,t);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,t,0);break;case 7:s.transform(0,-1,-1,0,t,f);break;case 8:s.transform(0,-1,1,0,0,f)}return s.drawImage(r,0,0,f,t),cleanupCanvasMemory(r),n}function compress(r,i){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return new Promise(function(t,e){var n,s,a,l,c,m,h,d,u,g,U,p,C,b,v,I,A,w,_;function P(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;if(i.signal&&i.signal.aborted)throw i.signal.reason;n+=y,i.onProgress(Math.min(n,100))}function F(y){if(i.signal&&i.signal.aborted)throw i.signal.reason;n=Math.min(Math.max(y,n),100),i.onProgress(n)}return n=f,s=i.maxIteration||10,a=1024*i.maxSizeMB*1024,P(),drawFileInCanvas(r,i).then(function(y){try{var R=_slicedToArray(y,2);return l=R[1],P(),c=handleMaxWidthOrHeight(l,i),P(),new Promise(function(G,M){var S;if(!(S=i.exifOrientation))return getExifOrientation(r).then(function(E){try{return S=E,x.call(this)}catch(O){return M(O)}}.bind(this),M);function x(){return G(S)}return x.call(this)}).then(function(G){try{return m=G,P(),isAutoOrientationInBrowser().then(function(M){try{return h=M?c:followExifOrientation(c,m),P(),d=i.initialQuality||1,u=i.fileType||r.type,canvasToFile(h,u,r.name,r.lastModified,d).then(function(S){try{{let E=function(){if(s--&&(v>a||v>C)){var B,Z,T=_slicedToArray(getNewCanvasAndCtx(B=_?.95*w.width:w.width,Z=_?.95*w.height:w.height),2);return A=T[0],T[1].drawImage(w,0,0,B,Z),d*=.95,canvasToFile(A,u,r.name,r.lastModified,d).then(function(D){try{return I=D,cleanupCanvasMemory(w),w=A,v=I.size,F(Math.min(99,Math.floor((b-v)/(b-a)*100))),E}catch(k){return e(k)}},e)}return[1]},O=function(){return cleanupCanvasMemory(w),cleanupCanvasMemory(A),cleanupCanvasMemory(c),cleanupCanvasMemory(h),cleanupCanvasMemory(l),F(100),t(I)};if(g=S,P(),U=g.size>a,p=g.size>r.size,!U&&!p)return F(100),t(g);var x;return C=r.size,b=g.size,v=b,w=h,_=!i.alwaysKeepResolution&&U,(x=function(B){for(;B;){if(B.then)return void B.then(x,e);try{if(B.pop){if(B.length)return B.pop()?O.call(this):B;B=E}else B=B.call(this)}catch(Z){return e(Z)}}}.bind(this))(E)}}catch(E){return e(E)}}.bind(this),e)}catch(S){return e(S)}}.bind(this),e)}catch(M){return e(M)}}.bind(this),e)}catch(G){return e(G)}}.bind(this),e)})}var cnt=0,imageCompressionLibUrl,worker;function createWorker(r){var i=[];return typeof r=="function"?i.push("(".concat(r,")()")):i.push(r),new Worker(URL.createObjectURL(new Blob(i)))}function createSourceObject(r){return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}function stringify(r){return JSON.stringify(r,function(i,f){return typeof f=="function"?"BIC_FN:::(function () { return ".concat(f.toString()," })()"):f})}function parse(o){if(typeof o=="string")return o;var result={};return Object.entries(o).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(typeof value=="string"&&value.startsWith("BIC_FN:::"))try{result[key]=eval(value.replace(/^BIC_FN:::/,""))}catch(r){throw r}else result[key]=parse(value)}),result}function generateLib(){return createSourceObject(`
    // reconstruct library
    function imageCompression (){return (`.concat(imageCompression,`).apply(null, arguments)}

    imageCompression.getDataUrlFromFile = `).concat(imageCompression.getDataUrlFromFile,`
    imageCompression.getFilefromDataUrl = `).concat(imageCompression.getFilefromDataUrl,`
    imageCompression.loadImage = `).concat(imageCompression.loadImage,`
    imageCompression.drawImageInCanvas = `).concat(imageCompression.drawImageInCanvas,`
    imageCompression.drawFileInCanvas = `).concat(imageCompression.drawFileInCanvas,`
    imageCompression.canvasToFile = `).concat(imageCompression.canvasToFile,`
    imageCompression.getExifOrientation = `).concat(imageCompression.getExifOrientation,`
    imageCompression.handleMaxWidthOrHeight = `).concat(imageCompression.handleMaxWidthOrHeight,`
    imageCompression.followExifOrientation = `).concat(imageCompression.followExifOrientation,`
    imageCompression.cleanupCanvasMemory = `).concat(imageCompression.cleanupCanvasMemory,`
    imageCompression.isAutoOrientationInBrowser = `).concat(imageCompression.isAutoOrientationInBrowser,`
    imageCompression.approximateBelowMaximumCanvasSizeOfBrowser = `).concat(imageCompression.approximateBelowMaximumCanvasSizeOfBrowser,`
    imageCompression.getBrowserName = `).concat(imageCompression.getBrowserName,`

    // functions / objects
    getDataUrlFromFile = imageCompression.getDataUrlFromFile
    getFilefromDataUrl = imageCompression.getFilefromDataUrl
    loadImage = imageCompression.loadImage
    drawImageInCanvas = imageCompression.drawImageInCanvas
    drawFileInCanvas = imageCompression.drawFileInCanvas
    canvasToFile = imageCompression.canvasToFile
    getExifOrientation = imageCompression.getExifOrientation
    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight
    followExifOrientation = imageCompression.followExifOrientation
    cleanupCanvasMemory = imageCompression.cleanupCanvasMemory
    isAutoOrientationInBrowser = imageCompression.isAutoOrientationInBrowser
    approximateBelowMaximumCanvasSizeOfBrowser = imageCompression.approximateBelowMaximumCanvasSizeOfBrowser
    getBrowserName = imageCompression.getBrowserName
    isIOS = `).concat(isIOS,`
    
    getNewCanvasAndCtx = `).concat(getNewCanvasAndCtx,`
    CustomFileReader = FileReader
    CustomFile = File
    MAX_CANVAS_SIZE = `).concat(JSON.stringify(MAX_CANVAS_SIZE),`
    BROWSER_NAME = `).concat(JSON.stringify(BROWSER_NAME),`
    function compress (){return (`).concat(compress,`).apply(null, arguments)}

    // core-js
    function _slicedToArray(arr, n) { return arr }
    function _typeof(a) { return typeof a }
    function _objectSpread2(target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i] != null ? arguments[i] : {};
  
        Object.assign(target, source)
      }
  
      return target;
    }

    // Libraries
    const parse = `).concat(parse,`
    const UPNG = {}
    UPNG.toRGBA8 = `).concat(UPNG.toRGBA8,`
    UPNG.toRGBA8.decodeImage = `).concat(UPNG.toRGBA8.decodeImage,`
    UPNG.decode = `).concat(UPNG.decode,`
    UPNG.decode._decompress = `).concat(UPNG.decode._decompress,`
    UPNG.decode._inflate = `).concat(UPNG.decode._inflate,`
    UPNG.decode._readInterlace = `).concat(UPNG.decode._readInterlace,`
    UPNG.decode._getBPP = `).concat(UPNG.decode._getBPP,` 
    UPNG.decode._filterZero = `).concat(UPNG.decode._filterZero,`
    UPNG.decode._paeth = `).concat(UPNG.decode._paeth,`
    UPNG.decode._IHDR = `).concat(UPNG.decode._IHDR,`
    UPNG._bin = parse(`).concat(stringify(UPNG._bin),`)
    UPNG._copyTile = `).concat(UPNG._copyTile,`
    UPNG.encode = `).concat(UPNG.encode,`
    UPNG.encodeLL = `).concat(UPNG.encodeLL,` 
    UPNG.encode._main = `).concat(UPNG.encode._main,`
    UPNG.encode.compressPNG = `).concat(UPNG.encode.compressPNG,` 
    UPNG.encode.compress = `).concat(UPNG.encode.compress,`
    UPNG.encode.framize = `).concat(UPNG.encode.framize,` 
    UPNG.encode._updateFrame = `).concat(UPNG.encode._updateFrame,` 
    UPNG.encode._prepareDiff = `).concat(UPNG.encode._prepareDiff,` 
    UPNG.encode._filterZero = `).concat(UPNG.encode._filterZero,` 
    UPNG.encode._filterLine = `).concat(UPNG.encode._filterLine,`
    UPNG.encode.concatRGBA = `).concat(UPNG.encode.concatRGBA,`
    UPNG.crc = parse(`).concat(stringify(UPNG.crc),`)
    UPNG.crc.table = ( function() {
    var tab = new Uint32Array(256);
    for (var n=0; n<256; n++) {
      var c = n;
      for (var k=0; k<8; k++) {
        if (c & 1)  c = 0xedb88320 ^ (c >>> 1);
        else        c = c >>> 1;
      }
      tab[n] = c;  }
    return tab;  })()
    UPNG.quantize = `).concat(UPNG.quantize,` 
    UPNG.quantize.getKDtree = `).concat(UPNG.quantize.getKDtree,` 
    UPNG.quantize.getNearest = `).concat(UPNG.quantize.getNearest,` 
    UPNG.quantize.planeDst = `).concat(UPNG.quantize.planeDst,` 
    UPNG.quantize.dist = `).concat(UPNG.quantize.dist,`     
    UPNG.quantize.splitPixels = `).concat(UPNG.quantize.splitPixels,` 
    UPNG.quantize.vecDot = `).concat(UPNG.quantize.vecDot,` 
    UPNG.quantize.stats = `).concat(UPNG.quantize.stats,` 
    UPNG.quantize.estats = `).concat(UPNG.quantize.estats,`
    UPNG.M4 = parse(`).concat(stringify(UPNG.M4),`)
    UPNG.encode.concatRGBA = `).concat(UPNG.encode.concatRGBA,`
    UPNG.inflateRaw=function(){
    var H={};H.H={};H.H.N=function(N,W){var R=Uint8Array,i=0,m=0,J=0,h=0,Q=0,X=0,u=0,w=0,d=0,v,C;
      if(N[0]==3&&N[1]==0)return W?W:new R(0);var V=H.H,n=V.b,A=V.e,l=V.R,M=V.n,I=V.A,e=V.Z,b=V.m,Z=W==null;
      if(Z)W=new R(N.length>>>2<<5);while(i==0){i=n(N,d,1);m=n(N,d+1,2);d+=3;if(m==0){if((d&7)!=0)d+=8-(d&7);
        var D=(d>>>3)+4,q=N[D-4]|N[D-3]<<8;if(Z)W=H.H.W(W,w+q);W.set(new R(N.buffer,N.byteOffset+D,q),w);d=D+q<<3;
        w+=q;continue}if(Z)W=H.H.W(W,w+(1<<17));if(m==1){v=b.J;C=b.h;X=(1<<9)-1;u=(1<<5)-1}if(m==2){J=A(N,d,5)+257;
        h=A(N,d+5,5)+1;Q=A(N,d+10,4)+4;d+=14;var E=d,j=1;for(var c=0;c<38;c+=2){b.Q[c]=0;b.Q[c+1]=0}for(var c=0;
                                                                                                        c<Q;c++){var K=A(N,d+c*3,3);b.Q[(b.X[c]<<1)+1]=K;if(K>j)j=K}d+=3*Q;M(b.Q,j);I(b.Q,j,b.u);v=b.w;C=b.d;
        d=l(b.u,(1<<j)-1,J+h,N,d,b.v);var r=V.V(b.v,0,J,b.C);X=(1<<r)-1;var S=V.V(b.v,J,h,b.D);u=(1<<S)-1;M(b.C,r);
        I(b.C,r,v);M(b.D,S);I(b.D,S,C)}while(!0){var T=v[e(N,d)&X];d+=T&15;var p=T>>>4;if(p>>>8==0){W[w++]=p}else if(p==256){break}else{var z=w+p-254;
        if(p>264){var _=b.q[p-257];z=w+(_>>>3)+A(N,d,_&7);d+=_&7}var $=C[e(N,d)&u];d+=$&15;var s=$>>>4,Y=b.c[s],a=(Y>>>4)+n(N,d,Y&15);
        d+=Y&15;while(w<z){W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a]}w=z}}}return W.length==w?W:W.slice(0,w)};
      H.H.W=function(N,W){var R=N.length;if(W<=R)return N;var V=new Uint8Array(R<<1);V.set(N,0);return V};
      H.H.R=function(N,W,R,V,n,A){var l=H.H.e,M=H.H.Z,I=0;while(I<R){var e=N[M(V,n)&W];n+=e&15;var b=e>>>4;
        if(b<=15){A[I]=b;I++}else{var Z=0,m=0;if(b==16){m=3+l(V,n,2);n+=2;Z=A[I-1]}else if(b==17){m=3+l(V,n,3);
          n+=3}else if(b==18){m=11+l(V,n,7);n+=7}var J=I+m;while(I<J){A[I]=Z;I++}}}return n};H.H.V=function(N,W,R,V){var n=0,A=0,l=V.length>>>1;
        while(A<R){var M=N[A+W];V[A<<1]=0;V[(A<<1)+1]=M;if(M>n)n=M;A++}while(A<l){V[A<<1]=0;V[(A<<1)+1]=0;A++}return n};
      H.H.n=function(N,W){var R=H.H.m,V=N.length,n,A,l,M,I,e=R.j;for(var M=0;M<=W;M++)e[M]=0;for(M=1;M<V;M+=2)e[N[M]]++;
        var b=R.K;n=0;e[0]=0;for(A=1;A<=W;A++){n=n+e[A-1]<<1;b[A]=n}for(l=0;l<V;l+=2){I=N[l+1];if(I!=0){N[l]=b[I];
          b[I]++}}};H.H.A=function(N,W,R){var V=N.length,n=H.H.m,A=n.r;for(var l=0;l<V;l+=2)if(N[l+1]!=0){var M=l>>1,I=N[l+1],e=M<<4|I,b=W-I,Z=N[l]<<b,m=Z+(1<<b);
        while(Z!=m){var J=A[Z]>>>15-W;R[J]=e;Z++}}};H.H.l=function(N,W){var R=H.H.m.r,V=15-W;for(var n=0;n<N.length;
                                                                                                 n+=2){var A=N[n]<<W-N[n+1];N[n]=R[A]>>>V}};H.H.M=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8};
      H.H.I=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8;N[V+2]|=R>>>16};H.H.e=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8)>>>(W&7)&(1<<R)-1};
      H.H.b=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)&(1<<R)-1};H.H.Z=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)};
      H.H.i=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16|N[(W>>>3)+3]<<24)>>>(W&7)};H.H.m=function(){var N=Uint16Array,W=Uint32Array;
        return{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(1<<15),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(1<<16),g:new N(1<<15)}}();
      (function(){var N=H.H.m,W=1<<15;for(var R=0;R<W;R++){var V=R;V=(V&2863311530)>>>1|(V&1431655765)<<1;
        V=(V&3435973836)>>>2|(V&858993459)<<2;V=(V&4042322160)>>>4|(V&252645135)<<4;V=(V&4278255360)>>>8|(V&16711935)<<8;
        N.r[R]=(V>>>16|V<<16)>>>17}function n(A,l,M){while(l--!=0)A.push(0,M)}for(var R=0;R<32;R++){N.q[R]=N.S[R]<<3|N.T[R];
        N.c[R]=N.p[R]<<4|N.z[R]}n(N._,144,8);n(N._,255-143,9);n(N._,279-255,7);n(N._,287-279,8);H.H.n(N._,9);
        H.H.A(N._,9,N.J);H.H.l(N._,9);n(N.$,32,5);H.H.n(N.$,5);H.H.A(N.$,5,N.h);H.H.l(N.$,5);n(N.Q,19,0);n(N.C,286,0);
        n(N.D,30,0);n(N.v,320,0)}());return H.H.N}()
    
    const UZIP = {}
    UZIP["parse"] = `).concat(UZIP_1.parse,`
    UZIP._readLocal = `).concat(UZIP_1._readLocal,`
    UZIP.inflateRaw = `).concat(UZIP_1.inflateRaw,`
    UZIP.inflate = `).concat(UZIP_1.inflate,`
    UZIP.deflate = `).concat(UZIP_1.deflate,`
    UZIP.deflateRaw = `).concat(UZIP_1.deflateRaw,`
    UZIP.encode = `).concat(UZIP_1.encode,`
    UZIP._noNeed = `).concat(UZIP_1._noNeed,`
    UZIP._writeHeader = `).concat(UZIP_1._writeHeader,`
    UZIP.crc = parse(`).concat(stringify(UZIP_1.crc),`)
    UZIP.crc.table = ( function() {
      var tab = new Uint32Array(256);
      for (var n=0; n<256; n++) {
        var c = n;
        for (var k=0; k<8; k++) {
          if (c & 1)  c = 0xedb88320 ^ (c >>> 1);
          else        c = c >>> 1;
        }
        tab[n] = c;  }
      return tab;  })()
    
    UZIP.adler = `).concat(UZIP_1.adler,`
    UZIP.bin = parse(`).concat(stringify(UZIP_1.bin),`)
    UZIP.F = {}
    UZIP.F.deflateRaw = `).concat(UZIP_1.F.deflateRaw,`
    UZIP.F._bestMatch = `).concat(UZIP_1.F._bestMatch,`
    UZIP.F._howLong = `).concat(UZIP_1.F._howLong,`
    UZIP.F._hash = `).concat(UZIP_1.F._hash,`
    UZIP.saved = `).concat(UZIP_1.saved,`
    UZIP.F._writeBlock = `).concat(UZIP_1.F._writeBlock,`
    UZIP.F._copyExact = `).concat(UZIP_1.F._copyExact,`
    UZIP.F.getTrees = `).concat(UZIP_1.F.getTrees,`
    UZIP.F.getSecond = `).concat(UZIP_1.F.getSecond,`
    UZIP.F.nonZero = `).concat(UZIP_1.F.nonZero,`
    UZIP.F.contSize = `).concat(UZIP_1.F.contSize,`
    UZIP.F._codeTiny = `).concat(UZIP_1.F._codeTiny,` 
    UZIP.F._lenCodes = `).concat(UZIP_1.F._lenCodes,` 
    UZIP.F._hufTree = `).concat(UZIP_1.F._hufTree,` 
    UZIP.F.setDepth = `).concat(UZIP_1.F.setDepth,` 
    UZIP.F.restrictDepth = `).concat(UZIP_1.F.restrictDepth,`
    UZIP.F._goodIndex = `).concat(UZIP_1.F._goodIndex,` 
    UZIP.F._writeLit = `).concat(UZIP_1.F._writeLit,` 
    UZIP.F.inflate = `).concat(UZIP_1.F.inflate,` 
    UZIP.F._check = `).concat(UZIP_1.F._check,` 
    UZIP.F._decodeTiny = `).concat(UZIP_1.F._decodeTiny,` 
    UZIP.F._copyOut = `).concat(UZIP_1.F._copyOut,` 
    UZIP.F.makeCodes = `).concat(UZIP_1.F.makeCodes,` 
    UZIP.F.codes2map = `).concat(UZIP_1.F.codes2map,` 
    UZIP.F.revCodes = `).concat(UZIP_1.F.revCodes,` 

    // used only in deflate
    UZIP.F._putsE = `).concat(UZIP_1.F._putsE,`
    UZIP.F._putsF = `).concat(UZIP_1.F._putsF,`
  
    UZIP.F._bitsE = `).concat(UZIP_1.F._bitsE,`
    UZIP.F._bitsF = `).concat(UZIP_1.F._bitsF,`

    UZIP.F._get17 = `).concat(UZIP_1.F._get17,`
    UZIP.F._get25 = `).concat(UZIP_1.F._get25,`
    UZIP.F.U = function(){
      var u16=Uint16Array, u32=Uint32Array;
      return {
        next_code : new u16(16),
        bl_count  : new u16(16),
        ordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],
        of0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],
        exb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],
        ldef : new u16(32),
        df0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],
        dxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],
        ddef : new u32(32),
        flmap: new u16(  512),  fltree: [],
        fdmap: new u16(   32),  fdtree: [],
        lmap : new u16(32768),  ltree : [],  ttree:[],
        dmap : new u16(32768),  dtree : [],
        imap : new u16(  512),  itree : [],
        //rev9 : new u16(  512)
        rev15: new u16(1<<15),
        lhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),
        lits : new u32(15000),
        strt : new u16(1<<16),
        prev : new u16(1<<15)
      };
    } ();

    (function(){
      var U = UZIP.F.U;
      var len = 1<<15;
      for(var i=0; i<len; i++) {
        var x = i;
        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));
        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));
        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));
        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));
        U.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;
      }
  
      function pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }
  
      for(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }
  
      pushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);
      /*
        var i = 0;
        for(; i<=143; i++) U.fltree.push(0,8);
        for(; i<=255; i++) U.fltree.push(0,9);
        for(; i<=279; i++) U.fltree.push(0,7);
        for(; i<=287; i++) U.fltree.push(0,8);
        */
      UZIP.F.makeCodes(U.fltree, 9);
      UZIP.F.codes2map(U.fltree, 9, U.flmap);
      UZIP.F.revCodes (U.fltree, 9)
  
      pushV(U.fdtree,32,5);
      //for(i=0;i<32; i++) U.fdtree.push(0,5);
      UZIP.F.makeCodes(U.fdtree, 5);
      UZIP.F.codes2map(U.fdtree, 5, U.fdmap);
      UZIP.F.revCodes (U.fdtree, 5)
  
      pushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);
      /*
        for(var i=0; i< 19; i++) U.itree.push(0,0);
        for(var i=0; i<286; i++) U.ltree.push(0,0);
        for(var i=0; i< 30; i++) U.dtree.push(0,0);
        for(var i=0; i<320; i++) U.ttree.push(0,0);
        */
    })()
    `))}function generateWorkerScript(){return createWorker(`
    let scriptImported = false
    self.addEventListener('message', async (e) => {
      const { file, id, imageCompressionLibUrl, options } = e.data
      options.onProgress = (progress) => self.postMessage({ progress, id })
      try {
        if (!scriptImported) {
          // console.log('[worker] importScripts', imageCompressionLibUrl)
          self.importScripts(imageCompressionLibUrl)
          scriptImported = true
        }
        // console.log('[worker] self', self)
        const compressedFile = await imageCompression(file, options)
        self.postMessage({ file: compressedFile, id })
      } catch (e) {
        // console.error('[worker] error', e)
        self.postMessage({ error: e.message + '\\n' + e.stack, id })
      }
    })
  `)}function compressOnWebWorker(r,i){return new Promise(function(f,t){var e=cnt+=1;imageCompressionLibUrl||(imageCompressionLibUrl=generateLib()),worker||(worker=generateWorkerScript()),worker.addEventListener("message",function n(s){if(s.data.id===e){if(i.signal&&i.signal.aborted)return;if(s.data.progress!==void 0)return void i.onProgress(s.data.progress);worker.removeEventListener("message",n),s.data.error&&t(new Error(s.data.error)),f(s.data.file)}}),worker.addEventListener("error",t),i.signal&&i.signal.addEventListener("abort",function(){worker.terminate(),t(i.signal.reason)}),worker.postMessage({file:r,id:e,imageCompressionLibUrl,options:_objectSpread2(_objectSpread2({},i),{},{onProgress:void 0,signal:void 0})})})}function imageCompression(r,i){return new Promise(function(f,t){var e,n,s,a,l,c;if(e=_objectSpread2({},i),s=0,a=e.onProgress,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=function(u){s=u,typeof a=="function"&&a(s)},!(r instanceof Blob||r instanceof CustomFile))return t(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return t(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return compress(r,e).then(function(u){try{return n=u,d.call(this)}catch(g){return t(g)}}.bind(this),t);var m=function(){try{return d.call(this)}catch(u){return t(u)}}.bind(this),h=function(g){try{return compress(r,e).then(function(U){try{return n=U,m()}catch(p){return t(p)}},t)}catch(U){return t(U)}};try{return compressOnWebWorker(r,e).then(function(u){try{return n=u,m()}catch{return h()}},h)}catch{h()}function d(){try{n.name=r.name,n.lastModified=r.lastModified}catch{}return f(n)}})}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.approximateBelowMaximumCanvasSizeOfBrowser=approximateBelowMaximumCanvasSizeOfBrowser,imageCompression.getBrowserName=getBrowserName,imageCompression.version="2.0.0";const _hoisted_1={style:{"margin-top":"10px"}},_hoisted_2={style:{position:"relative","padding-right":"30px",width:"250px"}},_hoisted_3=createTextVNode("1"),_hoisted_4=createTextVNode("2"),_hoisted_5=createTextVNode("3"),_hoisted_6=createTextVNode("4"),_sfc_main=defineComponent({__name:"index",setup(r){const{t:i}=useI18n(),f=ref(),t=computed(()=>{var d;return(d=f.value)==null?void 0:d.fileList}),e=[],n=reactive({quality:1,originalSize:0,compressedSize:0}),s=ref(!1),a={1:1,2:.7,3:.4,4:.1},l=()=>{var g;if(!((g=t.value)!=null&&g.length)){n.originalSize=0,n.compressedSize=0;return}s.value=!0;let d=0,u=0;e.length=0,new Promise((U,p)=>{let C=0;for(const b of t.value){d+=b.size;let v={useWebWorker:!0,initialQuality:a[n.quality]};imageCompression(b,v).then(I=>{if(!I){message.error(i("image.imageError")),s.value=!1;return}C++,u+=I.size,e.push(I),C===t.value.length&&U()}).catch(function(I){})}}).then(()=>{n.originalSize=d,n.compressedSize=u,s.value=!1})},c=computed(()=>Math.floor((1-n.compressedSize/n.originalSize)*100)),m=()=>{if(!t.value.length){message.warn(i("image.imageChoose"));return}if(e.length===1){const d=URL.createObjectURL(e[0]);nodeAbility.handleDownload(d)}else{const d=new JSZip;for(const u of e)d.file(`${u.name}`,u);d.generateAsync({type:"blob"}).then(u=>{const g=URL.createObjectURL(u);nodeAbility.handleDownload(g)})}},h=()=>{f.value.clearImage(),n.originalSize=0,n.compressedSize=0};return(d,u)=>{const g=resolveComponent("a-radio"),U=resolveComponent("a-radio-group"),p=resolveComponent("a-button"),C=resolveComponent("a-space"),b=resolveComponent("a-spin");return openBlock(),createBlock(unref(Layout6),null,{one:withCtx(()=>[renderSlot(d.$slots,"default",{},()=>[createVNode(b,{spinning:s.value},{default:withCtx(()=>[createVNode(C,{direction:"vertical"},{default:withCtx(()=>[createVNode(unref(_sfc_main$1),{ref_key:"imageRef",ref:f,"pick-hook":l,"remove-hook":l},null,512),createBaseVNode("h2",_hoisted_1,toDisplayString(d.$t("imageCompressor.compressLevel")),1),createBaseVNode("div",_hoisted_2,[createVNode(U,{value:n.quality,"onUpdate:value":u[0]||(u[0]=v=>n.quality=v),disabled:s.value,onChange:l},{default:withCtx(()=>[createVNode(g,{value:1},{default:withCtx(()=>[_hoisted_3]),_:1}),createVNode(g,{value:2},{default:withCtx(()=>[_hoisted_4]),_:1}),createVNode(g,{value:3},{default:withCtx(()=>[_hoisted_5]),_:1}),createVNode(g,{value:4},{default:withCtx(()=>[_hoisted_6]),_:1})]),_:1},8,["value","disabled"])]),createTextVNode(" "+toDisplayString(d.$t("imageCompressor.original"))+" ",1),createBaseVNode("strong",null,toDisplayString(unref(fileCarry)(n.originalSize)),1),createTextVNode(" "+toDisplayString(d.$t("imageCompressor.compressed"))+" ",1),createBaseVNode("strong",null,toDisplayString(unref(fileCarry)(n.compressedSize))+toDisplayString(isNaN(unref(c))?"":`(-${unref(c)}%)`),1),createVNode(p,{type:"danger",disabled:s.value,onClick:h},{default:withCtx(()=>[createTextVNode(toDisplayString(d.$t("common.clear")),1)]),_:1},8,["disabled"]),createVNode(p,{type:"primary",disabled:s.value,onClick:m},{default:withCtx(()=>[createTextVNode(toDisplayString(d.$t("imageCompressor.exportImage")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["spinning"])])]),_:3})}}});export{_sfc_main as default};
