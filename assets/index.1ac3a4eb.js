import{d as V,r as o,D as z,J as A,a as w,b as n,g as T,o as p,c as s,c5 as J,H as g,e as S,l as t,U as v,x as c,bN as P,j as l,_ as R}from"./index.954a2cbc.js";import{H as y}from"./http.2276b1a3.js";import"./axios.ee048d55.js";const U={key:1,class:"mail-list"},F={class:"mail-list-header container"},G={class:"mail-list-header-from container-first"},K={class:"mail-list-header-subject container-second"},O={class:"mail-list-item container"},Q={class:"mail-list-item-from container-first"},W=["onClick"],X={class:"mail-list-item-subject container-second"},Y=["onClick"],Z={key:2,class:"detail"},ee={class:"detail-header container"},te=["innerHTML"],ae=V({__name:"index",setup(se){const f="/v1/temp-emails",d=o("list"),b=o(""),u=o("fetching"),k=o([]),_=o(!1),L=o(-1);z(()=>L.value,async e=>{if(!e||e<0)return;i.value={from:"",date:""},h.value=!0;const a=await B(e),r=new Date(a.date);i.value={from:a.from.text,subject:a.subject,date:r.toLocaleDateString()+" "+r.toLocaleTimeString(),html:a.html},h.value=!1});const i=o({}),h=o(!1);A(async()=>{try{u.value="fetching",b.value=await D(),u.value="success"}catch(e){u.value="error",console.error(e)}try{_.value=!0,k.value=await N(),_.value=!1}catch(e){_.value=!1,console.error(e)}});function x(){d.value="list"}function C(e){L.value=e,d.value="detail"}async function D(){const e=f+"/addresses",{address:a}=await y.get(e);return a}async function N(){const e=f+"/mails";return await y.get(e)}async function B(e){const a=f+"/contents/"+e;return await y.get(a)}return(e,a)=>{const r=l("a-alert"),E=l("a-typography-title"),H=l("a-list"),$=l("a-spin"),M=l("a-page-header"),j=l("a-typography"),q=l("a-card");return p(),w(T(P),{"max-width":800},{one:n(()=>[s(T(J),{"result-desc":e.$t("tempEmail.address"),result:b.value},null,8,["result-desc","result"]),u.value==="error"?(p(),w(r,{key:0,class:"address-error",message:e.$t("tempEmail.addressError"),type:"error"},null,8,["message"])):g("",!0),d.value==="list"?(p(),S("div",U,[t("div",F,[t("div",G,[s(E,{level:3},{default:n(()=>[v(c(e.$t("tempEmail.from")),1)]),_:1})]),t("div",K,[s(E,{level:3},{default:n(()=>[v(c(e.$t("tempEmail.subject")),1)]),_:1})])]),s($,{spinning:_.value},{default:n(()=>[s(H,{"item-layout":"horizontal","data-source":k.value},{renderItem:n(({item:m})=>[t("div",O,[t("div",Q,[t("a",{onClick:I=>C(m.seqno)},c(m.from),9,W)]),t("div",X,[t("a",{onClick:I=>C(m.segno)},c(m.subject),9,Y)])])]),_:1},8,["data-source"])]),_:1},8,["spinning"])])):g("",!0),d.value==="detail"?(p(),S("div",Z,[t("div",ee,[s(M,{title:e.$t("tempEmail.back"),onBack:x},null,8,["title"])]),s($,{spinning:h.value},{default:n(()=>[t("div",null,[s(q,{title:i.value.subject,bordered:!1},{default:n(()=>[s(j,null,{default:n(()=>[v(c(e.$t("tempEmail.date")+": "+i.value.date),1)]),_:1}),s(j,null,{default:n(()=>[v(c(e.$t("tempEmail.from")+": "+i.value.from),1)]),_:1})]),_:1},8,["title"])]),t("div",{innerHTML:i.value.html},null,8,te)]),_:1},8,["spinning"])])):g("",!0)]),_:1})}}});const ie=R(ae,[["__scopeId","data-v-51b459b0"]]);export{ie as default};
