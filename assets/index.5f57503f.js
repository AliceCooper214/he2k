import{d as _,cm as T,J as D,N as m,bj as g,r as u,as as N,a as x,b as l,g as t,o as y,c as n,cp as d,dE as S,H as w,cq as M,d1 as U,c4 as j,cr as q,ct as A,bN as B}from"./index.954a2cbc.js";import{i as R}from"./regs.08fe82e6.js";import{u as E}from"./index.56c1474b.js";const $=_({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean}},emits:["acceptClipboardCb"],setup(h,{emit:H}){const s=h,{t:P}=T();D(()=>{var e,a,o;(((e=s.clipboardValue)==null?void 0:e.isIPv4())||((a=s.clipboardValue)==null?void 0:a.isDomain())||((o=s.clipboardValue)==null?void 0:o.isUrl()))&&(r.value.userInput=f(s.clipboardValue.getOriginData()),H("acceptClipboardCb"))});function f(e){return e=e.trim(),m.isIP(e)==4||g(e)&&(e=E(e).hostname),e}const r=u({userInput:"",maxHop:15}),b=u({}),i=u(!1),C=function(){var e;(e=v.value)==null||e.validate().then(()=>{i.value=!0;const a={maxHops:r.value.maxHop},o=f(r.value.userInput);m.traceroute(o,a).then(p=>{b.value=p,I.value=p.hops}).catch(p=>{b.value=p}).finally(()=>{i.value=!1})})},v=u(),k=[{title:"Hops",dataIndex:"hop",key:"hop"},{title:"IP",dataIndex:"ip",key:"ip"},{title:"RTT",dataIndex:"rtt1",key:"rtt1"}],V={userInput:[{required:!0,validator:(e,a)=>a===""||m.isIP(a)!==4&&!g(a)&&!R(a)?Promise.reject():Promise.resolve(),whitespace:!0,message:P("traceroute.validInputError"),trigger:"blur"}]},I=u([]),c=N(()=>navigator.platform.toLowerCase().includes("linux"));return(e,a)=>(y(),x(t(B),null,{one:l(()=>[n(t(q),{ref_key:"formRef",ref:v,model:r.value,rules:V},{default:l(()=>[t(c)?(y(),x(t(d),{key:0},{default:l(()=>[n(t(S),{message:e.$t("traceroute.linuxWarningMessage"),type:"warning"},null,8,["message"])]),_:1})):w("",!0),n(t(d),{label:"Domain/IP",name:"userInput"},{default:l(()=>[n(t(M),{value:r.value.userInput,"onUpdate:value":a[0]||(a[0]=o=>r.value.userInput=o),loading:i.value,"enter-button":e.$t("common.query"),disabled:t(c),onSearch:C},null,8,["value","loading","enter-button","disabled"])]),_:1}),n(t(U),null,{default:l(()=>[n(t(d),{name:"maxHop",label:"Max Hop"},{default:l(()=>[n(t(j),{value:r.value.maxHop,"onUpdate:value":a[1]||(a[1]=o=>r.value.maxHop=o),min:1,precision:0,disabled:t(c)},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1},8,["model"]),n(t(A),{loading:i.value,columns:k,"data-source":I.value,pagination:!1},null,8,["loading","data-source"])]),_:1}))}});export{$ as default};
