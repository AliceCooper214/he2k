import{d as H,y as M,r as p,v as P,J as $,o as _,e as W,l as c,c as l,b as m,g as t,bO as z,U as I,x as C,bP as J,a as B,bQ as Q,bR as q,H as L,i as G,bS as K,ao as Y,j as f,_ as Z}from"./index.954a2cbc.js";import{M as ee}from"./MultiLineResult.0bab4ef4.js";import{b as te}from"./base64.3bb69897.js";var o=(a=>(a.TEXT="text",a.FILE="file",a))(o||{}),N=(a=>(a.ENC="enc",a.DEC="dec",a))(N||{}),ae=(a=>(a.C1C2C3="C1C2C3",a.C1C3C2="C1C3C2",a))(ae||{}),ne=(a=>(a.ECB="ECB",a.CBC="CBC",a))(ne||{});const le={class:"cryptography"},oe={class:"ant-radio-group-warpper"},se={class:"input"},re={key:1,class:"file-input"},ue={class:"ant-upload-drag-icon"},ie={class:"ant-upload-text"},pe={class:"ant-upload-hint"},ce={class:"option"},de={class:"output"},ve={key:0,class:"output-file-wrapper"},_e=H({__name:"index",props:{encrypt:null,sample:null,type:null,autoFillInput:null},setup(a,{expose:X}){const r=a,{t:s}=M(),u=p(o.TEXT),d=p(null),b=p(r.sample),v=p(""),k=p(""),i=p(!1),F=p([]),S=async n=>(F.value=[{uid:n.uid,name:n.name,status:"done"}],new Promise((e,T)=>{let E=new FileReader;E.readAsBinaryString(n),E.onload=h=>{if(h.target){let x=h.target.result;if(typeof x=="string"){let w=te.encode(x);d.value={binary:w,name:n.name},g(),e(!1)}}}})),j=()=>{v.value="",d.value=null,F.value=[],i.value=!1},R=()=>{var n;switch(u.value){case o.FILE:(n=d.value)!=null&&n.binary?v.value=r.encrypt(d.value.binary):Y.warn({key:"crypt-wrapper-file",content:s("cryptWrapper.fileWarn")});break;case o.TEXT:k.value=r.encrypt(b.value);break}i.value=!1},O=n=>{const e=n.split(".");return r.type===N.ENC?n+".enc":(e.at(-1)==="enc"&&e.pop(),e.splice(e.length-1,0,"dec"),e.join("."))},U=()=>{var n;if(v.value){const e=document.createElement("a");e.href="data:application/octet-stream;base64,"+v.value,e.setAttribute("download",O((n=d.value)==null?void 0:n.name)),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},g=()=>{i.value||(i.value=!0),A()},A=P.exports.debounce(()=>{R()},200,{leading:!0});return $(()=>{r.autoFillInput&&(b.value=r.autoFillInput),g()}),X({handleEncrypt:g}),(n,e)=>{var V;const T=f("a-radio-button"),E=f("a-radio-group"),h=f("a-upload-dragger"),x=f("a-button"),w=f("a-alert"),D=f("a-spin");return _(),W("div",le,[c("div",oe,[l(E,{value:u.value,"onUpdate:value":e[0]||(e[0]=y=>u.value=y)},{default:m(()=>[l(T,{value:t(o).TEXT},{default:m(()=>[l(t(z)),I(" "+C(t(s)("cryptWrapper.inputType.text")),1)]),_:1},8,["value"]),l(T,{value:t(o).FILE},{default:m(()=>[l(t(J)),I(" "+C(t(s)("cryptWrapper.inputType.file")),1)]),_:1},8,["value"])]),_:1},8,["value"])]),c("div",se,[u.value===t(o).TEXT?(_(),B(t(Q),{key:0,modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=y=>b.value=y),autofocus:"",class:"input",title:t(s)("cryptWrapper.input"),onChange:g},null,8,["modelValue","title"])):u.value===t(o).FILE?(_(),W("div",re,[l(h,{name:"file","max-count":1,"before-upload":S,remove:j,"file-list":F.value},{default:m(()=>[c("p",ue,[l(t(q))]),c("p",ie,C(t(s)("cryptWrapper.uploadText")),1),c("p",pe,C(t(s)("cryptWrapper.uploadHint")),1)]),_:1},8,["file-list"])])):L("",!0),c("div",ce,[G(n.$slots,"option",{},void 0,!0)])]),c("div",de,[u.value===t(o).FILE?(_(),W("div",ve,[l(x,{type:"primary",disabled:!v.value.length,loading:i.value,onClick:U},{default:m(()=>[l(t(K)),I(" "+C(t(s)("cryptWrapper.outputFile")),1)]),_:1},8,["disabled","loading"]),v.value.length&&!i.value?(_(),B(w,{key:0,message:t(s)(`cryptWrapper.outputTips.${r.type}`)+O((V=d.value)==null?void 0:V.name),type:"success","show-icon":""},null,8,["message"])):L("",!0)])):u.value===t(o).TEXT?(_(),B(D,{key:1,spinning:i.value},{default:m(()=>[l(t(ee),{result:k.value,"onUpdate:result":e[2]||(e[2]=y=>k.value=y),"result-desc":t(s)("cryptWrapper.output")},null,8,["result","result-desc"])]),_:1},8,["spinning"])):L("",!0)])])}}});const Ce=Z(_e,[["__scopeId","data-v-988c3a83"]]);export{N as C,ae as S,Ce as a,ne as b};
