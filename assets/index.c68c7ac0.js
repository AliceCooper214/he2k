import{d as $,cm as P,r as m,J as j,as as f,a as g,b as o,g as a,o as y,c as u,cp as N,cs as v,U as F,x as T,cq as W,cr as D,H as h,cN as E,e as H,b2 as M,F as q,ct as L,bN as O}from"./index.954a2cbc.js";import{A as c}from"./ipv4.c8b8cd44.js";import{A as p}from"./ipv6.b8445744.js";const Z=$({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean}},emits:["acceptClipboardCb"],setup(w,{emit:B}){const I=w,{t:s}=P(),d=m({userInput:""}),S={userInput:[{required:!0,whitespace:!0,message:s("ipFormatter.inputErrorIpAddressMsg")}]};j(()=>{var e,r;(((e=I.clipboardValue)==null?void 0:e.isIPv4())||((r=I.clipboardValue)==null?void 0:r.isIPv6()))&&(d.value.userInput=I.clipboardValue.getOriginData(),B("acceptClipboardCb"),A())});const l=m(),x=m(""),k=m(),A=function(){var e;(e=k.value)==null||e.validate().then(()=>{V(d.value.userInput).then(r=>{l.value=r.address,x.value=r.fromType}).catch(r=>{l.value=void 0,x.value=""})})},_=[{title:"Label",dataIndex:"label",key:"label",width:"30%"},{title:"Value",dataIndex:"value",key:"value",width:"55%",ellipsis:!0},{title:"Action",key:"action",width:"15%"}],C=m([{label:s("ipFormatter.standerIpAddress"),value:f(()=>{var e;return(e=l.value)==null?void 0:e.address})},{label:s("ipFormatter.decimalFormat"),value:f(()=>{var e;return(e=l.value)==null?void 0:e.bigInteger().toString()})},{label:s("ipFormatter.binaryFormat"),value:f(()=>{const e=l.value;return e?`0b${e.binaryZeroPad()}`:""})},{label:s("ipFormatter.hexadecimalFormat"),value:f(()=>{const e=l.value;return e instanceof c?`0x${e.toHex()}`:e instanceof p?`0x${e.parsedAddress.map(r=>parseInt(r,16).toString(16).padStart(4,"0")).join(":")}`:""})},{label:s("ipFormatter.octalFormat"),value:f(()=>{const e=l.value;return e instanceof c?"0o"+e.toArray().map(r=>r.toString(8)).join(":"):e instanceof p?"0o"+e.parsedAddress.map(r=>parseInt(r,16).toString(8).padStart(6,"0")).join(":"):""})}]),V=function(e){return new Promise((r,i)=>{try{const t=new c(e);return r({fromType:"ipv4",address:t})}catch{}try{const t=new p(e);return r({fromType:"ipv6",address:t})}catch{}try{const t=BigInt(e);if(t>=BigInt(0)&&t<=BigInt(4294967295)){const n=c.fromBigInteger(t);return r({fromType:"Decimal",address:n})}}catch{}try{if(e.startsWith("0x")){const t=e.replaceAll("0x","");if(t.split(":").length===4){const n=c.fromHex(t);return r({fromType:"hex",address:n})}}}catch{}try{if(e.startsWith("0o")&&e.split(":").length===4){const t=e.split(":").map(b=>parseInt(b.replaceAll("o",""),8)).join("."),n=new c(t);return r({fromType:"octal",address:n})}}catch{}try{const t=BigInt(e);if(t>=BigInt(0)&&t<=BigInt("340282366920938463463374607431768211455")){const n=p.fromBigInteger(t);return r({fromType:"BigInteger",address:n})}}catch{}try{if(e.startsWith("0x")&&e.split(":").length===8){const t=new p(e.replace("0x",""));return r({fromType:"hex",address:t})}}catch{}try{if(e.startsWith("0o")&&e.split(":").length===8){const t=e.split(":").map(b=>parseInt(b.replaceAll("o",""),8).toString(16)).join(":"),n=new p(t);return r({fromType:"octal",address:n})}}catch{}i(new Error("Invalid IP Address"))})};return(e,r)=>(y(),g(a(O),null,{one:o(()=>[u(a(D),{ref_key:"formRef",ref:k,model:d.value,rules:S},{default:o(()=>[u(a(N),{name:"userInput"},{extra:o(()=>[u(a(v),{type:"secondary"},{default:o(()=>[F(T(`${a(s)("ipFormatter.example")}: 192.168.1.1 or 167772161`),1)]),_:1})]),default:o(()=>[u(a(W),{value:d.value.userInput,"onUpdate:value":r[0]||(r[0]=i=>d.value.userInput=i),"enter-button":e.$t("common.format"),onSearch:A},null,8,["value","enter-button"])]),_:1})]),_:1},8,["model"]),u(a(L),{columns:_,"data-source":C.value,"show-header":!1,pagination:!1},{bodyCell:o(({column:i,record:t})=>[i.key==="label"?(y(),g(a(v),{key:0,strong:""},{default:o(()=>[F(T(`${t.label}:`),1)]),_:2},1024)):h("",!0),i.key==="value"?(y(),g(a(E),{key:1,title:t.value},{default:o(()=>[u(a(v),{content:t.value},null,8,["content"])]),_:2},1032,["title"])):h("",!0),i.key==="action"?(y(),H(q,{key:2},[t.value?(y(),g(a(M),{key:0,type:"link","copy-content":t.value},null,8,["copy-content"])):h("",!0)],64)):h("",!0)]),_:1},8,["data-source"])]),_:1}))}});export{Z as default};
