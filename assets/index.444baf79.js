import{L as Jt}from"./layout1.2f31ef67.js";import{d as $t,y as Kt,r as bt,J as Zt,a as zt,b as Bt,g as Et,ao as Pt,o as tr,c as St,bQ as rr,l as Ct,x as er,j as nr,_ as or}from"./index.954a2cbc.js";import{M as sr}from"./MultiLineResult.0bab4ef4.js";import{d as ir}from"./dom-parser.86a3b30c.js";var It={};(function(vt){var Tt=vt;(function(D){function dt(t){var r=Array.prototype.slice,e=t.length,o=function(s,l){return function(){return l.apply(this,s.concat(r.call(arguments)))}},n=function(){var s=r.call(arguments);return s.length<e?o(s,n):t.apply(this,r.apply(arguments,[0,e]))};return n}var L=function(t,r){for(var e=0;e<r.length;e+=1)t(r[e],e,r)},st=function(t,r,e){var o=r;return L(function(n,s){o=t(o,n,s)},e),o},_=function(t,r){var e=new Array(r.length);return L(function(o,n){e[n]=t(o)},r),e},At=function(t,r){var e=[];return L(function(o,n){t(o,n)&&e.push(o)},r),e},mt=function(t,r){for(var e=0;e<t.length;e+=1)if(t[e]===r)return!0;return!1};function it(t){return function(){return t}}function ft(t){return t.toString()}var ut=function(t,r){return r.join(t)},Nt=function(t,r,e){return t+e+r},Lt=Array.prototype.concat,Rt=32767;function _t(t){for(var r=[],e=0;e<t.length;e+=Rt){var o=t.slice(e,e+Rt);r=Lt.apply(r,o)}return r}function yt(t,r){for(var e=Object(t),o=1;o<arguments.length;o++){var n=arguments[o];if(n!=null)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}i.prototype=new Object,i.prototype.constructor=i,i.superclass=Object.prototype;function i(){this.init()}i.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(t){return new M(t[0],t[2])},this.reduceActions[5]=function(t){return new V(t[0],t[2])},this.reduceActions[7]=function(t){return new H(t[0],t[2])},this.reduceActions[8]=function(t){return new G(t[0],t[2])},this.reduceActions[10]=function(t){return new W(t[0],t[2])},this.reduceActions[11]=function(t){return new k(t[0],t[2])},this.reduceActions[12]=function(t){return new Y(t[0],t[2])},this.reduceActions[13]=function(t){return new q(t[0],t[2])},this.reduceActions[15]=function(t){return new Q(t[0],t[2])},this.reduceActions[16]=function(t){return new j(t[0],t[2])},this.reduceActions[18]=function(t){return new X(t[0],t[2])},this.reduceActions[19]=function(t){return new J(t[0],t[2])},this.reduceActions[20]=function(t){return new $(t[0],t[2])},this.reduceActions[22]=function(t){return new U(t[1])},this.reduceActions[24]=function(t){return new K(t[0],t[2])},this.reduceActions[25]=function(t){return new N(void 0,void 0,t[0])},this.reduceActions[27]=function(t){return t[0].locationPath=t[2],t[0]},this.reduceActions[28]=function(t){return t[0].locationPath=t[2],t[0].locationPath.steps.unshift(new a(a.DESCENDANTORSELF,h.nodeTest,[])),t[0]},this.reduceActions[29]=function(t){return new N(t[0],[],void 0)},this.reduceActions[30]=function(t){return c.instance_of(t[0],N)?(t[0].filterPredicates==null&&(t[0].filterPredicates=[]),t[0].filterPredicates.push(t[1]),t[0]):new N(t[0],[t[1]],void 0)},this.reduceActions[32]=function(t){return t[1]},this.reduceActions[33]=function(t){return new g(t[0])},this.reduceActions[34]=function(t){return new E(t[0])},this.reduceActions[36]=function(t){return new Z(t[0],[])},this.reduceActions[37]=function(t){return new Z(t[0],t[2])},this.reduceActions[38]=function(t){return[t[0]]},this.reduceActions[39]=function(t){return t[2].unshift(t[0]),t[2]},this.reduceActions[43]=function(t){return new rt(!0,[])},this.reduceActions[44]=function(t){return t[1].absolute=!0,t[1]},this.reduceActions[46]=function(t){return new rt(!1,[t[0]])},this.reduceActions[47]=function(t){return t[0].steps.push(t[2]),t[0]},this.reduceActions[49]=function(t){return new a(t[0],t[1],[])},this.reduceActions[50]=function(t){return new a(a.CHILD,t[0],[])},this.reduceActions[51]=function(t){return new a(t[0],t[1],t[2])},this.reduceActions[52]=function(t){return new a(a.CHILD,t[0],t[1])},this.reduceActions[54]=function(t){return[t[0]]},this.reduceActions[55]=function(t){return t[1].unshift(t[0]),t[1]},this.reduceActions[56]=function(t){return t[0]=="ancestor"?a.ANCESTOR:t[0]=="ancestor-or-self"?a.ANCESTORORSELF:t[0]=="attribute"?a.ATTRIBUTE:t[0]=="child"?a.CHILD:t[0]=="descendant"?a.DESCENDANT:t[0]=="descendant-or-self"?a.DESCENDANTORSELF:t[0]=="following"?a.FOLLOWING:t[0]=="following-sibling"?a.FOLLOWINGSIBLING:t[0]=="namespace"?a.NAMESPACE:t[0]=="parent"?a.PARENT:t[0]=="preceding"?a.PRECEDING:t[0]=="preceding-sibling"?a.PRECEDINGSIBLING:t[0]=="self"?a.SELF:-1},this.reduceActions[57]=function(t){return a.ATTRIBUTE},this.reduceActions[59]=function(t){return t[0]=="comment"?h.commentTest:t[0]=="text"?h.textTest:t[0]=="processing-instruction"?h.anyPiTest:t[0]=="node"?h.nodeTest:new h(-1,void 0)},this.reduceActions[60]=function(t){return new h.PITest(t[2])},this.reduceActions[61]=function(t){return t[1]},this.reduceActions[63]=function(t){return t[1].absolute=!0,t[1].steps.unshift(new a(a.DESCENDANTORSELF,h.nodeTest,[])),t[1]},this.reduceActions[64]=function(t){return t[0].steps.push(new a(a.DESCENDANTORSELF,h.nodeTest,[])),t[0].steps.push(t[2]),t[0]},this.reduceActions[65]=function(t){return new a(a.SELF,h.nodeTest,[])},this.reduceActions[66]=function(t){return new a(a.PARENT,h.nodeTest,[])},this.reduceActions[67]=function(t){return new et(t[1])},this.reduceActions[68]=function(t){return h.nameTestAny},this.reduceActions[69]=function(t){return new h.NameTestPrefixAny(t[0].split(":")[0])},this.reduceActions[70]=function(t){return new h.NameTestQName(t[0])}},i.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],i.actionTableNumber=[` 1 0        /.-,+*)('    & %$  #  "!`,"                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               ",` 1 0        /.-,+*)('    & %$  #  "!`,`K1  KKKKKKKK .  +*)('KKKKKK  KK# K" `,` 1 0        /.-,+*)('    & %$  #  "!`,"                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       ",` 1           .  +*)('          #  " `,"b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               ",` 1 0        /.-,+*)('    & %$m #  "!`,"_  f________         ______e __  _  ",` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1 0        /.-,+*)('      %$  #  "!`,` 1 0        /.-,+*)('    & %$  #  "!`,` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,">  >>>>>>>>>         >>>>>>> >> >>  ",` 1           .  +*)('          #  " `,` 1           .  +*)('          #  " `,"Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                             \x87      ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                             \x88      ","                             F\x89     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                 \x8A  ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  ",` 1 0        /.-,+*)('    & %$  #  "!`,"]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],i.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         \x7F=>?@ AB  CDEFGH IJ ","\x80456789:;<=>?@ AB  CDEFGH IJ\x81","            \x82        EFGH IJ ","            \x83        EFGH IJ ","                             ","                     \x84 GH IJ ","                     \x85 GH IJ ","              i          \x86   ","              i          \x87   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ AB\x8CqCDEFGH IJ ","                             ","                             "],i.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],i.DOUBLEDOT=2,i.DOUBLECOLON=3,i.DOUBLESLASH=4,i.NOTEQUAL=5,i.LESSTHANOREQUAL=6,i.GREATERTHANOREQUAL=7,i.AND=8,i.OR=9,i.MOD=10,i.DIV=11,i.MULTIPLYOPERATOR=12,i.FUNCTIONNAME=13,i.AXISNAME=14,i.LITERAL=15,i.NUMBER=16,i.ASTERISKNAMETEST=17,i.QNAME=18,i.NCNAMECOLONASTERISK=19,i.NODETYPE=20,i.PROCESSINGINSTRUCTIONWITHLITERAL=21,i.EQUALS=22,i.LESSTHAN=23,i.GREATERTHAN=24,i.PLUS=25,i.MINUS=26,i.BAR=27,i.SLASH=28,i.LEFTPARENTHESIS=29,i.RIGHTPARENTHESIS=30,i.COMMA=31,i.AT=32,i.LEFTBRACKET=33,i.RIGHTBRACKET=34,i.DOT=35,i.DOLLAR=36,i.prototype.tokenize=function(t){for(var r=[],e=[],o=t+"\0",n=0,s=o.charAt(n++);;){for(;s==" "||s=="	"||s=="\r"||s==`
`;)s=o.charAt(n++);if(s=="\0"||n>=o.length)break;if(s=="("){r.push(i.LEFTPARENTHESIS),e.push(s),s=o.charAt(n++);continue}if(s==")"){r.push(i.RIGHTPARENTHESIS),e.push(s),s=o.charAt(n++);continue}if(s=="["){r.push(i.LEFTBRACKET),e.push(s),s=o.charAt(n++);continue}if(s=="]"){r.push(i.RIGHTBRACKET),e.push(s),s=o.charAt(n++);continue}if(s=="@"){r.push(i.AT),e.push(s),s=o.charAt(n++);continue}if(s==","){r.push(i.COMMA),e.push(s),s=o.charAt(n++);continue}if(s=="|"){r.push(i.BAR),e.push(s),s=o.charAt(n++);continue}if(s=="+"){r.push(i.PLUS),e.push(s),s=o.charAt(n++);continue}if(s=="-"){r.push(i.MINUS),e.push(s),s=o.charAt(n++);continue}if(s=="="){r.push(i.EQUALS),e.push(s),s=o.charAt(n++);continue}if(s=="$"){r.push(i.DOLLAR),e.push(s),s=o.charAt(n++);continue}if(s=="."){if(s=o.charAt(n++),s=="."){r.push(i.DOUBLEDOT),e.push(".."),s=o.charAt(n++);continue}if(s>="0"&&s<="9"){var l="."+s;for(s=o.charAt(n++);s>="0"&&s<="9";)l+=s,s=o.charAt(n++);r.push(i.NUMBER),e.push(l);continue}r.push(i.DOT),e.push(".");continue}if(s=="'"||s=='"'){for(var y=s,w="";n<o.length&&(s=o.charAt(n))!==y;)w+=s,n+=1;if(s!==y)throw tt.fromMessage("Unterminated string literal: "+y+w);n+=1,r.push(i.LITERAL),e.push(w),s=o.charAt(n++);continue}if(s>="0"&&s<="9"){var l=s;for(s=o.charAt(n++);s>="0"&&s<="9";)l+=s,s=o.charAt(n++);if(s=="."&&o.charAt(n)>="0"&&o.charAt(n)<="9")for(l+=s,l+=o.charAt(n++),s=o.charAt(n++);s>="0"&&s<="9";)l+=s,s=o.charAt(n++);r.push(i.NUMBER),e.push(l);continue}if(s=="*"){if(r.length>0){var p=r[r.length-1];if(p!=i.AT&&p!=i.DOUBLECOLON&&p!=i.LEFTPARENTHESIS&&p!=i.LEFTBRACKET&&p!=i.AND&&p!=i.OR&&p!=i.MOD&&p!=i.DIV&&p!=i.MULTIPLYOPERATOR&&p!=i.SLASH&&p!=i.DOUBLESLASH&&p!=i.BAR&&p!=i.PLUS&&p!=i.MINUS&&p!=i.EQUALS&&p!=i.NOTEQUAL&&p!=i.LESSTHAN&&p!=i.LESSTHANOREQUAL&&p!=i.GREATERTHAN&&p!=i.GREATERTHANOREQUAL){r.push(i.MULTIPLYOPERATOR),e.push(s),s=o.charAt(n++);continue}}r.push(i.ASTERISKNAMETEST),e.push(s),s=o.charAt(n++);continue}if(s==":"&&o.charAt(n)==":"){r.push(i.DOUBLECOLON),e.push("::"),n++,s=o.charAt(n++);continue}if(s=="/"){if(s=o.charAt(n++),s=="/"){r.push(i.DOUBLESLASH),e.push("//"),s=o.charAt(n++);continue}r.push(i.SLASH),e.push("/");continue}if(s=="!"&&o.charAt(n)=="="){r.push(i.NOTEQUAL),e.push("!="),n++,s=o.charAt(n++);continue}if(s=="<"){if(o.charAt(n)=="="){r.push(i.LESSTHANOREQUAL),e.push("<="),n++,s=o.charAt(n++);continue}r.push(i.LESSTHAN),e.push("<"),s=o.charAt(n++);continue}if(s==">"){if(o.charAt(n)=="="){r.push(i.GREATERTHANOREQUAL),e.push(">="),n++,s=o.charAt(n++);continue}r.push(i.GREATERTHAN),e.push(">"),s=o.charAt(n++);continue}if(s=="_"||c.isLetter(s.charCodeAt(0))){var A=s;for(s=o.charAt(n++);c.isNCNameChar(s.charCodeAt(0));)A+=s,s=o.charAt(n++);if(r.length>0){var p=r[r.length-1];if(p!=i.AT&&p!=i.DOUBLECOLON&&p!=i.LEFTPARENTHESIS&&p!=i.LEFTBRACKET&&p!=i.AND&&p!=i.OR&&p!=i.MOD&&p!=i.DIV&&p!=i.MULTIPLYOPERATOR&&p!=i.SLASH&&p!=i.DOUBLESLASH&&p!=i.BAR&&p!=i.PLUS&&p!=i.MINUS&&p!=i.EQUALS&&p!=i.NOTEQUAL&&p!=i.LESSTHAN&&p!=i.LESSTHANOREQUAL&&p!=i.GREATERTHAN&&p!=i.GREATERTHANOREQUAL){if(A=="and"){r.push(i.AND),e.push(A);continue}if(A=="or"){r.push(i.OR),e.push(A);continue}if(A=="mod"){r.push(i.MOD),e.push(A);continue}if(A=="div"){r.push(i.DIV),e.push(A);continue}}}if(s==":"){if(o.charAt(n)=="*"){r.push(i.NCNAMECOLONASTERISK),e.push(A+":*"),n++,s=o.charAt(n++);continue}if(o.charAt(n)=="_"||c.isLetter(o.charCodeAt(n))){for(A+=":",s=o.charAt(n++);c.isNCNameChar(s.charCodeAt(0));)A+=s,s=o.charAt(n++);if(s=="("){r.push(i.FUNCTIONNAME),e.push(A);continue}r.push(i.QNAME),e.push(A);continue}if(o.charAt(n)==":"){r.push(i.AXISNAME),e.push(A);continue}}if(s=="("){if(A=="comment"||A=="text"||A=="node"){r.push(i.NODETYPE),e.push(A);continue}if(A=="processing-instruction"){o.charAt(n)==")"?r.push(i.NODETYPE):r.push(i.PROCESSINGINSTRUCTIONWITHLITERAL),e.push(A);continue}r.push(i.FUNCTIONNAME),e.push(A);continue}r.push(i.QNAME),e.push(A);continue}throw new Error("Unexpected character "+s)}return r.push(1),e.push("[EOF]"),[r,e]},i.SHIFT="s",i.REDUCE="r",i.ACCEPT="a",i.prototype.parse=function(w){var r,e,o=this.tokenize(w);if(o!=null){r=o[0],e=o[1];var n=0,s=[],l=[],y=[],w,p,A;for(s.push(0),l.push(1),y.push("_S"),p=r[n],A=e[n++];;)switch(w=s[s.length-1],i.actionTable[w].charAt(p-1)){case i.SHIFT:l.push(-p),y.push(A),s.push(i.actionTableNumber[w].charCodeAt(p-1)-32),p=r[n],A=e[n++];break;case i.REDUCE:for(var P=i.productions[i.actionTableNumber[w].charCodeAt(p-1)-32][1],b=[],lt=0;lt<P;lt++)l.pop(),b.unshift(y.pop()),s.pop();var pt=s[s.length-1];l.push(i.productions[i.actionTableNumber[w].charCodeAt(p-1)-32][0]),this.reduceActions[i.actionTableNumber[w].charCodeAt(p-1)-32]==null?y.push(b[0]):y.push(this.reduceActions[i.actionTableNumber[w].charCodeAt(p-1)-32](b)),s.push(i.gotoTable[pt].charCodeAt(i.productions[i.actionTableNumber[w].charCodeAt(p-1)-32][0]-2)-33);break;case i.ACCEPT:return new R(y.pop());default:throw new Error("XPath parse error")}}},R.prototype=new Object,R.prototype.constructor=R,R.superclass=Object.prototype;function R(t){this.expression=t}R.prototype.toString=function(){return this.expression.toString()};function wt(t,r,e){r in t||(t[r]=e)}R.prototype.evaluate=function(t){return t.contextNode=t.expressionContextNode,t.contextSize=1,t.contextPosition=1,t.isHtml&&(wt(t,"caseInsensitive",!0),wt(t,"allowAnyNamespaceForNoPrefix",!0)),wt(t,"caseInsensitive",!1),this.expression.evaluate(t)},R.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",R.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",S.prototype=new Object,S.prototype.constructor=S,S.superclass=Object.prototype;function S(){}S.prototype.init=function(){},S.prototype.toString=function(){return"<Expression>"},S.prototype.evaluate=function(t){throw new Error("Could not evaluate expression.")},ct.prototype=new S,ct.prototype.constructor=ct,ct.superclass=S.prototype;function ct(t){arguments.length>0&&this.init(t)}ct.prototype.init=function(t){this.rhs=t},U.prototype=new ct,U.prototype.constructor=U,U.superclass=ct.prototype;function U(t){arguments.length>0&&this.init(t)}U.prototype.init=function(t){U.superclass.init.call(this,t)},U.prototype.evaluate=function(t){return this.rhs.evaluate(t).number().negate()},U.prototype.toString=function(){return"-"+this.rhs.toString()},T.prototype=new S,T.prototype.constructor=T,T.superclass=S.prototype;function T(t,r){arguments.length>0&&this.init(t,r)}T.prototype.init=function(t,r){this.lhs=t,this.rhs=r},M.prototype=new T,M.prototype.constructor=M,M.superclass=T.prototype;function M(t,r){arguments.length>0&&this.init(t,r)}M.prototype.init=function(t,r){M.superclass.init.call(this,t,r)},M.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},M.prototype.evaluate=function(t){var r=this.lhs.evaluate(t).bool();return r.booleanValue()?r:this.rhs.evaluate(t).bool()},V.prototype=new T,V.prototype.constructor=V,V.superclass=T.prototype;function V(t,r){arguments.length>0&&this.init(t,r)}V.prototype.init=function(t,r){V.superclass.init.call(this,t,r)},V.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},V.prototype.evaluate=function(t){var r=this.lhs.evaluate(t).bool();return r.booleanValue()?this.rhs.evaluate(t).bool():r},H.prototype=new T,H.prototype.constructor=H,H.superclass=T.prototype;function H(t,r){arguments.length>0&&this.init(t,r)}H.prototype.init=function(t,r){H.superclass.init.call(this,t,r)},H.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},H.prototype.evaluate=function(t){return this.lhs.evaluate(t).equals(this.rhs.evaluate(t))},G.prototype=new T,G.prototype.constructor=G,G.superclass=T.prototype;function G(t,r){arguments.length>0&&this.init(t,r)}G.prototype.init=function(t,r){G.superclass.init.call(this,t,r)},G.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},G.prototype.evaluate=function(t){return this.lhs.evaluate(t).notequal(this.rhs.evaluate(t))},W.prototype=new T,W.prototype.constructor=W,W.superclass=T.prototype;function W(t,r){arguments.length>0&&this.init(t,r)}W.prototype.init=function(t,r){W.superclass.init.call(this,t,r)},W.prototype.evaluate=function(t){return this.lhs.evaluate(t).lessthan(this.rhs.evaluate(t))},W.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},k.prototype=new T,k.prototype.constructor=k,k.superclass=T.prototype;function k(t,r){arguments.length>0&&this.init(t,r)}k.prototype.init=function(t,r){k.superclass.init.call(this,t,r)},k.prototype.evaluate=function(t){return this.lhs.evaluate(t).greaterthan(this.rhs.evaluate(t))},k.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},Y.prototype=new T,Y.prototype.constructor=Y,Y.superclass=T.prototype;function Y(t,r){arguments.length>0&&this.init(t,r)}Y.prototype.init=function(t,r){Y.superclass.init.call(this,t,r)},Y.prototype.evaluate=function(t){return this.lhs.evaluate(t).lessthanorequal(this.rhs.evaluate(t))},Y.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},q.prototype=new T,q.prototype.constructor=q,q.superclass=T.prototype;function q(t,r){arguments.length>0&&this.init(t,r)}q.prototype.init=function(t,r){q.superclass.init.call(this,t,r)},q.prototype.evaluate=function(t){return this.lhs.evaluate(t).greaterthanorequal(this.rhs.evaluate(t))},q.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},Q.prototype=new T,Q.prototype.constructor=Q,Q.superclass=T.prototype;function Q(t,r){arguments.length>0&&this.init(t,r)}Q.prototype.init=function(t,r){Q.superclass.init.call(this,t,r)},Q.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().plus(this.rhs.evaluate(t).number())},Q.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},j.prototype=new T,j.prototype.constructor=j,j.superclass=T.prototype;function j(t,r){arguments.length>0&&this.init(t,r)}j.prototype.init=function(t,r){j.superclass.init.call(this,t,r)},j.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().minus(this.rhs.evaluate(t).number())},j.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},X.prototype=new T,X.prototype.constructor=X,X.superclass=T.prototype;function X(t,r){arguments.length>0&&this.init(t,r)}X.prototype.init=function(t,r){X.superclass.init.call(this,t,r)},X.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().multiply(this.rhs.evaluate(t).number())},X.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},J.prototype=new T,J.prototype.constructor=J,J.superclass=T.prototype;function J(t,r){arguments.length>0&&this.init(t,r)}J.prototype.init=function(t,r){J.superclass.init.call(this,t,r)},J.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().div(this.rhs.evaluate(t).number())},J.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},$.prototype=new T,$.prototype.constructor=$,$.superclass=T.prototype;function $(t,r){arguments.length>0&&this.init(t,r)}$.prototype.init=function(t,r){$.superclass.init.call(this,t,r)},$.prototype.evaluate=function(t){return this.lhs.evaluate(t).number().mod(this.rhs.evaluate(t).number())},$.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},K.prototype=new T,K.prototype.constructor=K,K.superclass=T.prototype;function K(t,r){arguments.length>0&&this.init(t,r)}K.prototype.init=function(t,r){K.superclass.init.call(this,t,r)},K.prototype.evaluate=function(t){return this.lhs.evaluate(t).nodeset().union(this.rhs.evaluate(t).nodeset())},K.prototype.toString=function(){return _(ft,[this.lhs,this.rhs]).join(" | ")},N.prototype=new S,N.prototype.constructor=N,N.superclass=S.prototype;function N(t,r,e){arguments.length>0&&this.init(t,r,e)}N.prototype.init=function(t,r,e){N.superclass.init.call(this),this.filter=t,this.filterPredicates=r,this.locationPath=e};function Ut(t){for(;t&&t.parentNode;)t=t.parentNode;return t}N.applyPredicates=function(t,r,e){if(t.length===0)return e;var o=r.extend({});return st(function(n,s){return o.contextSize=n.length,At(function(l,y){return o.contextNode=l,o.contextPosition=y+1,N.predicateMatches(s,o)},n)},e,t)},N.getRoot=function(t,r){var e=r[0];if(e.nodeType===9)return e;if(t.virtualRoot)return t.virtualRoot;var o=e.ownerDocument;if(o)return o;for(var n=e;n.parentNode!=null;)n=n.parentNode;return n},N.applyStep=function(t,r,e){var o=[];switch(r.contextNode=e,t.axis){case a.ANCESTOR:if(r.contextNode===r.virtualRoot)break;var n;for(r.contextNode.nodeType==2?n=N.getOwnerElement(r.contextNode):n=r.contextNode.parentNode;n!=null&&(t.nodeTest.matches(n,r)&&o.push(n),n!==r.virtualRoot);)n=n.parentNode;break;case a.ANCESTORORSELF:for(var n=r.contextNode;n!=null&&(t.nodeTest.matches(n,r)&&o.push(n),n!==r.virtualRoot);n=n.nodeType==2?N.getOwnerElement(n):n.parentNode);break;case a.ATTRIBUTE:var s=r.contextNode.attributes;if(s!=null)for(var l=0;l<s.length;l++){var n=s.item(l);t.nodeTest.matches(n,r)&&o.push(n)}break;case a.CHILD:for(var n=r.contextNode.firstChild;n!=null;n=n.nextSibling)t.nodeTest.matches(n,r)&&o.push(n);break;case a.DESCENDANT:for(var b=[r.contextNode.firstChild];b.length>0;)for(var n=b.pop();n!=null;)t.nodeTest.matches(n,r)&&o.push(n),n.firstChild!=null?(b.push(n.nextSibling),n=n.firstChild):n=n.nextSibling;break;case a.DESCENDANTORSELF:t.nodeTest.matches(r.contextNode,r)&&o.push(r.contextNode);for(var b=[r.contextNode.firstChild];b.length>0;)for(var n=b.pop();n!=null;)t.nodeTest.matches(n,r)&&o.push(n),n.firstChild!=null?(b.push(n.nextSibling),n=n.firstChild):n=n.nextSibling;break;case a.FOLLOWING:if(r.contextNode===r.virtualRoot)break;var b=[];r.contextNode.firstChild!=null?b.unshift(r.contextNode.firstChild):b.unshift(r.contextNode.nextSibling);for(var n=r.contextNode.parentNode;n!=null&&n.nodeType!=9&&n!==r.virtualRoot;n=n.parentNode)b.unshift(n.nextSibling);do for(var n=b.pop();n!=null;)t.nodeTest.matches(n,r)&&o.push(n),n.firstChild!=null?(b.push(n.nextSibling),n=n.firstChild):n=n.nextSibling;while(b.length>0);break;case a.FOLLOWINGSIBLING:if(r.contextNode===r.virtualRoot)break;for(var n=r.contextNode.nextSibling;n!=null;n=n.nextSibling)t.nodeTest.matches(n,r)&&o.push(n);break;case a.NAMESPACE:var y={};if(r.contextNode.nodeType==1){y.xml=R.XML_NAMESPACE_URI,y.xmlns=R.XMLNS_NAMESPACE_URI;for(var n=r.contextNode;n!=null&&n.nodeType==1;n=n.parentNode)for(var l=0;l<n.attributes.length;l++){var w=n.attributes.item(l),p=String(w.name);if(p=="xmlns")y[""]==null&&(y[""]=w.value);else if(p.length>6&&p.substring(0,6)=="xmlns:"){var A=p.substring(6,p.length);y[A]==null&&(y[A]=w.value)}}for(var A in y){var P=new nt(A,y[A],r.contextNode);t.nodeTest.matches(P,r)&&o.push(P)}}break;case a.PARENT:n=null,r.contextNode!==r.virtualRoot&&(r.contextNode.nodeType==2?n=N.getOwnerElement(r.contextNode):n=r.contextNode.parentNode),n!=null&&t.nodeTest.matches(n,r)&&o.push(n);break;case a.PRECEDING:var b;r.virtualRoot!=null?b=[r.virtualRoot]:b=[Ut(r.contextNode)];t:for(;b.length>0;)for(var n=b.pop();n!=null;){if(n==r.contextNode)break t;t.nodeTest.matches(n,r)&&o.unshift(n),n.firstChild!=null?(b.push(n.nextSibling),n=n.firstChild):n=n.nextSibling}break;case a.PRECEDINGSIBLING:if(r.contextNode===r.virtualRoot)break;for(var n=r.contextNode.previousSibling;n!=null;n=n.previousSibling)t.nodeTest.matches(n,r)&&o.push(n);break;case a.SELF:t.nodeTest.matches(r.contextNode,r)&&o.push(r.contextNode);break}return o};function Mt(t,r,e){return N.applyPredicates(t.predicates,r,N.applyStep(t,r,e))}function Vt(t,r,e){return _t(_(Mt.bind(null,e,t),r))}N.applySteps=function(t,r,e){return st(Vt.bind(null,r),e,t)},N.prototype.applyFilter=function(t,r){if(!this.filter)return{nodes:[t.contextNode]};var e=this.filter.evaluate(t);if(!c.instance_of(e,f)){if(this.filterPredicates!=null&&this.filterPredicates.length>0||this.locationPath!=null)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:e}}return{nodes:N.applyPredicates(this.filterPredicates||[],r,e.toUnsortedArray())}},N.applyLocationPath=function(t,r,e){if(!t)return e;var o=t.absolute?[N.getRoot(r,e)]:e;return N.applySteps(t.steps,r,o)},N.prototype.evaluate=function(t){var r=yt(new z,t),e=this.applyFilter(t,r);if("nonNodes"in e)return e.nonNodes;var o=new f;return o.addArray(N.applyLocationPath(this.locationPath,r,e.nodes)),o},N.predicateMatches=function(t,r){var e=t.evaluate(r);return c.instance_of(e,E)?r.contextPosition===e.numberValue():e.booleanValue()},N.predicateString=function(t){return Nt("[","]",t.toString())},N.predicatesString=function(t){return ut("",_(N.predicateString,t))},N.prototype.toString=function(){if(this.filter!=null){var t=ft(this.filter);return c.instance_of(this.filter,g)?Nt("'","'",t):this.filterPredicates!=null&&this.filterPredicates.length?Nt("(",")",t)+N.predicatesString(this.filterPredicates):this.locationPath!=null?t+(this.locationPath.absolute?"":"/")+ft(this.locationPath):t}return ft(this.locationPath)},N.getOwnerElement=function(t){if(t.ownerElement)return t.ownerElement;try{if(t.selectSingleNode)return t.selectSingleNode("..")}catch{}for(var r=t.nodeType==9?t:t.ownerDocument,e=r.getElementsByTagName("*"),o=0;o<e.length;o++)for(var n=e.item(o),s=n.attributes,l=0;l<s.length;l++){var y=s.item(l);if(y===t)return n}return null},rt.prototype=new Object,rt.prototype.constructor=rt,rt.superclass=Object.prototype;function rt(t,r){arguments.length>0&&this.init(t,r)}rt.prototype.init=function(t,r){this.absolute=t,this.steps=r},rt.prototype.toString=function(){return(this.absolute?"/":"")+_(ft,this.steps).join("/")},a.prototype=new Object,a.prototype.constructor=a,a.superclass=Object.prototype;function a(t,r,e){arguments.length>0&&this.init(t,r,e)}a.prototype.init=function(t,r,e){this.axis=t,this.nodeTest=r,this.predicates=e},a.prototype.toString=function(){return a.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+N.predicatesString(this.predicates)},a.ANCESTOR=0,a.ANCESTORORSELF=1,a.ATTRIBUTE=2,a.CHILD=3,a.DESCENDANT=4,a.DESCENDANTORSELF=5,a.FOLLOWING=6,a.FOLLOWINGSIBLING=7,a.NAMESPACE=8,a.PARENT=9,a.PRECEDING=10,a.PRECEDINGSIBLING=11,a.SELF=12,a.STEPNAMES=st(function(t,r){return t[r[0]]=r[1],t},{},[[a.ANCESTOR,"ancestor"],[a.ANCESTORORSELF,"ancestor-or-self"],[a.ATTRIBUTE,"attribute"],[a.CHILD,"child"],[a.DESCENDANT,"descendant"],[a.DESCENDANTORSELF,"descendant-or-self"],[a.FOLLOWING,"following"],[a.FOLLOWINGSIBLING,"following-sibling"],[a.NAMESPACE,"namespace"],[a.PARENT,"parent"],[a.PRECEDING,"preceding"],[a.PRECEDINGSIBLING,"preceding-sibling"],[a.SELF,"self"]]),h.prototype=new Object,h.prototype.constructor=h,h.superclass=Object.prototype;function h(t,r){arguments.length>0&&this.init(t,r)}h.prototype.init=function(t,r){this.type=t,this.value=r},h.prototype.toString=function(){return"<unknown nodetest type>"},h.prototype.matches=function(t,r){console.warn("unknown node test type")},h.NAMETESTANY=0,h.NAMETESTPREFIXANY=1,h.NAMETESTQNAME=2,h.COMMENT=3,h.TEXT=4,h.PI=5,h.NODE=6,h.isNodeType=function(t){return function(r){return mt(t,r.nodeType)}},h.makeNodeTestType=function(t,r,e){var o=e||function(){};return o.prototype=new h(t),o.prototype.constructor=o,yt(o.prototype,r),o},h.makeNodeTypeTest=function(t,r,e){return new(h.makeNodeTestType(t,{matches:h.isNodeType(r),toString:it(e)}))},h.hasPrefix=function(t){return t.prefix||(t.nodeName||t.tagName).indexOf(":")!==-1},h.isElementOrAttribute=h.isNodeType([1,2]),h.nameSpaceMatches=function(t,r,e){var o=e.namespaceURI||"";if(!t)return!o||r.allowAnyNamespaceForNoPrefix&&!h.hasPrefix(e);var n=r.namespaceResolver.getNamespace(t,r.expressionContextNode);if(n==null)throw new Error("Cannot resolve QName "+t);return n===o},h.localNameMatches=function(t,r,e){var o=e.localName||e.nodeName;return r.caseInsensitive?t.toLowerCase()===o.toLowerCase():t===o},h.NameTestPrefixAny=h.makeNodeTestType(h.NAMETESTPREFIXANY,{matches:function(t,r){return h.isElementOrAttribute(t)&&h.nameSpaceMatches(this.prefix,r,t)},toString:function(){return this.prefix+":*"}},function(r){this.prefix=r}),h.NameTestQName=h.makeNodeTestType(h.NAMETESTQNAME,{matches:function(t,r){return h.isNodeType([1,2,nt.XPATH_NAMESPACE_NODE])(t)&&h.nameSpaceMatches(this.prefix,r,t)&&h.localNameMatches(this.localName,r,t)},toString:function(){return this.name}},function(r){var e=r.split(":");this.name=r,this.prefix=e.length>1?e[0]:null,this.localName=e[e.length>1?1:0]}),h.PITest=h.makeNodeTestType(h.PI,{matches:function(t,r){return h.isNodeType([7])(t)&&(t.target||t.nodeName)===this.name},toString:function(){return Nt('processing-instruction("','")',this.name)}},function(t){this.name=t}),h.nameTestAny=h.makeNodeTypeTest(h.NAMETESTANY,[1,2,nt.XPATH_NAMESPACE_NODE],"*"),h.textTest=h.makeNodeTypeTest(h.TEXT,[3,4],"text()"),h.commentTest=h.makeNodeTypeTest(h.COMMENT,[8],"comment()"),h.nodeTest=h.makeNodeTypeTest(h.NODE,[1,2,3,4,7,8,9],"node()"),h.anyPiTest=h.makeNodeTypeTest(h.PI,[7],"processing-instruction()"),et.prototype=new S,et.prototype.constructor=et,et.superclass=S.prototype;function et(t){arguments.length>0&&this.init(t)}et.prototype.init=function(t){this.variable=t},et.prototype.toString=function(){return"$"+this.variable},et.prototype.evaluate=function(t){var r=c.resolveQName(this.variable,t.namespaceResolver,t.contextNode,!1);if(r[0]==null)throw new Error("Cannot resolve QName "+fn);var e=t.variableResolver.getVariable(r[1],r[0]);if(!e)throw tt.fromMessage("Undeclared variable: "+this.toString());return e},Z.prototype=new S,Z.prototype.constructor=Z,Z.superclass=S.prototype;function Z(t,r){arguments.length>0&&this.init(t,r)}Z.prototype.init=function(t,r){this.functionName=t,this.arguments=r},Z.prototype.toString=function(){for(var t=this.functionName+"(",r=0;r<this.arguments.length;r++)r>0&&(t+=", "),t+=this.arguments[r].toString();return t+")"},Z.prototype.evaluate=function(t){var r=B.getFunctionFromContext(this.functionName,t);if(!r)throw new Error("Unknown function "+this.functionName);var e=[t].concat(this.arguments);return r.apply(t.functionResolver.thisArg,e)};var C=new Object;C.equals=function(t,r){return t.equals(r)},C.notequal=function(t,r){return t.notequal(r)},C.lessthan=function(t,r){return t.lessthan(r)},C.greaterthan=function(t,r){return t.greaterthan(r)},C.lessthanorequal=function(t,r){return t.lessthanorequal(r)},C.greaterthanorequal=function(t,r){return t.greaterthanorequal(r)},g.prototype=new S,g.prototype.constructor=g,g.superclass=S.prototype;function g(t){arguments.length>0&&this.init(t)}g.prototype.init=function(t){this.str=String(t)},g.prototype.toString=function(){return this.str},g.prototype.evaluate=function(t){return this},g.prototype.string=function(){return this},g.prototype.number=function(){return new E(this.str)},g.prototype.bool=function(){return new x(this.str)},g.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},g.prototype.stringValue=function(){return this.str},g.prototype.numberValue=function(){return this.number().numberValue()},g.prototype.booleanValue=function(){return this.bool().booleanValue()},g.prototype.equals=function(t){return c.instance_of(t,x)?this.bool().equals(t):c.instance_of(t,E)?this.number().equals(t):c.instance_of(t,f)?t.compareWithString(this,C.equals):new x(this.str==t.str)},g.prototype.notequal=function(t){return c.instance_of(t,x)?this.bool().notequal(t):c.instance_of(t,E)?this.number().notequal(t):c.instance_of(t,f)?t.compareWithString(this,C.notequal):new x(this.str!=t.str)},g.prototype.lessthan=function(t){return this.number().lessthan(t)},g.prototype.greaterthan=function(t){return this.number().greaterthan(t)},g.prototype.lessthanorequal=function(t){return this.number().lessthanorequal(t)},g.prototype.greaterthanorequal=function(t){return this.number().greaterthanorequal(t)},E.prototype=new S,E.prototype.constructor=E,E.superclass=S.prototype;function E(t){arguments.length>0&&this.init(t)}E.prototype.init=function(t){this.num=typeof t=="string"?this.parse(t):Number(t)},E.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,E.prototype.parse=function(t){return this.numberFormat.test(t)?parseFloat(t):Number.NaN};function Ht(t){for(var r=t.split("e-"),e=r[0].replace(".",""),o=Number(r[1]),n=0;n<o-1;n+=1)e="0"+e;return"0."+e}function Gt(t){for(var r=t.split("e"),e=r[0].replace(".",""),o=Number(r[1]),n=o+1-e.length,s=0;s<n;s+=1)e+="0";return e}E.prototype.toString=function(){var t=this.num.toString();return t.indexOf("e-")!==-1?Ht(t):t.indexOf("e")!==-1?Gt(t):t},E.prototype.evaluate=function(t){return this},E.prototype.string=function(){return new g(this.toString())},E.prototype.number=function(){return this},E.prototype.bool=function(){return new x(this.num)},E.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},E.prototype.stringValue=function(){return this.string().stringValue()},E.prototype.numberValue=function(){return this.num},E.prototype.booleanValue=function(){return this.bool().booleanValue()},E.prototype.negate=function(){return new E(-this.num)},E.prototype.equals=function(t){return c.instance_of(t,x)?this.bool().equals(t):c.instance_of(t,g)?this.equals(t.number()):c.instance_of(t,f)?t.compareWithNumber(this,C.equals):new x(this.num==t.num)},E.prototype.notequal=function(t){return c.instance_of(t,x)?this.bool().notequal(t):c.instance_of(t,g)?this.notequal(t.number()):c.instance_of(t,f)?t.compareWithNumber(this,C.notequal):new x(this.num!=t.num)},E.prototype.lessthan=function(t){return c.instance_of(t,f)?t.compareWithNumber(this,C.greaterthan):c.instance_of(t,x)||c.instance_of(t,g)?this.lessthan(t.number()):new x(this.num<t.num)},E.prototype.greaterthan=function(t){return c.instance_of(t,f)?t.compareWithNumber(this,C.lessthan):c.instance_of(t,x)||c.instance_of(t,g)?this.greaterthan(t.number()):new x(this.num>t.num)},E.prototype.lessthanorequal=function(t){return c.instance_of(t,f)?t.compareWithNumber(this,C.greaterthanorequal):c.instance_of(t,x)||c.instance_of(t,g)?this.lessthanorequal(t.number()):new x(this.num<=t.num)},E.prototype.greaterthanorequal=function(t){return c.instance_of(t,f)?t.compareWithNumber(this,C.lessthanorequal):c.instance_of(t,x)||c.instance_of(t,g)?this.greaterthanorequal(t.number()):new x(this.num>=t.num)},E.prototype.plus=function(t){return new E(this.num+t.num)},E.prototype.minus=function(t){return new E(this.num-t.num)},E.prototype.multiply=function(t){return new E(this.num*t.num)},E.prototype.div=function(t){return new E(this.num/t.num)},E.prototype.mod=function(t){return new E(this.num%t.num)},x.prototype=new S,x.prototype.constructor=x,x.superclass=S.prototype;function x(t){arguments.length>0&&this.init(t)}x.prototype.init=function(t){this.b=Boolean(t)},x.prototype.toString=function(){return this.b.toString()},x.prototype.evaluate=function(t){return this},x.prototype.string=function(){return new g(this.b)},x.prototype.number=function(){return new E(this.b)},x.prototype.bool=function(){return this},x.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},x.prototype.stringValue=function(){return this.string().stringValue()},x.prototype.numberValue=function(){return this.number().numberValue()},x.prototype.booleanValue=function(){return this.b},x.prototype.not=function(){return new x(!this.b)},x.prototype.equals=function(t){return c.instance_of(t,g)||c.instance_of(t,E)?this.equals(t.bool()):c.instance_of(t,f)?t.compareWithBoolean(this,C.equals):new x(this.b==t.b)},x.prototype.notequal=function(t){return c.instance_of(t,g)||c.instance_of(t,E)?this.notequal(t.bool()):c.instance_of(t,f)?t.compareWithBoolean(this,C.notequal):new x(this.b!=t.b)},x.prototype.lessthan=function(t){return this.number().lessthan(t)},x.prototype.greaterthan=function(t){return this.number().greaterthan(t)},x.prototype.lessthanorequal=function(t){return this.number().lessthanorequal(t)},x.prototype.greaterthanorequal=function(t){return this.number().greaterthanorequal(t)},x.true_=new x(!0),x.false_=new x(!1),O.prototype=new Object,O.prototype.constructor=O,O.superclass=Object.prototype;function O(t){this.init(t)}O.prototype.init=function(t){this.left=null,this.right=null,this.node=t,this.depth=1},O.prototype.balance=function(){var t=this.left==null?0:this.left.depth,r=this.right==null?0:this.right.depth;if(t>r+1){var e=this.left.left==null?0:this.left.left.depth,o=this.left.right==null?0:this.left.right.depth;e<o&&this.left.rotateRR(),this.rotateLL()}else if(t+1<r){var n=this.right.right==null?0:this.right.right.depth,s=this.right.left==null?0:this.right.left.depth;s>n&&this.right.rotateLL(),this.rotateRR()}},O.prototype.rotateLL=function(){var t=this.node,r=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=r,this.right.node=t,this.right.updateInNewLocation(),this.updateInNewLocation()},O.prototype.rotateRR=function(){var t=this.node,r=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=r,this.left.node=t,this.left.updateInNewLocation(),this.updateInNewLocation()},O.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},O.prototype.getDepthFromChildren=function(){this.depth=this.node==null?0:1,this.left!=null&&(this.depth=this.left.depth+1),this.right!=null&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)};function Wt(t,r){if(t===r)return 0;if(t.compareDocumentPosition){var e=t.compareDocumentPosition(r);return e&1||e&10?1:e&20?-1:0}for(var o=0,n=0,s=t;s!=null;s=s.parentNode||s.ownerElement)o++;for(var l=r;l!=null;l=l.parentNode||l.ownerElement)n++;if(o>n){for(;o>n;)t=t.parentNode||t.ownerElement,o--;if(t===r)return 1}else if(n>o){for(;n>o;)r=r.parentNode||r.ownerElement,n--;if(t===r)return-1}for(var y=t.parentNode||t.ownerElement,w=r.parentNode||r.ownerElement;y!==w;)t=y,r=w,y=t.parentNode||t.ownerElement,w=r.parentNode||r.ownerElement;var p=c.isAttribute(t),A=c.isAttribute(r);if(p&&!A)return-1;if(!p&&A)return 1;if(y)for(var P=p?y.attributes:y.childNodes,b=P.length,lt=0;lt<b;lt+=1){var pt=P[lt];if(pt===t)return-1;if(pt===r)return 1}throw new Error("Unexpected: could not determine node order")}O.prototype.add=function(t){if(t===this.node)return!1;var r=Wt(t,this.node),e=!1;return r==-1?this.left==null?(this.left=new O(t),e=!0):(e=this.left.add(t),e&&this.balance()):r==1&&(this.right==null?(this.right=new O(t),e=!0):(e=this.right.add(t),e&&this.balance())),e&&this.getDepthFromChildren(),e},f.prototype=new S,f.prototype.constructor=f,f.superclass=S.prototype;function f(){this.init()}f.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},f.prototype.toString=function(){var t=this.first();return t==null?"":this.stringForNode(t)},f.prototype.evaluate=function(t){return this},f.prototype.string=function(){return new g(this.toString())},f.prototype.stringValue=function(){return this.toString()},f.prototype.number=function(){return new E(this.string())},f.prototype.numberValue=function(){return Number(this.string())},f.prototype.bool=function(){return new x(this.booleanValue())},f.prototype.booleanValue=function(){return!!this.size},f.prototype.nodeset=function(){return this},f.prototype.stringForNode=function(t){return t.nodeType==9||t.nodeType==1||t.nodeType===11?this.stringForContainerNode(t):t.nodeType===2?t.value||t.nodeValue:t.isNamespaceNode?t.namespace:t.nodeValue},f.prototype.stringForContainerNode=function(t){for(var r="",e=t.firstChild;e!=null;e=e.nextSibling){var o=e.nodeType;(o===1||o===3||o===4||o===9||o===11)&&(r+=this.stringForNode(e))}return r},f.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new O(this.nodes[0]);for(var t=1;t<this.nodes.length;t+=1)this.tree.add(this.nodes[t])}return this.tree},f.prototype.first=function(){var t=this.buildTree();if(t==null)return null;for(;t.left!=null;)t=t.left;return t.node},f.prototype.add=function(t){for(var r=0;r<this.nodes.length;r+=1)if(t===this.nodes[r])return;this.tree=null,this.nodes.push(t),this.size+=1},f.prototype.addArray=function(t){var r=this;L(function(e){r.add(e)},t)},f.prototype.toArray=function(){var t=[];return this.toArrayRec(this.buildTree(),t),t},f.prototype.toArrayRec=function(t,r){t!=null&&(this.toArrayRec(t.left,r),r.push(t.node),this.toArrayRec(t.right,r))},f.prototype.toUnsortedArray=function(){return this.nodes.slice()},f.prototype.compareWithString=function(t,r){for(var e=this.toUnsortedArray(),o=0;o<e.length;o++){var n=e[o],s=new g(this.stringForNode(n)),l=r(s,t);if(l.booleanValue())return l}return new x(!1)},f.prototype.compareWithNumber=function(t,r){for(var e=this.toUnsortedArray(),o=0;o<e.length;o++){var n=e[o],s=new E(this.stringForNode(n)),l=r(s,t);if(l.booleanValue())return l}return new x(!1)},f.prototype.compareWithBoolean=function(t,r){return r(this.bool(),t)},f.prototype.compareWithNodeSet=function(t,r){for(var e=this.toUnsortedArray(),o=function(y,w){return r(w,y)},n=0;n<e.length;n++){var s=new g(this.stringForNode(e[n])),l=t.compareWithString(s,o);if(l.booleanValue())return l}return new x(!1)},f.compareWith=dt(function(t,r){return c.instance_of(r,g)?this.compareWithString(r,t):c.instance_of(r,E)?this.compareWithNumber(r,t):c.instance_of(r,x)?this.compareWithBoolean(r,t):this.compareWithNodeSet(r,t)}),f.prototype.equals=f.compareWith(C.equals),f.prototype.notequal=f.compareWith(C.notequal),f.prototype.lessthan=f.compareWith(C.lessthan),f.prototype.greaterthan=f.compareWith(C.greaterthan),f.prototype.lessthanorequal=f.compareWith(C.lessthanorequal),f.prototype.greaterthanorequal=f.compareWith(C.greaterthanorequal),f.prototype.union=function(t){var r=new f;return r.addArray(this.toUnsortedArray()),r.addArray(t.toUnsortedArray()),r},nt.prototype=new Object,nt.prototype.constructor=nt,nt.superclass=Object.prototype;function nt(t,r,e){this.isXPathNamespace=!0,this.ownerDocument=e.ownerDocument,this.nodeName="#namespace",this.prefix=t,this.localName=t,this.namespaceURI=r,this.nodeValue=r,this.ownerElement=e,this.nodeType=nt.XPATH_NAMESPACE_NODE}nt.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},z.prototype=new Object,z.prototype.constructor=z,z.superclass=Object.prototype;function z(t,r,e){this.variableResolver=t!=null?t:new at,this.namespaceResolver=r!=null?r:new ot,this.functionResolver=e!=null?e:new B}z.prototype.extend=function(t){return yt(new z,this,t)},at.prototype=new Object,at.prototype.constructor=at,at.superclass=Object.prototype;function at(){}at.prototype.getVariable=function(t,r){return null},B.prototype=new Object,B.prototype.constructor=B,B.superclass=Object.prototype;function B(t){this.thisArg=t!=null?t:d,this.functions=new Object,this.addStandardFunctions()}B.prototype.addStandardFunctions=function(){this.functions["{}last"]=d.last,this.functions["{}position"]=d.position,this.functions["{}count"]=d.count,this.functions["{}id"]=d.id,this.functions["{}local-name"]=d.localName,this.functions["{}namespace-uri"]=d.namespaceURI,this.functions["{}name"]=d.name,this.functions["{}string"]=d.string,this.functions["{}concat"]=d.concat,this.functions["{}starts-with"]=d.startsWith,this.functions["{}contains"]=d.contains,this.functions["{}substring-before"]=d.substringBefore,this.functions["{}substring-after"]=d.substringAfter,this.functions["{}substring"]=d.substring,this.functions["{}string-length"]=d.stringLength,this.functions["{}normalize-space"]=d.normalizeSpace,this.functions["{}translate"]=d.translate,this.functions["{}boolean"]=d.boolean_,this.functions["{}not"]=d.not,this.functions["{}true"]=d.true_,this.functions["{}false"]=d.false_,this.functions["{}lang"]=d.lang,this.functions["{}number"]=d.number,this.functions["{}sum"]=d.sum,this.functions["{}floor"]=d.floor,this.functions["{}ceiling"]=d.ceiling,this.functions["{}round"]=d.round},B.prototype.addFunction=function(t,r,e){this.functions["{"+t+"}"+r]=e},B.getFunctionFromContext=function(t,r){var e=c.resolveQName(t,r.namespaceResolver,r.contextNode,!1);if(e[0]===null)throw new Error("Cannot resolve QName "+name);return r.functionResolver.getFunction(e[1],e[0])},B.prototype.getFunction=function(t,r){return this.functions["{"+r+"}"+t]},ot.prototype=new Object,ot.prototype.constructor=ot,ot.superclass=Object.prototype;function ot(){}ot.prototype.getNamespace=function(t,r){if(t=="xml")return R.XML_NAMESPACE_URI;if(t=="xmlns")return R.XMLNS_NAMESPACE_URI;for(r.nodeType==9?r=r.documentElement:r.nodeType==2?r=N.getOwnerElement(r):r.nodeType!=1&&(r=r.parentNode);r!=null&&r.nodeType==1;){for(var e=r.attributes,o=0;o<e.length;o++){var n=e.item(o),s=n.name||n.nodeName;if(s==="xmlns"&&t===""||s==="xmlns:"+t)return String(n.value||n.nodeValue)}r=r.parentNode}return null};var d=new Object;d.last=function(t){if(arguments.length!=1)throw new Error("Function last expects ()");return new E(t.contextSize)},d.position=function(t){if(arguments.length!=1)throw new Error("Function position expects ()");return new E(t.contextPosition)},d.count=function(){var t=arguments[0],r;if(arguments.length!=2||!c.instance_of(r=arguments[1].evaluate(t),f))throw new Error("Function count expects (node-set)");return new E(r.size)},d.id=function(){var t=arguments[0],r;if(arguments.length!=2)throw new Error("Function id expects (object)");r=arguments[1].evaluate(t),c.instance_of(r,f)?r=r.toArray().join(" "):r=r.stringValue();for(var e=r.split(/[\x0d\x0a\x09\x20]+/),o=new f,n=t.contextNode.nodeType==9?t.contextNode:t.contextNode.ownerDocument,s=0;s<e.length;s++){var l;n.getElementById?l=n.getElementById(e[s]):l=c.getElementById(n,e[s]),l!=null&&o.add(l)}return o},d.localName=function(t,r){var e;if(arguments.length==1)e=t.contextNode;else if(arguments.length==2)e=r.evaluate(t).first();else throw new Error("Function local-name expects (node-set?)");return e==null?new g(""):new g(e.localName||e.baseName||e.target||e.nodeName||"")},d.namespaceURI=function(){var t=arguments[0],r;if(arguments.length==1)r=t.contextNode;else if(arguments.length==2)r=arguments[1].evaluate(t).first();else throw new Error("Function namespace-uri expects (node-set?)");return r==null?new g(""):new g(r.namespaceURI)},d.name=function(){var t=arguments[0],r;if(arguments.length==1)r=t.contextNode;else if(arguments.length==2)r=arguments[1].evaluate(t).first();else throw new Error("Function name expects (node-set?)");return r==null?new g(""):r.nodeType==1?new g(r.nodeName):r.nodeType==2?new g(r.name||r.nodeName):r.nodeType===7?new g(r.target||r.nodeName):r.localName==null?new g(""):new g(r.localName)},d.string=function(){var t=arguments[0];if(arguments.length==1)return new g(f.prototype.stringForNode(t.contextNode));if(arguments.length==2)return arguments[1].evaluate(t).string();throw new Error("Function string expects (object?)")},d.concat=function(t){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var r="",e=1;e<arguments.length;e++)r+=arguments[e].evaluate(t).stringValue();return new g(r)},d.startsWith=function(){var t=arguments[0];if(arguments.length!=3)throw new Error("Function startsWith expects (string, string)");var r=arguments[1].evaluate(t).stringValue(),e=arguments[2].evaluate(t).stringValue();return new x(r.substring(0,e.length)==e)},d.contains=function(){var t=arguments[0];if(arguments.length!=3)throw new Error("Function contains expects (string, string)");var r=arguments[1].evaluate(t).stringValue(),e=arguments[2].evaluate(t).stringValue();return new x(r.indexOf(e)!==-1)},d.substringBefore=function(){var t=arguments[0];if(arguments.length!=3)throw new Error("Function substring-before expects (string, string)");var r=arguments[1].evaluate(t).stringValue(),e=arguments[2].evaluate(t).stringValue();return new g(r.substring(0,r.indexOf(e)))},d.substringAfter=function(){var t=arguments[0];if(arguments.length!=3)throw new Error("Function substring-after expects (string, string)");var r=arguments[1].evaluate(t).stringValue(),e=arguments[2].evaluate(t).stringValue();if(e.length==0)return new g(r);var o=r.indexOf(e);return o==-1?new g(""):new g(r.substring(o+e.length))},d.substring=function(){var t=arguments[0];if(!(arguments.length==3||arguments.length==4))throw new Error("Function substring expects (string, number, number?)");var r=arguments[1].evaluate(t).stringValue(),e=Math.round(arguments[2].evaluate(t).numberValue())-1,o=arguments.length==4?e+Math.round(arguments[3].evaluate(t).numberValue()):void 0;return new g(r.substring(e,o))},d.stringLength=function(){var t=arguments[0],r;if(arguments.length==1)r=f.prototype.stringForNode(t.contextNode);else if(arguments.length==2)r=arguments[1].evaluate(t).stringValue();else throw new Error("Function string-length expects (string?)");return new E(r.length)},d.normalizeSpace=function(){var t=arguments[0],r;if(arguments.length==1)r=f.prototype.stringForNode(t.contextNode);else if(arguments.length==2)r=arguments[1].evaluate(t).stringValue();else throw new Error("Function normalize-space expects (string?)");for(var e=0,o=r.length-1;c.isSpace(r.charCodeAt(o));)o--;for(var n="";e<=o&&c.isSpace(r.charCodeAt(e));)e++;for(;e<=o;)if(c.isSpace(r.charCodeAt(e)))for(n+=" ";e<=o&&c.isSpace(r.charCodeAt(e));)e++;else n+=r.charAt(e),e++;return new g(n)},d.translate=function(t,r,e,o){if(arguments.length!=4)throw new Error("Function translate expects (string, string, string)");var n=r.evaluate(t).stringValue(),s=e.evaluate(t).stringValue(),l=o.evaluate(t).stringValue(),y=st(function(p,A,P){return A in p||(p[A]=P>l.length?"":l[P]),p},{},s),w=ut("",_(function(p){return p in y?y[p]:p},n));return new g(w)},d.boolean_=function(){var t=arguments[0];if(arguments.length!=2)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(t).bool()},d.not=function(t,r){if(arguments.length!=2)throw new Error("Function not expects (object)");return r.evaluate(t).bool().not()},d.true_=function(){if(arguments.length!=1)throw new Error("Function true expects ()");return x.true_},d.false_=function(){if(arguments.length!=1)throw new Error("Function false expects ()");return x.false_},d.lang=function(){var t=arguments[0];if(arguments.length!=2)throw new Error("Function lang expects (string)");for(var r,e=t.contextNode;e!=null&&e.nodeType!=9;e=e.parentNode){var o=e.getAttributeNS(R.XML_NAMESPACE_URI,"lang");if(o!=null){r=String(o);break}}if(r==null)return x.false_;var n=arguments[1].evaluate(t).stringValue();return new x(r.substring(0,n.length)==n&&(r.length==n.length||r.charAt(n.length)=="-"))},d.number=function(){var t=arguments[0];if(!(arguments.length==1||arguments.length==2))throw new Error("Function number expects (object?)");return arguments.length==1?new E(f.prototype.stringForNode(t.contextNode)):arguments[1].evaluate(t).number()},d.sum=function(){var t=arguments[0],r;if(arguments.length!=2||!c.instance_of(r=arguments[1].evaluate(t),f))throw new Error("Function sum expects (node-set)");r=r.toUnsortedArray();for(var e=0,o=0;o<r.length;o++)e+=new E(f.prototype.stringForNode(r[o])).numberValue();return new E(e)},d.floor=function(){var t=arguments[0];if(arguments.length!=2)throw new Error("Function floor expects (number)");return new E(Math.floor(arguments[1].evaluate(t).numberValue()))},d.ceiling=function(){var t=arguments[0];if(arguments.length!=2)throw new Error("Function ceiling expects (number)");return new E(Math.ceil(arguments[1].evaluate(t).numberValue()))},d.round=function(){var t=arguments[0];if(arguments.length!=2)throw new Error("Function round expects (number)");return new E(Math.round(arguments[1].evaluate(t).numberValue()))};var c=new Object;c.isAttribute=function(t){return t&&(t.nodeType===2||t.ownerElement)},c.splitQName=function(t){var r=t.indexOf(":");return r==-1?[null,t]:[t.substring(0,r),t.substring(r+1)]},c.resolveQName=function(t,r,e,o){var n=c.splitQName(t);return n[0]!=null?n[0]=r.getNamespace(n[0],e):o?(n[0]=r.getNamespace("",e),n[0]==null&&(n[0]="")):n[0]="",n},c.isSpace=function(t){return t==9||t==13||t==10||t==32},c.isLetter=function(t){return t>=65&&t<=90||t>=97&&t<=122||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=255||t>=256&&t<=305||t>=308&&t<=318||t>=321&&t<=328||t>=330&&t<=382||t>=384&&t<=451||t>=461&&t<=496||t>=500&&t<=501||t>=506&&t<=535||t>=592&&t<=680||t>=699&&t<=705||t==902||t>=904&&t<=906||t==908||t>=910&&t<=929||t>=931&&t<=974||t>=976&&t<=982||t==986||t==988||t==990||t==992||t>=994&&t<=1011||t>=1025&&t<=1036||t>=1038&&t<=1103||t>=1105&&t<=1116||t>=1118&&t<=1153||t>=1168&&t<=1220||t>=1223&&t<=1224||t>=1227&&t<=1228||t>=1232&&t<=1259||t>=1262&&t<=1269||t>=1272&&t<=1273||t>=1329&&t<=1366||t==1369||t>=1377&&t<=1414||t>=1488&&t<=1514||t>=1520&&t<=1522||t>=1569&&t<=1594||t>=1601&&t<=1610||t>=1649&&t<=1719||t>=1722&&t<=1726||t>=1728&&t<=1742||t>=1744&&t<=1747||t==1749||t>=1765&&t<=1766||t>=2309&&t<=2361||t==2365||t>=2392&&t<=2401||t>=2437&&t<=2444||t>=2447&&t<=2448||t>=2451&&t<=2472||t>=2474&&t<=2480||t==2482||t>=2486&&t<=2489||t>=2524&&t<=2525||t>=2527&&t<=2529||t>=2544&&t<=2545||t>=2565&&t<=2570||t>=2575&&t<=2576||t>=2579&&t<=2600||t>=2602&&t<=2608||t>=2610&&t<=2611||t>=2613&&t<=2614||t>=2616&&t<=2617||t>=2649&&t<=2652||t==2654||t>=2674&&t<=2676||t>=2693&&t<=2699||t==2701||t>=2703&&t<=2705||t>=2707&&t<=2728||t>=2730&&t<=2736||t>=2738&&t<=2739||t>=2741&&t<=2745||t==2749||t==2784||t>=2821&&t<=2828||t>=2831&&t<=2832||t>=2835&&t<=2856||t>=2858&&t<=2864||t>=2866&&t<=2867||t>=2870&&t<=2873||t==2877||t>=2908&&t<=2909||t>=2911&&t<=2913||t>=2949&&t<=2954||t>=2958&&t<=2960||t>=2962&&t<=2965||t>=2969&&t<=2970||t==2972||t>=2974&&t<=2975||t>=2979&&t<=2980||t>=2984&&t<=2986||t>=2990&&t<=2997||t>=2999&&t<=3001||t>=3077&&t<=3084||t>=3086&&t<=3088||t>=3090&&t<=3112||t>=3114&&t<=3123||t>=3125&&t<=3129||t>=3168&&t<=3169||t>=3205&&t<=3212||t>=3214&&t<=3216||t>=3218&&t<=3240||t>=3242&&t<=3251||t>=3253&&t<=3257||t==3294||t>=3296&&t<=3297||t>=3333&&t<=3340||t>=3342&&t<=3344||t>=3346&&t<=3368||t>=3370&&t<=3385||t>=3424&&t<=3425||t>=3585&&t<=3630||t==3632||t>=3634&&t<=3635||t>=3648&&t<=3653||t>=3713&&t<=3714||t==3716||t>=3719&&t<=3720||t==3722||t==3725||t>=3732&&t<=3735||t>=3737&&t<=3743||t>=3745&&t<=3747||t==3749||t==3751||t>=3754&&t<=3755||t>=3757&&t<=3758||t==3760||t>=3762&&t<=3763||t==3773||t>=3776&&t<=3780||t>=3904&&t<=3911||t>=3913&&t<=3945||t>=4256&&t<=4293||t>=4304&&t<=4342||t==4352||t>=4354&&t<=4355||t>=4357&&t<=4359||t==4361||t>=4363&&t<=4364||t>=4366&&t<=4370||t==4412||t==4414||t==4416||t==4428||t==4430||t==4432||t>=4436&&t<=4437||t==4441||t>=4447&&t<=4449||t==4451||t==4453||t==4455||t==4457||t>=4461&&t<=4462||t>=4466&&t<=4467||t==4469||t==4510||t==4520||t==4523||t>=4526&&t<=4527||t>=4535&&t<=4536||t==4538||t>=4540&&t<=4546||t==4587||t==4592||t==4601||t>=7680&&t<=7835||t>=7840&&t<=7929||t>=7936&&t<=7957||t>=7960&&t<=7965||t>=7968&&t<=8005||t>=8008&&t<=8013||t>=8016&&t<=8023||t==8025||t==8027||t==8029||t>=8031&&t<=8061||t>=8064&&t<=8116||t>=8118&&t<=8124||t==8126||t>=8130&&t<=8132||t>=8134&&t<=8140||t>=8144&&t<=8147||t>=8150&&t<=8155||t>=8160&&t<=8172||t>=8178&&t<=8180||t>=8182&&t<=8188||t==8486||t>=8490&&t<=8491||t==8494||t>=8576&&t<=8578||t>=12353&&t<=12436||t>=12449&&t<=12538||t>=12549&&t<=12588||t>=44032&&t<=55203||t>=19968&&t<=40869||t==12295||t>=12321&&t<=12329},c.isNCNameChar=function(t){return t>=48&&t<=57||t>=1632&&t<=1641||t>=1776&&t<=1785||t>=2406&&t<=2415||t>=2534&&t<=2543||t>=2662&&t<=2671||t>=2790&&t<=2799||t>=2918&&t<=2927||t>=3047&&t<=3055||t>=3174&&t<=3183||t>=3302&&t<=3311||t>=3430&&t<=3439||t>=3664&&t<=3673||t>=3792&&t<=3801||t>=3872&&t<=3881||t==46||t==45||t==95||c.isLetter(t)||t>=768&&t<=837||t>=864&&t<=865||t>=1155&&t<=1158||t>=1425&&t<=1441||t>=1443&&t<=1465||t>=1467&&t<=1469||t==1471||t>=1473&&t<=1474||t==1476||t>=1611&&t<=1618||t==1648||t>=1750&&t<=1756||t>=1757&&t<=1759||t>=1760&&t<=1764||t>=1767&&t<=1768||t>=1770&&t<=1773||t>=2305&&t<=2307||t==2364||t>=2366&&t<=2380||t==2381||t>=2385&&t<=2388||t>=2402&&t<=2403||t>=2433&&t<=2435||t==2492||t==2494||t==2495||t>=2496&&t<=2500||t>=2503&&t<=2504||t>=2507&&t<=2509||t==2519||t>=2530&&t<=2531||t==2562||t==2620||t==2622||t==2623||t>=2624&&t<=2626||t>=2631&&t<=2632||t>=2635&&t<=2637||t>=2672&&t<=2673||t>=2689&&t<=2691||t==2748||t>=2750&&t<=2757||t>=2759&&t<=2761||t>=2763&&t<=2765||t>=2817&&t<=2819||t==2876||t>=2878&&t<=2883||t>=2887&&t<=2888||t>=2891&&t<=2893||t>=2902&&t<=2903||t>=2946&&t<=2947||t>=3006&&t<=3010||t>=3014&&t<=3016||t>=3018&&t<=3021||t==3031||t>=3073&&t<=3075||t>=3134&&t<=3140||t>=3142&&t<=3144||t>=3146&&t<=3149||t>=3157&&t<=3158||t>=3202&&t<=3203||t>=3262&&t<=3268||t>=3270&&t<=3272||t>=3274&&t<=3277||t>=3285&&t<=3286||t>=3330&&t<=3331||t>=3390&&t<=3395||t>=3398&&t<=3400||t>=3402&&t<=3405||t==3415||t==3633||t>=3636&&t<=3642||t>=3655&&t<=3662||t==3761||t>=3764&&t<=3769||t>=3771&&t<=3772||t>=3784&&t<=3789||t>=3864&&t<=3865||t==3893||t==3895||t==3897||t==3902||t==3903||t>=3953&&t<=3972||t>=3974&&t<=3979||t>=3984&&t<=3989||t==3991||t>=3993&&t<=4013||t>=4017&&t<=4023||t==4025||t>=8400&&t<=8412||t==8417||t>=12330&&t<=12335||t==12441||t==12442||t==183||t==720||t==721||t==903||t==1600||t==3654||t==3782||t==12293||t>=12337&&t<=12341||t>=12445&&t<=12446||t>=12540&&t<=12542},c.coalesceText=function(t){for(var r=t.firstChild;r!=null;r=r.nextSibling)if(r.nodeType==3||r.nodeType==4){var e=r.nodeValue,o=r;for(r=r.nextSibling;r!=null&&(r.nodeType==3||r.nodeType==4);){e+=r.nodeValue;var n=r;r=r.nextSibling,n.parentNode.removeChild(n)}if(o.nodeType==4){var s=o.parentNode;if(o.nextSibling==null)s.removeChild(o),s.appendChild(s.ownerDocument.createTextNode(e));else{var l=o.nextSibling;s.removeChild(o),s.insertBefore(s.ownerDocument.createTextNode(e),l)}}else o.nodeValue=e;if(r==null)break}else r.nodeType==1&&c.coalesceText(r)},c.instance_of=function(t,r){for(;t!=null;){if(t.constructor===r)return!0;if(t===Object)return!1;t=t.constructor.superclass}return!1},c.getElementById=function(t,r){if(t.nodeType==1&&(t.getAttribute("id")==r||t.getAttributeNS(null,"id")==r))return t;for(var e=t.firstChild;e!=null;e=e.nextSibling){var o=c.getElementById(e,r);if(o!=null)return o}return null};var tt=function(){function t(e,o){var n=o?": "+o.toString():"";switch(e){case r.INVALID_EXPRESSION_ERR:return"Invalid expression"+n;case r.TYPE_ERR:return"Type error"+n}return null}function r(e,o,n){var s=Error.call(this,t(e,o)||n);return s.code=e,s.exception=o,s}return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.superclass=Error,r.prototype.toString=function(){return this.message},r.fromMessage=function(e,o){return new r(null,o,e)},r.INVALID_EXPRESSION_ERR=51,r.TYPE_ERR=52,r}();I.prototype={},I.prototype.constructor=I,I.superclass=Object.prototype;function I(t,r,e){this.xpath=e.parse(t),this.context=new z,this.context.namespaceResolver=new xt(r)}I.getOwnerDocument=function(t){return t.nodeType===9?t:t.ownerDocument},I.detectHtmlDom=function(t){if(!t)return!1;var r=I.getOwnerDocument(t);try{return r.implementation.hasFeature("HTML","2.0")}catch{return!0}},I.prototype.evaluate=function(t,r,e){this.context.expressionContextNode=t,this.context.caseInsensitive=I.detectHtmlDom(t);var o=this.xpath.evaluate(this.context);return new m(o,r)},xt.prototype={},xt.prototype.constructor=xt,xt.superclass=Object.prototype;function xt(t){this.xpathNSResolver=t}xt.prototype.getNamespace=function(t,r){return this.xpathNSResolver==null?null:this.xpathNSResolver.lookupNamespaceURI(t)},gt.prototype={},gt.prototype.constructor=gt,gt.superclass=Object.prototype;function gt(t){this.node=t,this.namespaceResolver=new ot}gt.prototype.lookupNamespaceURI=function(t){return this.namespaceResolver.getNamespace(t,this.node)},m.prototype={},m.prototype.constructor=m,m.superclass=Object.prototype;function m(t,r){switch(r==m.ANY_TYPE&&(t.constructor===g?r=m.STRING_TYPE:t.constructor===E?r=m.NUMBER_TYPE:t.constructor===x?r=m.BOOLEAN_TYPE:t.constructor===f&&(r=m.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=r,r){case m.NUMBER_TYPE:this.numberValue=t.numberValue();return;case m.STRING_TYPE:this.stringValue=t.stringValue();return;case m.BOOLEAN_TYPE:this.booleanValue=t.booleanValue();return;case m.ANY_UNORDERED_NODE_TYPE:case m.FIRST_ORDERED_NODE_TYPE:if(t.constructor===f){this.singleNodeValue=t.first();return}break;case m.UNORDERED_NODE_ITERATOR_TYPE:case m.ORDERED_NODE_ITERATOR_TYPE:if(t.constructor===f){this.invalidIteratorState=!1,this.nodes=t.toArray(),this.iteratorIndex=0;return}break;case m.UNORDERED_NODE_SNAPSHOT_TYPE:case m.ORDERED_NODE_SNAPSHOT_TYPE:if(t.constructor===f){this.nodes=t.toArray(),this.snapshotLength=this.nodes.length;return}break}throw new tt(tt.TYPE_ERR)}m.prototype.iterateNext=function(){if(this.resultType!=m.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=m.ORDERED_NODE_ITERATOR_TYPE)throw new tt(tt.TYPE_ERR);return this.nodes[this.iteratorIndex++]},m.prototype.snapshotItem=function(t){if(this.resultType!=m.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=m.ORDERED_NODE_SNAPSHOT_TYPE)throw new tt(tt.TYPE_ERR);return this.nodes[t]},m.ANY_TYPE=0,m.NUMBER_TYPE=1,m.STRING_TYPE=2,m.BOOLEAN_TYPE=3,m.UNORDERED_NODE_ITERATOR_TYPE=4,m.ORDERED_NODE_ITERATOR_TYPE=5,m.UNORDERED_NODE_SNAPSHOT_TYPE=6,m.ORDERED_NODE_SNAPSHOT_TYPE=7,m.ANY_UNORDERED_NODE_TYPE=8,m.FIRST_ORDERED_NODE_TYPE=9;function Dt(t,r){t.createExpression=function(e,o){try{return new I(e,o,r)}catch(n){throw new tt(tt.INVALID_EXPRESSION_ERR,n)}},t.createNSResolver=function(e){return new gt(e)},t.evaluate=function(e,o,n,s,l){if(s<0||s>9)throw{code:0,toString:function(){return"Request type not supported"}};return t.createExpression(e,n,r).evaluate(o,s,l)}}try{var Ot=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(Ot=!1)}catch{}Ot&&Dt(document,new i)}catch{}Dt(D,new i),function(){var t=new i,r=new ot,e=new B,o=new at;function n(u){return{getNamespace:function(v,F){var ht=u(v,F);return ht||r.getNamespace(v,F)}}}function s(u){return n(u.getNamespace.bind(u))}function l(u){return n(function(v){return u[v]})}function y(u){return u&&typeof u.getNamespace=="function"?s(u):typeof u=="function"?n(u):typeof u=="object"?l(u):r}function w(u){if(u===null||typeof u>"u"||u instanceof g||u instanceof x||u instanceof E||u instanceof f)return u;switch(typeof u){case"string":return new g(u);case"boolean":return new x(u);case"number":return new E(u)}var v=new f;return v.addArray([].concat(u)),v}function p(u){return function(v){var F=Array.prototype.slice.call(arguments,1).map(function(Xt){return Xt.evaluate(v)}),ht=u.apply(this,[].concat(v,F));return w(ht)}}function A(u){return{getFunction:function(v,F){var ht=u(v,F);return ht?p(ht):e.getFunction(v,F)}}}function P(u){return A(u.getFunction.bind(u))}function b(u){return A(function(v){return u[v]})}function lt(u){return u&&typeof u.getFunction=="function"?P(u):typeof u=="function"?A(u):typeof u=="object"?b(u):e}function pt(u){return{getVariable:function(v,F){var ht=u(v,F);return w(ht)}}}function kt(u){if(u){if(typeof u.getVariable=="function")return pt(u.getVariable.bind(u));if(typeof u=="function")return pt(u);if(typeof u=="object")return pt(function(v){return u[v]})}return o}function Ft(u,v,F){u in F&&(v[u]=F[u])}function Yt(u){var v=new z;return u?(v.namespaceResolver=y(u.namespaces),v.functionResolver=lt(u.functions),v.variableResolver=kt(u.variables),v.expressionContextNode=u.node,Ft("allowAnyNamespaceForNoPrefix",v,u),Ft("isHtml",v,u)):v.namespaceResolver=r,v}function qt(u,v){var F=Yt(v);return u.evaluate(F)}var Qt={evaluate:function(u){return qt(this.expression,u)},evaluateNumber:function(u){return this.evaluate(u).numberValue()},evaluateString:function(u){return this.evaluate(u).stringValue()},evaluateBoolean:function(u){return this.evaluate(u).booleanValue()},evaluateNodeSet:function(u){return this.evaluate(u).nodeset()},select:function(u){return this.evaluateNodeSet(u).toArray()},select1:function(u){return this.select(u)[0]}};function jt(u){var v=t.parse(u);return Object.create(Qt,{expression:{value:v}})}D.parse=jt}(),yt(D,{XPath:R,XPathParser:i,XPathResult:m,Step:a,PathExpr:N,NodeTest:h,LocationPath:rt,OrOperation:M,AndOperation:V,BarOperation:K,EqualsOperation:H,NotEqualOperation:G,LessThanOperation:W,GreaterThanOperation:k,LessThanOrEqualOperation:Y,GreaterThanOrEqualOperation:q,PlusOperation:Q,MinusOperation:j,MultiplyOperation:X,DivOperation:J,ModOperation:$,UnaryMinusOperation:U,FunctionCall:Z,VariableReference:et,XPathContext:z,XNodeSet:f,XBoolean:x,XString:g,XNumber:E,NamespaceResolver:ot,FunctionResolver:B,VariableResolver:at,Utilities:c}),D.select=function(t,r,e){return D.selectWithResolver(t,r,null,e)},D.useNamespaces=function(t){var r={mappings:t||{},lookupNamespaceURI:function(e){return this.mappings[e]}};return function(e,o,n){return D.selectWithResolver(e,o,r,n)}},D.selectWithResolver=function(t,r,e,o){var n=new I(t,e,new i),s=m.ANY_TYPE,l=n.evaluate(r,s,null);return l.resultType==m.STRING_TYPE?l=l.stringValue:l.resultType==m.NUMBER_TYPE?l=l.numberValue:l.resultType==m.BOOLEAN_TYPE?l=l.booleanValue:(l=l.nodes,o&&(l=l[0])),l},D.select1=function(t,r){return D.select(t,r,!0)}})(Tt)})(It);const ur={class:"option"},ar=$t({__name:"index",props:{clipboardValue:null,renderOnSearch:{type:Boolean}},emits:["acceptClipboardCb"],setup(vt,{emit:Tt}){const D=vt,{t:dt}=Kt(),L=bt(`<tools>
	<tool id="1" >XPath Tester</tool>
	<tool id="2" >Regex Tester</tool>
	<tool id="3" >XML to JSON</tool>
</tools>`),st=bt(""),_=bt("//tool[position() > 1]"),At=()=>{if(L.value.length<=0){Pt.warning("Please enter your JSON object");return}if(_.value.length<=0){Pt.warning("Please enter the xpath");return}const mt=new ir.DOMParser().parseFromString(L.value);st.value=It.select(_.value,mt).join(`
`)};return Zt(async()=>{D.clipboardValue&&D.clipboardValue.likeXML()&&(L.value=D.clipboardValue.getOriginData(),Tt("acceptClipboardCb")),At()}),(mt,it)=>{const ft=nr("a-input");return tr(),zt(Et(Jt),null,{one:Bt(()=>[St(Et(rr),{modelValue:L.value,"onUpdate:modelValue":it[0]||(it[0]=ut=>L.value=ut),autofocus:"",class:"input",title:Et(dt)("xPath.input"),code:!0,onChange:At},null,8,["modelValue","title"])]),two:Bt(()=>[Ct("div",null,[Ct("p",ur,[Ct("span",null,er(Et(dt)("xPath.path")),1),St(ft,{value:_.value,"onUpdate:value":it[1]||(it[1]=ut=>_.value=ut),class:"opt",onChange:At},null,8,["value"])]),St(Et(sr),{result:st.value,"onUpdate:result":it[2]||(it[2]=ut=>st.value=ut),"result-desc":Et(dt)("xPath.output")},null,8,["result","result-desc"])])]),_:1})}}});const cr=or(ar,[["__scopeId","data-v-fa666f0f"]]);export{cr as default};
