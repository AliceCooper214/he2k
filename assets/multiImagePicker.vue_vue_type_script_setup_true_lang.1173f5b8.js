import{d as j,r as c,z as F,J as O,a9 as U,D,Y as z,o as _,e as w,c as p,b as g,g as B,cX as E,l as k,x as N,H as A,j as b}from"./index.954a2cbc.js";const S={key:0},T={style:{"margin-top":"8px"}},$=["src"],M=j({__name:"multiImagePicker",props:{pickHook:{type:Function,default:()=>{}},onLoadHook:{type:Function,default:()=>{}},removeHook:{type:Function,default:()=>{}}},setup(y,{expose:x}){const r=y,i=c(!1),m=c(""),u=c(""),t=F([]),s=[];O(()=>{V(),document.addEventListener("paste",h,!1)}),U(()=>{document.removeEventListener("paste",h)});const H=e=>{const o=t==null?void 0:t.findIndex(a=>a.uid===e.uid);t==null||t.splice(o,1),s==null||s.splice(o,1),r.removeHook()},I=()=>{t.length=0,s.length=0},P=e=>new Promise((o,a)=>{m.value=e.url||e.preview,i.value=!0,u.value=e.name||e.url.substring(e.url.lastIndexOf("/")+1)});D(()=>t,async(e,o)=>{await z(),r.onLoadHook()});const C=()=>{i.value=!1,u.value=""},R=e=>(t==null||t.push({uid:e.uid,name:e.name,status:"done",url:`file://${e.path}`}),f(e).then(o=>{const a=Object.assign(e,o);s.push(a),r.pickHook()}),!1),v=c(!1),V=()=>{navigator.clipboard.read().then(e=>{e[0].types[0].includes("image")?v.value=!0:v.value=!1})},h=async e=>{var a;let o=(a=e.clipboardData)==null?void 0:a.items[0];if((o==null?void 0:o.kind)=="file"){let n=o.getAsFile();n&&n.size!==0&&(t==null||t.push({uid:n.uid,name:n.name,status:"done",url:URL.createObjectURL(n)}),f(n).then(d=>{const l=Object.assign(n,d);s.push(l),r.pickHook()}))}},f=e=>new Promise((o,a)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=d=>{const l=new Image;l.src=d.target.result,l.onerror=a,l.onload=function(){o({width:this.width,height:this.height})}}});return x({fileList:s,clearImage:I}),(e,o)=>{const a=b("a-upload"),n=b("a-modal");return _(),w("div",null,[p(a,{"file-list":t,"list-type":"picture-card","before-upload":R,multiple:"",onPreview:P,onRemove:H},{default:g(()=>[(t==null?void 0:t.length)<8?(_(),w("div",S,[p(B(E)),k("div",T,N(e.$t("image.choose")),1)])):A("",!0)]),_:1},8,["file-list"]),p(n,{visible:i.value,title:u.value,footer:null,onCancel:C},{default:g(()=>[k("img",{alt:"example",style:{width:"100%"},src:m.value},null,8,$)]),_:1},8,["visible","title"])])}}});export{M as _};
