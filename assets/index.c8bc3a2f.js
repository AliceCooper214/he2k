import{dH as M,d as ae,r as x,J as ce,a as T,b as d,g as o,v as ie,o as C,l as le,bZ as A,b_ as D,c as f,cs as z,U as L,x as g,bY as k,dI as O,c5 as j,dJ as U,d7 as ue,d2 as de,d3 as fe,dF as ve,dG as V,H as pe,aR as me,bN as he,_ as ye}from"./index.954a2cbc.js";import{a as Q,i as ge}from"./index.eec0a9c6.js";var S={exports:{}},N={exports:{}},$e=(e,n)=>(n=n||(()=>{}),e.then(t=>new Promise(r=>{r(n())}).then(()=>t),t=>new Promise(r=>{r(n())}).then(()=>{throw t})));const Ee=$e;class X extends Error{constructor(n){super(n),this.name="TimeoutError"}}const W=(e,n,t)=>new Promise((r,a)=>{if(typeof n!="number"||n<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(n===1/0){r(e);return}const l=setTimeout(()=>{if(typeof t=="function"){try{r(t())}catch(c){a(c)}return}const v=typeof t=="string"?t:`Promise timed out after ${n} milliseconds`,u=t instanceof Error?t:new X(v);typeof e.cancel=="function"&&e.cancel(),a(u)},n);Ee(e.then(r,a),()=>{clearTimeout(l)})});N.exports=W;N.exports.default=W;N.exports.TimeoutError=X;const Y=N.exports,be=Symbol.asyncIterator||"@@asyncIterator",K=e=>{const n=e.on||e.addListener||e.addEventListener,t=e.off||e.removeListener||e.removeEventListener;if(!n||!t)throw new TypeError("Emitter is not compatible");return{addListener:n.bind(e),removeListener:t.bind(e)}},ee=e=>Array.isArray(e)?e:[e],te=(e,n,t)=>{let r;const a=new Promise((l,v)=>{if(t={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...t},!(t.count>=0&&(t.count===1/0||Number.isInteger(t.count))))throw new TypeError("The `count` option should be at least 0 or more");const u=ee(n),c=[],{addListener:p,removeListener:$}=K(e),y=(...h)=>{const w=t.multiArgs?h:h[0];t.filter&&!t.filter(w)||(c.push(w),t.count===c.length&&(r(),l(c)))},E=h=>{r(),v(h)};r=()=>{for(const h of u)$(h,y);for(const h of t.rejectionEvents)$(h,E)};for(const h of u)p(h,y);for(const h of t.rejectionEvents)p(h,E);t.resolveImmediately&&l(c)});if(a.cancel=r,typeof t.timeout=="number"){const l=Y(a,t.timeout);return l.cancel=r,l}return a},re=(e,n,t)=>{typeof t=="function"&&(t={filter:t}),t={...t,count:1,resolveImmediately:!1};const r=te(e,n,t),a=r.then(l=>l[0]);return a.cancel=r.cancel,a};S.exports=re;S.exports.default=re;S.exports.multiple=te;S.exports.iterator=(e,n,t)=>{typeof t=="function"&&(t={filter:t});const r=ee(n);t={rejectionEvents:["error"],resolutionEvents:[],limit:1/0,multiArgs:!1,...t};const{limit:a}=t;if(!(a>=0&&(a===1/0||Number.isInteger(a))))throw new TypeError("The `limit` option should be a non-negative integer or Infinity");if(a===0)return{[Symbol.asyncIterator](){return this},async next(){return{done:!0,value:void 0}}};const{addListener:v,removeListener:u}=K(e);let c=!1,p,$=!1;const y=[],E=[];let h=0,w=!1;const R=(...i)=>{h++,w=h===a;const I=t.multiArgs?i:i[0];if(y.length>0){const{resolve:F}=y.shift();F({done:!1,value:I}),w&&_();return}E.push(I),w&&_()},_=()=>{c=!0;for(const i of r)u(i,R);for(const i of t.rejectionEvents)u(i,s);for(const i of t.resolutionEvents)u(i,B);for(;y.length>0;){const{resolve:i}=y.shift();i({done:!0,value:void 0})}},s=(...i)=>{if(p=t.multiArgs?i:i[0],y.length>0){const{reject:I}=y.shift();I(p)}else $=!0;_()},B=(...i)=>{const I=t.multiArgs?i:i[0];if(!(t.filter&&!t.filter(I))){if(y.length>0){const{resolve:F}=y.shift();F({done:!0,value:I})}else E.push(I);_()}};for(const i of r)v(i,R);for(const i of t.rejectionEvents)v(i,s);for(const i of t.resolutionEvents)v(i,B);return{[be](){return this},async next(){if(E.length>0){const i=E.shift();return{done:c&&E.length===0&&!w,value:i}}if($)throw $=!1,p;return c?{done:!0,value:void 0}:new Promise((i,I)=>y.push({resolve:i,reject:I}))},async return(i){return _(),{done:c,value:i}}}};S.exports.TimeoutError=Y.TimeoutError;const q=async({isSecondTry:e=!1}={})=>{try{const n=new RTCPeerConnection({iceServers:[]});n.createDataChannel(""),n.createOffer(n.setLocalDescription.bind(n),()=>{});const{candidate:t}=await S.exports(n,"icecandidate",{timeout:1e4});if(n.close(),!(t&&t.candidate))return;const r=t.candidate.split(" ")[4];if(!r.endsWith(".local"))return r;if(e)return;const a=await navigator.mediaDevices.enumerateDevices(),l=new Set(a.map(({kind:c})=>c)),v={};if(l.has("audioinput"))v.audio=!0;else if(l.has("videoinput"))v.video=!0;else return;const u=await navigator.mediaDevices.getUserMedia(v);for(const c of u.getTracks())c.stop();return await q({isSecondTry:!0})}catch{}};async function we(){const e=await q();if(Q.v6(e))return e}async function Ie(){const e=await q();if(Q.v4(e))return e}const Z="[a-fA-F\\d:]",P=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${Z})|(?<=${Z})(?=\\s|$))`:"",b="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",m="[a-fA-F\\d]{1,4}",H=`
(?:
(?:${m}:){7}(?:${m}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${m}:){6}(?:${b}|:${m}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${m}:){5}(?::${b}|(?::${m}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${m}:){4}(?:(?::${m}){0,1}:${b}|(?::${m}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${m}:){3}(?:(?::${m}){0,2}:${b}|(?::${m}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${m}:){2}(?:(?::${m}){0,3}:${b}|(?::${m}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${m}:){1}(?:(?::${m}){0,4}:${b}|(?::${m}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${m}){0,5}:${b}|(?::${m}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),xe=new RegExp(`(?:^${b}$)|(?:^${H}$)`),Le=new RegExp(`^${b}$`),Pe=new RegExp(`^${H}$`),G=e=>e&&e.exact?xe:new RegExp(`(?:${P(e)}${b}${P(e)})|(?:${P(e)}${H}${P(e)})`,"g");G.v4=e=>e&&e.exact?Le:new RegExp(`${P(e)}${b}${P(e)}`,"g");G.v6=e=>e&&e.exact?Pe:new RegExp(`${P(e)}${H}${P(e)}`,"g");function _e(e){return G.v6({exact:!0}).test(e)}function Te(e){return G.v4({exact:!0}).test(e)}typeof M.homedir>"u"||M.homedir().replace(/\\/g,"/");class Ce extends Error{constructor(n){super("Could not get the public IP address",n),this.name="IpNotFoundError"}}class ne extends Error{constructor(){super("Request was cancelled"),this.name="CancelError"}get isCanceled(){return!0}}const se={timeout:5e3},Se={v4:["https://ipv4.icanhazip.com/","https://api.ipify.org/"],v6:["https://ipv6.icanhazip.com/","https://api6.ipify.org/"]},Ve=(e,n,t)=>{const r=new XMLHttpRequest;let a;const l=new Promise((v,u)=>{a=u,r.addEventListener("error",u,{once:!0}),r.addEventListener("timeout",u,{once:!0}),r.addEventListener("load",()=>{const c=r.responseText.trim();if(!c||!(t==="v6"?_e:Te)(c)){u();return}v(c)},{once:!0}),r.open("GET",e),r.timeout=n.timeout,r.send()});return l.cancel=()=>{r.abort(),a(new ne)},l},oe=(e,n)=>{let t;const r=async function(){var v;const a=[...Se[e],...(v=n.fallbackUrls)!=null?v:[]];let l;for(const u of a)try{return t=Ve(u,n,e),await t}catch(c){if(l=c,c instanceof ne)throw c}throw new Ce({cause:l})}();return r.cancel=()=>{t.cancel()},r};function Re(e){return oe("v4",{...se,...e})}function Ae(e){return oe("v6",{...se,...e})}function De(e){return J(e[0])+J(e[1])}function J(e){return String.fromCodePoint(127462-65+e.toUpperCase().charCodeAt(0))}const ze={class:"network-myip"},ke=ae({__name:"index",props:{renderOnSearch:{type:Boolean}},setup(e){const n=e,t=x("success"),r=x("success"),a=x("success"),l=x(""),v=x(""),u=x(""),c=x(""),p=x(),$=x("");ce(async()=>{await _()});const y=function(){Ie().then(s=>{l.value=s||""}).catch(()=>{l.value="",console.error("Get local IPv4 error")})},E=function(){we().then(s=>{v.value=s||""}).catch(s=>{v.value="",console.error("Get local IPv6 error",s)})},h=function(){t.value="loading",Re().then(s=>{u.value=s||"",t.value="success",n.renderOnSearch||R()}).catch(s=>{u.value="",t.value="error",console.error("Get public IPv4 error",s)})},w=function(){r.value="loading",Ae().then(s=>{c.value=s||"",r.value="success"}).catch(s=>{c.value="",r.value="error",console.error("Get public IPv6 error",s)})},R=function(){u.value?(a.value="loading",ge(u.value).then(s=>{p.value=s,$.value=De(ie.exports.get(s,["country","code"],"")),a.value="success"}).catch(s=>{console.error("Get public IP details error",s),p.value=void 0,$.value="",a.value="error"})):(p.value=void 0,$.value="")},_=async function(){n.renderOnSearch||(y(),E(),w()),h()};return(s,B)=>(C(),T(o(he),{"max-width":1280},{one:d(()=>[le("div",ze,[A(f(o(j),{"result-desc":s.$t("ip.local.ipv4"),result:l.value,size:"large"},{title:d(()=>[f(o(z),null,{default:d(()=>[L(g(s.$t("ip.local.ipv4")),1)]),_:1}),f(o(k),{type:"text",size:"small",ghost:"",onClick:y},{icon:d(()=>[f(o(O))]),_:1})]),_:1},8,["result-desc","result"]),[[D,!e.renderOnSearch]]),A(f(o(j),{"result-desc":s.$t("ip.local.ipv6"),result:v.value,size:"large"},{title:d(()=>[f(o(z),null,{default:d(()=>[L(g(s.$t("ip.local.ipv6")),1)]),_:1}),f(o(k),{type:"text",size:"small",ghost:"",onClick:E},{icon:d(()=>[f(o(O))]),_:1})]),_:1},8,["result-desc","result"]),[[D,!e.renderOnSearch]]),f(o(j),{"result-desc":s.$t("ip.public.ipv4"),result:u.value,size:"large"},{title:d(()=>[f(o(z),null,{default:d(()=>[L(g(s.$t("ip.public.ipv4")),1)]),_:1}),f(o(k),{type:"text",size:"small",ghost:"",onClick:h},{icon:d(()=>[t.value==="loading"?(C(),T(o(U),{key:0})):(C(),T(o(O),{key:1}))]),_:1})]),_:1},8,["result-desc","result"]),A(f(o(j),{"result-desc":s.$t("ip.public.ipv6"),result:c.value,size:"large"},{title:d(()=>[f(o(z),null,{default:d(()=>[L(g(s.$t("ip.public.ipv6")),1)]),_:1}),f(o(k),{type:"text",size:"small",ghost:"",onClick:w},{icon:d(()=>[r.value==="loading"?(C(),T(o(U),{key:0})):(C(),T(o(O),{key:1}))]),_:1})]),_:1},8,["result-desc","result"]),[[D,!e.renderOnSearch]]),f(o(me),{spinning:a.value==="loading"},{default:d(()=>[A(f(o(ue),null,{default:d(()=>[f(o(de),null,{default:d(()=>[f(o(fe),null,{title:d(()=>[p.value?(C(),T(o(ve),{key:0,bordered:"",column:"1"},{default:d(()=>[f(o(V),{label:s.$t("ip.result.city"),span:3},{default:d(()=>[L(g(p.value.city),1)]),_:1},8,["label"]),f(o(V),{label:s.$t("ip.result.country"),span:3},{default:d(()=>[L(g($.value)+" "+g(p.value.country.code+" | "+p.value.country.name),1)]),_:1},8,["label"]),f(o(V),{label:s.$t("ip.result.longitudeAndLatitude"),span:3},{default:d(()=>[L(g(p.value.latitude)+" / "+g(p.value.longitude),1)]),_:1},8,["label"]),f(o(V),{label:s.$t("ip.result.timeZone"),span:3},{default:d(()=>[L(g(p.value.country.timezone.code)+"("+g(p.value.country.timezone.offset)+") ",1)]),_:1},8,["label"]),f(o(V),{label:s.$t("ip.result.callingCode"),span:3},{default:d(()=>[L(g(p.value.country.callingCode),1)]),_:1},8,["label"])]),_:1})):pe("",!0)]),_:1})]),_:1})]),_:1},512),[[D,!e.renderOnSearch]])]),_:1},8,["spinning"])])]),_:1}))}});const Ne=ye(ke,[["__scopeId","data-v-41f576a2"]]);export{Ne as default};
