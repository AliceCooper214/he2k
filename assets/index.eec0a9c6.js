import{ba as _,d9 as tt,bT as T,b$ as et}from"./index.954a2cbc.js";var g={exports:{}};/*! MIT License Â© Sindre Sorhus */const a={},st=t=>{if(typeof self<"u"&&self&&t in self)return self;if(typeof window<"u"&&window&&t in window)return window;if(typeof _<"u"&&_&&t in _)return _;if(typeof globalThis<"u"&&globalThis)return globalThis},ot=["Headers","Request","Response","ReadableStream","fetch","AbortController","FormData"];for(const t of ot)Object.defineProperty(a,t,{get(){const e=st(t),s=e&&e[t];return typeof s=="function"?s.bind(e):s}});const $=t=>t!==null&&typeof t=="object",rt=typeof a.AbortController=="function",nt=typeof a.ReadableStream=="function",it=typeof a.FormData=="function",q=(...t)=>{let e={};for(const s of t)if(Array.isArray(s))Array.isArray(e)||(e=[]),e=[...e,...s];else if($(s))for(let[o,r]of Object.entries(s))$(r)&&Reflect.has(e,o)&&(r=q(e[o],r)),e={...e,[o]:r};return e},U=["get","post","put","patch","head","delete"],at={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},ut=["get","put","head","delete","options","trace"],ct=[408,413,429,500,502,503,504],D=[413,429,503],P=Symbol("stop");class R extends Error{constructor(e){super(e.statusText||String(e.status===0||e.status?e.status:"Unknown response error")),this.name="HTTPError",this.response=e}}class C extends Error{constructor(){super("Request timed out"),this.name="TimeoutError"}}const S=t=>new Promise(e=>setTimeout(e,t)),ft=(t,e,s)=>new Promise((o,r)=>{const u=setTimeout(()=>{s&&s.abort(),r(new C)},e);t.then(o).catch(r).then(()=>{clearTimeout(u)})}),ht=t=>U.includes(t)?t.toUpperCase():t,j={limit:2,methods:ut,statusCodes:ct,afterStatusCodes:D},pt=(t={})=>{if(typeof t=="number")return{...j,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...j,...t,afterStatusCodes:D}},b=2147483647;class k{constructor(e,s={}){if(this._retryCount=0,this._input=e,this._options={credentials:this._input.credentials||"same-origin",...s,hooks:q({beforeRequest:[],beforeRetry:[],afterResponse:[]},s.hooks),method:ht(s.method||this._input.method),prefixUrl:String(s.prefixUrl||""),retry:pt(s.retry),throwHttpErrors:s.throwHttpErrors!==!1,timeout:typeof s.timeout>"u"?1e4:s.timeout},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof a.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(rt&&(this.abortController=new a.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",()=>{this.abortController.abort()}),this._options.signal=this.abortController.signal),this.request=new a.Request(this._input,this._options),this._options.searchParams){const n=new URL(this.request.url);n.search=new URLSearchParams(this._options.searchParams),(it&&this._options.body instanceof a.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new a.Request(new a.Request(n,this.request),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new a.Request(this.request,{body:this._options.body}));const o=async()=>{if(this._options.timeout>b)throw new RangeError(`The \`timeout\` option cannot be greater than ${b}`);await S(1);let n=await this._fetch();for(const h of this._options.hooks.afterResponse){const f=await h(this.request,this._options,n.clone());f instanceof a.Response&&(n=f)}if(!n.ok&&this._options.throwHttpErrors)throw new R(n);if(this._options.onDownloadProgress){if(typeof this._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!nt)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return this._stream(n.clone(),this._options.onDownloadProgress)}return n},u=this._options.retry.methods.includes(this.request.method.toLowerCase())?this._retry(o):o();for(const[n,h]of Object.entries(at))u[n]=async()=>{this.request.headers.set("accept",this.request.headers.get("accept")||h);const f=(await u).clone();return n==="json"&&f.status===204?"":f[n]()};return u}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof C)){if(e instanceof R){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;const o=e.response.headers.get("Retry-After");if(o&&this._options.retry.afterStatusCodes.includes(e.response.status)){let r=Number(o);return Number.isNaN(r)?r=Date.parse(o)-Date.now():r*=1e3,typeof this._options.retry.maxRetryAfter<"u"&&r>this._options.retry.maxRetryAfter?0:r}if(e.response.status===413)return 0}return .3*2**(this._retryCount-1)*1e3}return 0}async _retry(e){try{return await e()}catch(s){const o=Math.min(this._calculateRetryDelay(s),b);if(o!==0&&this._retryCount>0){await S(o);for(const r of this._options.hooks.beforeRetry)if(await r({request:this.request,options:this._options,error:s,response:s.response.clone(),retryCount:this._retryCount})===P)return;return this._retry(e)}if(this._options.throwHttpErrors)throw s}}async _fetch(){for(const e of this._options.hooks.beforeRequest){const s=await e(this.request,this._options);if(s instanceof Request){this.request=s;break}if(s instanceof Response)return s}return this._options.timeout===!1?a.fetch(this.request.clone()):ft(a.fetch(this.request.clone()),this._options.timeout,this.abortController)}_stream(e,s){const o=Number(e.headers.get("content-length"))||0;let r=0;return new a.Response(new a.ReadableStream({start(u){const n=e.body.getReader();s&&s({percent:0,transferredBytes:0,totalBytes:o},new Uint8Array);async function h(){const{done:f,value:d}=await n.read();if(f){u.close();return}if(s){r+=d.byteLength;const y=o===0?0:r/o;s({percent:y,transferredBytes:r,totalBytes:o},d)}u.enqueue(d),h()}h()}}))}}const m=(...t)=>{for(const e of t)if((!$(e)||Array.isArray(e))&&typeof e<"u")throw new TypeError("The `options` argument must be an object");return q({},...t)},x=t=>{const e=(s,o)=>new k(s,m(t,o));for(const s of U)e[s]=(o,r)=>new k(o,m(t,r,{method:s}));return e.HTTPError=R,e.TimeoutError=C,e.create=s=>x(m(s)),e.extend=s=>x(m(t,s)),e.stop=P,e},lt=x(),dt=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"})),yt=tt(dt),O="[a-fA-F\\d:]",p=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${O})|(?<=${O})(?=\\s|$))`:"",c="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",w=`
(?:
(?:${i}:){7}(?:${i}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${i}:){6}(?:${c}|:${i}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${i}:){5}(?::${c}|(?::${i}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${i}:){4}(?:(?::${i}){0,1}:${c}|(?::${i}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${i}:){3}(?:(?::${i}){0,2}:${c}|(?::${i}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${i}:){2}(?:(?::${i}){0,3}:${c}|(?::${i}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${i}:){1}(?:(?::${i}){0,4}:${c}|(?::${i}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${i}){0,5}:${c}|(?::${i}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),_t=new RegExp(`(?:^${c}$)|(?:^${w}$)`),mt=new RegExp(`^${c}$`),wt=new RegExp(`^${w}$`),v=t=>t&&t.exact?_t:new RegExp(`(?:${p(t)}${c}${p(t)})|(?:${p(t)}${w}${p(t)})`,"g");v.v4=t=>t&&t.exact?mt:new RegExp(`${p(t)}${c}${p(t)}`,"g");v.v6=t=>t&&t.exact?wt:new RegExp(`${p(t)}${w}${p(t)}`,"g");var bt=v;const E=bt,l=t=>E({exact:!0}).test(t);l.v4=t=>E.v4({exact:!0}).test(t);l.v6=t=>E.v6({exact:!0}).test(t);l.version=t=>l(t)?l.v4(t)?4:6:void 0;var gt=l;(function(t,e){var s=T&&T.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0});const o=s(yt),r=s(gt);async function u(n){if(typeof n!="string"||!r.default.v4(n))throw new TypeError("A valid ipv4 address must be provided!");const{latitude:h,longitude:f,city:d,reserved:y,region:F,region_code:M,country_name:L,country_code:B,country_code_iso3:H,country_capital:N,country_tld:z,country_population:I,country_calling_code:K,continent_code:G,in_eu:W,postal:J,timezone:V,utc_offset:Z,currency:Q,currency_name:X,languages:A,country_area:Y}=await o.default(`https://ipapi.co/${n}/json/`).json();return y?{reserved:y}:{latitude:h,longitude:f,city:d,reserved:Boolean(y),region:{name:F,code:M},country:{name:L,code:B,iso3:H,capital:N,tld:z,population:I,area:Y,callingCode:K,postalCode:J,timezone:{code:V,offset:Z},currency:{name:X,code:Q},languages:A?A.split(","):[]},continent:{code:G,inEu:W}}}e.default=u,t.exports=u,t.exports.default=u})(g,g.exports);const Rt=et(g.exports);export{gt as a,Rt as i};
