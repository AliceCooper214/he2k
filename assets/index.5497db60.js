import{d as w,cm as L,r as y,as as U,z as C,a as k,b as t,g,o as R,i as F,c as a,U as r,x as d,bY as N,ao as D,N as h,j as s}from"./index.954a2cbc.js";import{L as O}from"./layout6.00f83a70.js";import{_ as S}from"./multiImagePicker.vue_vue_type_script_setup_true_lang.1173f5b8.js";import{J as j}from"./jszip.min.e4a3ab7e.js";import{i as q}from"./imageToIcon.3a6bb648.js";import"./_commonjs-dynamic-modules.30ae7933.js";const B=r("ico"),I=r("icns"),G=w({__name:"index",setup(A){const{t:T}=L(),b=y(),v=U(()=>{var e;return(e=b.value)==null?void 0:e.fileList}),m=y(!1),x=[{label:"16x16",value:16},{label:"32x32",value:32},{label:"48x48",value:48},{label:"64x64",value:64},{label:"96x96",value:96},{label:"128x128",value:128},{label:"256x256",value:256},{label:"512x512",value:512},{label:"1024x1024",value:1024}],o=C({size:[16],shape:"square",bleed:!1,iconType:"ico"}),$=async()=>{var n;if(!v.value.length){D.warn(T("image.imageChoose"));return}m.value=!0;const e=new j;for(const i of v.value){const l=i.name.split(".")[0];e.folder(l);for(const u of o.size){const c={source:i,size:u,shape:o.shape,bleed:!1,iconType:o.iconType},f=await q.convert(c);if(v.value.length===1&&o.size.length===1&&c.iconType!=="icns"){const _=URL.createObjectURL(f);h.handleDownload(_),m.value=!1;return}(n=e.folder(l))==null||n.file(`${l}--${u}x${u}.${c.iconType}`,f)}}e.generateAsync({type:"blob"}).then(i=>{const l=URL.createObjectURL(i);h.handleDownload(l)}),m.value=!1};return(e,n)=>{const i=s("a-checkbox-group"),l=s("a-radio-button"),u=s("a-radio-group"),c=s("a-select-option"),f=s("a-select"),_=s("a-space"),z=s("a-spin");return R(),k(g(O),{"max-width":1e3},{one:t(()=>[F(e.$slots,"default",{},()=>[a(z,{spinning:m.value},{default:t(()=>[a(_,{direction:"vertical",size:20},{default:t(()=>[a(g(S),{ref_key:"imageRef",ref:b},null,512),a(i,{value:o.size,"onUpdate:value":n[0]||(n[0]=p=>o.size=p),options:x},null,8,["value"]),a(u,{value:o.shape,"onUpdate:value":n[1]||(n[1]=p=>o.shape=p)},{default:t(()=>[a(l,{value:"square"},{default:t(()=>[r(d(e.$t("imageToFavicon.square")),1)]),_:1}),a(l,{value:"circle"},{default:t(()=>[r(d(e.$t("imageToFavicon.circle")),1)]),_:1}),a(l,{value:"fillet"},{default:t(()=>[r(d(e.$t("imageToFavicon.fillet")),1)]),_:1})]),_:1},8,["value"]),a(f,{value:o.iconType,"onUpdate:value":n[2]||(n[2]=p=>o.iconType=p),style:{width:"80px"}},{default:t(()=>[a(c,{value:"ico"},{default:t(()=>[B]),_:1}),a(c,{value:"icns"},{default:t(()=>[I]),_:1})]),_:1},8,["value"]),a(g(N),{type:"primary",onClick:$},{default:t(()=>[r(d(o.iconType==="ico"?e.$t("imageToFavicon.transformICO"):e.$t("imageToFavicon.transformICNS")),1)]),_:1})]),_:1})]),_:1},8,["spinning"])])]),_:3})}}});export{G as default};
